{"version":3,"file":"app.js","sourceRoot":"","sources":["../src/AppConfig.ts","../src/core/Logger.ts","../src/core/EventBus.ts","../src/core/Types.ts","../src/core/UrlConfig.ts","../src/core/ConnectionMessages.ts","../src/core/ParentBridge.ts","../src/core/http/HttpClient.ts","../src/core/clients/ims/ImsClient.ts","../src/core/clients/ims/ims.types.ts","../src/core/http/Cookie.ts","../src/core/http/Correlation.ts","../src/core/http/HttpError.ts","../src/core/http/HttpTypes.ts","../src/managers/ParticipantRoster.ts","../src/managers/MediaManager.ts","../src/managers/VirtualBackgroundManager.ts","../src/managers/ScreenShareManager.ts","../src/managers/NetworkQualityManager.ts","../src/managers/ConnectionStatusEngine.ts","../src/managers/JanusGateway.ts","../src/managers/RemoteFeedManager.ts","../src/managers/CallController.ts","../src/ui/UIController.ts","../src/app.ts"],"names":[],"mappings":"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","sourcesContent":["type LogLevel = \"debug\" | \"info\" | \"warn\" | \"error\" | \"silent\";\n\nconst IMS_MEDIA_CONSTRAINTS_MOCK_PAYLOAD = {\n  MEDIA_CONSTRAINTS: {\n    WEB_MEDIA_CONSTRAINTS: [\n      {\n        audio: true,\n        video: {\n          width: { min: 310, ideal: 320, max: 320 },\n          frameRate: { max: 20 },\n          aspectRatio: 1.777777778\n        }\n      },\n      {\n        audio: true,\n        video: {\n          width: { min: 310, ideal: 320 },\n          frameRate: { max: 20 },\n          aspectRatio: 1.777777778\n        }\n      },\n      { audio: true, video: true }\n    ],\n    WEB_MEDIA_CONSTRAINTS_GU: [\n      {\n        audio: true,\n        video: {\n          width: { min: 620, ideal: 640, max: 640 },\n          frameRate: { max: 20 },\n          aspectRatio: 1.777777778\n        }\n      },\n      {\n        audio: true,\n        video: {\n          width: { min: 620, ideal: 640 },\n          frameRate: { max: 20 },\n          aspectRatio: 1.777777778\n        }\n      },\n      { audio: true, video: true }\n    ],\n    MOBILE_MEDIA_CONSTRAINTS: [\n      {\n        audio: true,\n        video: {\n          width: { max: 640 },\n          frameRate: { max: 30 },\n          facingMode: { exact: \"user\" }\n        }\n      }\n    ]\n  },\n  PC_CONFIG: {\n    iceServers: [\n      {\n        urls: [\n          \"turn:coturn.videocx.io:443?transport=udp\",\n          \"turns:coturn.videocx.io:443?transport=tcp\"\n        ],\n        username: \"1772097225:ecd359ac-2237-42ff-8ddc-764d79d4ea0b\",\n        credential: \"odIkTMlYtpKWHHVZtAxw3a+VxJE=\"\n      },\n      {\n        urls: [\"stun:coturn.videocx.io:443\"]\n      }\n    ]\n  },\n  PC_CONFIG_FF: {\n    iceServers: [\n      {\n        url: \"turn:coturn.videocx.io:443?transport=udp\",\n        username: \"1772097225:ecd359ac-2237-42ff-8ddc-764d79d4ea0b\",\n        credential: \"odIkTMlYtpKWHHVZtAxw3a+VxJE=\"\n      },\n      {\n        url: \"stun:coturn.videocx.io:443\"\n      }\n    ]\n  },\n  videochat: {\n    videoBandwidth: 128000\n  },\n  chimeMediaConstraints: {\n    maxBandwidthKbps: 256,\n    employee: {\n      desktop: { width: 640, height: 480, frameRate: 20 },\n      mobile: { width: 640, height: 480, frameRate: 20 }\n    },\n    customer: {\n      desktop: { width: 640, height: 480, frameRate: 20 },\n      mobile: { width: 640, height: 480, frameRate: 20 }\n    }\n  }\n};\n\nconst APP_CONFIG = {\n  logging: {\n    level: \"warn\" as LogLevel\n  },\n  janus: {\n    initDebug: \"warn\" as \"all\" | \"warn\" | \"error\" | \"none\"\n  },\n  http: {\n    defaultTimeoutMs: 15000\n  },\n  ims: {\n    mediaConstraintsPath: \"/ims/users/media-constraints\",\n    useMockMediaConstraints: true,\n    mockMediaConstraintsResponse: {\n      name: \"VideoConstraint\",\n      value: JSON.stringify(IMS_MEDIA_CONSTRAINTS_MOCK_PAYLOAD)\n    }\n  },\n  vcx: {\n    imsBaseUrl: \"https://beta.videocx.io\",\n    clientId: \"101\",\n    defaultJanusServer: \"wss://beta.videocx.io/mstream_janus\",\n    defaultDisplayName: \"Guest\"\n  },\n  videoroom: {\n    maxPublishers: 10\n  },\n  media: {\n    bitrateBps: 250000,\n    bitrateCap: true,\n    maxFramerate: 15,\n    minBitrateBps: 32000,\n    maxBitrateBps: 1500000,\n    minFramerate: 5,\n    maxFramerateCap: 30\n  },\n  call: {\n    reconnectDelayMs: 1000,\n    participantSyncIntervalMs: 5000,\n    participantSyncCooldownMs: 2500,\n    participantSyncRequestTimeoutMs: 4500,\n    remoteFeedRetryDelayMs: 1200,\n    remoteFeedRetryMaxAttempts: 5,\n    remoteFeedRetryCooldownMs: 15000,\n    remoteFeedRetryMaxDelayMs: 7000,\n    remoteFeedRetryJitterMs: 400,\n    remoteFeedAttachTimeoutMs: 10000,\n    remoteFeedStartTimeoutMs: 12000,\n    retry: {\n      serverMaxAttempts: 3,\n      serverDelayMs: 3000,\n      peerMaxAttempts: 3,\n      peerDelayMs: 3000\n    }\n  },\n  ui: {\n    remoteFallbackRefreshMs: 2500,\n    remoteVideoStallThresholdMs: 4000\n  },\n  virtualBackground: {\n    maskMode: \"auto\" as \"auto\" | \"normal\" | \"inverted\",\n    maskAutoConfirmFrames: 4,\n    maskAutoProbeFrames: 15,\n    maskAutoMinDiff: 10\n  },\n  recording: {\n    folderPath: \"/opt/efs-janus-app/dev/VideoRecDownloads\",\n    autoStartParticipantThreshold: 2\n  },\n  networkQuality: {\n    sampleIntervalMs: 3000,\n    useSimulatedFallback: false,\n    simulated: {\n      rttBaseMs: 30,\n      rttSpreadMs: 200,\n      jitterBaseMs: 3,\n      jitterSpreadMs: 60,\n      lossMaxPct: 8,\n      bitrateBaseKbps: 150,\n      bitrateSpreadKbps: 1000\n    },\n    thresholds: {\n      rttGoodMs: 120,\n      jitterGoodMs: 30,\n      lossGoodPct: 2,\n      bitrateGoodKbps: 400\n    }\n  },\n  mediaTelemetry: {\n    sampleIntervalMs: 1000,\n    stallWindowMs: 3500,\n    peerTelemetryFreshnessMs: 6000,\n    enablePeerTelemetry: true\n  },\n  connectionStatus: {\n    tickIntervalMs: 1000,\n    rotationMinMs: 6000,\n    rotationMaxMs: 8000,\n    statsIntervalConnectingMs: 3000,\n    statsIntervalConnectedMs: 7000,\n    highRttMs: 1200,\n    highPacketLossThreshold: 0.08,\n    packetLossMinPackets: 100,\n    bytesGrowthThreshold: 1024,\n    mediaFlowRecentMs: 9000,\n    relayRecentMs: 12000,\n    candidateSwitchRecentMs: 12000,\n    localSlowCheckingMs: 12000,\n    localSlowStatsMs: 6000,\n    relayEarlyJoinWindowMs: 25000,\n    relayEarlyThresholdMs: 8000,\n    remoteSlowWaitMs: 10000,\n    disconnectedRetryMs: 4000\n  }\n} as const;\n","class Logger {\n  static instance: Logger | null = null;\n  private static readonly STATUS_COLOR_DEFAULT = \"#111827\";\n  private static readonly STATUS_COLOR_ERROR = \"#dc2626\";\n\n  private static userName = \"User\";\n  private static remoteName = \"Remote\";\n  private static level: LogLevel = APP_CONFIG.logging.level;\n  private static readonly LEVEL_PRIORITY: Record<LogLevel, number> = {\n    debug: 10,\n    info: 20,\n    warn: 30,\n    error: 40,\n    silent: 50\n  };\n\n  constructor(\n    private statusEl?: HTMLElement,\n    private infoEl?: HTMLElement\n  ){\n    Logger.instance = this;\n  }\n\n  static setUserName(name: string): void {\n    Logger.userName = (name && name.trim()) ? name.trim() : \"User\";\n    Logger.user(`Display name set to ${Logger.userName}`);\n  }\n\n  static setRemoteName(name: string): void {\n    Logger.remoteName = (name && name.trim()) ? name.trim() : \"Remote\";\n    Logger.remote(`Remote name set`);\n  }\n\n  static setLevel(level: LogLevel): void {\n    Logger.level = level;\n  }\n\n  private static canLog(level: LogLevel): boolean {\n    return Logger.LEVEL_PRIORITY[level] >= Logger.LEVEL_PRIORITY[Logger.level];\n  }\n\n  // Instance UI updates\n  setStatus(msg: string): void {\n    if (this.statusEl) {\n      this.statusEl.textContent = msg;\n      this.statusEl.style.color = Logger.STATUS_COLOR_DEFAULT;\n    }\n    Logger.user(msg);\n  }\n\n  setInfo(msg: string): void {\n    if (this.infoEl) this.infoEl.textContent = msg;\n    if (msg) Logger.flow(msg);\n  }\n\n  private setErrorStatus(msg: string): void {\n    if (this.statusEl) {\n      this.statusEl.textContent = msg;\n      this.statusEl.style.color = Logger.STATUS_COLOR_ERROR;\n    }\n    Logger.user(msg);\n  }\n\n  // Static UI updates (backward compatible)\n  static setStatus(msg: string): void {\n    if (Logger.instance) {\n      Logger.instance.setStatus(msg);\n      return;\n    }\n    Logger.user(msg);\n  }\n  static setInfo(msg: string): void {\n    if (Logger.instance) {\n      Logger.instance.setInfo(msg);\n      return;\n    }\n    Logger.flow(msg);\n  }\n  static info(msg: string): void { Logger.setInfo(msg); }\n  static warn(msg: string): void {\n    if (!Logger.canLog(\"warn\")) return;\n    console.log(`%cUser(${Logger.userName}): ${msg}`, \"color:#f59e0b;font-weight:bold\");\n  }\n  static error(msg: string, err?: unknown): void {\n    if (!Logger.canLog(\"error\")) return;\n    console.log(`%cUser(${Logger.userName}): ${msg}`, \"color:#fb7185;font-weight:bold\");\n    if (err) console.error(err);\n    if (Logger.instance) {\n      Logger.instance.setErrorStatus(msg);\n      return;\n    }\n    Logger.user(msg);\n  }\n\n  // Friendly narration logs\n  static user(msg: string, data?: any): void {\n    if (!Logger.canLog(\"info\")) return;\n    console.log(`%cUser(${Logger.userName}): ${msg}`, \"color:#22c55e;font-weight:bold\", data ?? \"\");\n  }\n  static remote(msg: string, data?: any): void {\n    if (!Logger.canLog(\"info\")) return;\n    console.log(`%cRemote(${Logger.remoteName}): ${msg}`, \"color:#60a5fa;font-weight:bold\", data ?? \"\");\n  }\n  static net(msg: string, data?: any): void {\n    if (!Logger.canLog(\"debug\")) return;\n    console.log(`%cNet: ${msg}`, \"color:#f59e0b;font-weight:bold\", data ?? \"\");\n  }\n  static flow(msg: string, data?: any): void {\n    if (!Logger.canLog(\"debug\")) return;\n    console.log(`%cFlow: ${msg}`, \"color:#a78bfa;font-weight:bold\", data ?? \"\");\n  }\n}\n","type EventHandler<T=any> = (payload:T)=>void;\nclass EventBus {\n  private handlers = new Map<string, Set<EventHandler>>();\n  on<T=any>(event:string, h:EventHandler<T>){\n    if(!this.handlers.has(event)) this.handlers.set(event, new Set());\n    this.handlers.get(event)!.add(h as EventHandler);\n  }\n  emit<T=any>(event:string, payload:T){\n    const hs = this.handlers.get(event);\n    if(!hs) return;\n    hs.forEach(h=>{ try{ (h as EventHandler<T>)(payload);} catch(e){ Logger.error(`EventBus handler failed for event=${event}`, e);} });\n  }\n}\n","type JoinConfig = { server:string; roomId:number; display:string; participantId?:number; };\ntype ParticipantSnapshot = { roomId:number; participantIds:number[]; selfId?:number; };\ntype VcxServer = {server:string, client_id:string};\ntype VcxVideoConfig = { bitrate_bps:number; bitrate_cap:boolean; max_framerate:number; };\ntype YesNoUnknown = \"Yes\" | \"No\" | \"Unknown\";\ntype PlaybackState = \"Active\" | \"Stalled\" | \"Unknown\";\ntype ConnectionOwner = \"LOCAL\" | \"REMOTE\" | \"SYSTEM\" | \"NEUTRAL\";\ntype ConnectionSeverity = \"info\" | \"warn\" | \"error\";\ntype ConnectionProductState =\n  | \"INIT\"\n  | \"MEDIA_PREP\"\n  | \"NEGOTIATING\"\n  | \"WAITING_REMOTE\"\n  | \"NETWORK_CHECK\"\n  | \"LOCAL_SLOW\"\n  | \"REMOTE_SLOW\"\n  | \"OPTIMIZING\"\n  | \"CONNECTED\"\n  | \"DEGRADED\"\n  | \"SERVER_RETRYING\"\n  | \"PEER_RETRYING\"\n  | \"RETRYING\"\n  | \"FAILED\";\ntype ConnectionStatusView = {\n  owner: ConnectionOwner;\n  primaryText: string;\n  secondaryText: string;\n  severity: ConnectionSeverity;\n  state: ConnectionProductState;\n};\ntype RemoteFeedObserver = {\n  onSubscriberPcReady?: (feedId: number, pc: RTCPeerConnection) => void;\n  onRemoteTrackSignal?: (feedId: number, track: MediaStreamTrack, on: boolean) => void;\n  onRemoteFeedCleanup?: (feedId: number) => void;\n  onRemoteFeedRetryExhausted?: (feedId: number, attempts: number) => void;\n  onRemoteTelemetry?: (feedId: number, payload: PeerPlaybackTelemetry) => void;\n};\ntype PeerPlaybackTelemetry = {\n  type: \"vcx-peer-telemetry\";\n  ts: number;\n  audioPlaybackStatus: PlaybackState;\n  videoPlaybackStatus: PlaybackState;\n};\ntype MediaStatusMatrix = {\n  remoteReceivingYourVideo: YesNoUnknown;\n  remoteReceivingYourAudio: YesNoUnknown;\n  remoteAudioPlaybackStatus: PlaybackState;\n  remoteVideoPlaybackStatus: PlaybackState;\n  localReceivingYourVideo: YesNoUnknown;\n  localReceivingYourAudio: YesNoUnknown;\n  localAudioPlaybackStatus: PlaybackState;\n  localVideoPlaybackStatus: PlaybackState;\n};\ntype MediaIoSnapshot = {\n  bytes: {\n    audioSent: number;\n    audioReceived: number;\n    videoSent: number;\n    videoReceived: number;\n  };\n  quality: {\n    localJitterMs: number | null;\n    localLossPct: number | null;\n    remoteJitterMs: number | null;\n    remoteLossPct: number | null;\n  };\n  issues: string[];\n  matrix: MediaStatusMatrix;\n  ts: number;\n};\n","class UrlConfig {\n  static getString(k:string, fb:string=\"\"):string{\n    const v = new URLSearchParams(window.location.search).get(k);\n    return v && v.trim() ? v.trim() : fb;\n  }\n\n  static getNumber(k:string, fb:number):number{\n    const s = this.getString(k,\"\");\n    const n = parseInt(s,10);\n    return Number.isFinite(n) ? n : fb;\n  }\n\n  static getVcxServer():VcxServer {\n    return {\n      server: APP_CONFIG.vcx.imsBaseUrl,\n      client_id: APP_CONFIG.vcx.clientId\n    };\n  }\n\n  static getVcxVideoConfig():VcxVideoConfig {\n    return {\n      bitrate_bps: APP_CONFIG.media.bitrateBps,\n      bitrate_cap: APP_CONFIG.media.bitrateCap,\n      max_framerate: APP_CONFIG.media.maxFramerate\n    };\n  }\n\n  static buildJoinConfig():JoinConfig{\n    const roomIdRaw = this.getString(\"roomId\", \"\");\n    if(!roomIdRaw){\n      alert(\"This call link is missing a room ID, so we can't join yet. Please open the full link again or add ?roomId=1234 to the URL.\");\n      throw new Error(\"Missing required query param: roomId\");\n    }\n\n    const roomId = parseInt(roomIdRaw, 10);\n    if(!Number.isFinite(roomId)){\n      alert(\"This call link is missing a room ID, so we can't join yet. Please open the full link again or add ?roomId=1234 to the URL.\");\n      throw new Error(\"Invalid query param: roomId must be a number\");\n    }\n\n    const participantIdRaw = this.getString(\"participantId\", \"\");\n    let participantId: number | undefined = undefined;\n    if (participantIdRaw) {\n      const parsedParticipantId = parseInt(participantIdRaw, 10);\n      if (!Number.isFinite(parsedParticipantId) || parsedParticipantId <= 0) {\n        throw new Error(\"Invalid query param: participantId must be a positive number\");\n      }\n      participantId = parsedParticipantId;\n    }\n\n    return {\n      server: this.getString(\"server\", APP_CONFIG.vcx.defaultJanusServer),\n      roomId,\n      display: this.getString(\"name\", APP_CONFIG.vcx.defaultDisplayName),\n      participantId\n    };\n  }\n}\n","type ConnectionMessageGroup = {\n  owner: ConnectionOwner;\n  severity: ConnectionSeverity;\n  rotate: boolean;\n  primary: string[];\n  secondary: string[];\n};\n\nconst CONNECTION_ROTATION_MIN_MS = APP_CONFIG.connectionStatus.rotationMinMs;\nconst CONNECTION_ROTATION_MAX_MS = APP_CONFIG.connectionStatus.rotationMaxMs;\n\nconst CONNECTION_MESSAGES: Record<ConnectionProductState, ConnectionMessageGroup> = {\n  INIT: {\n    owner: \"SYSTEM\",\n    severity: \"info\",\n    rotate: false,\n    primary: [\"Getting ready...\"],\n    secondary: [\"Preparing secure call setup.\"]\n  },\n  MEDIA_PREP: {\n    owner: \"SYSTEM\",\n    severity: \"info\",\n    rotate: true,\n    primary: [\n      \"Preparing camera and microphone...\",\n      \"Setting up your media devices...\",\n      \"Finalizing media permissions...\"\n    ],\n    secondary: [\n      \"This usually takes a few seconds.\",\n      \"Checking browser access to media devices.\",\n      \"Almost done.\"\n    ]\n  },\n  NEGOTIATING: {\n    owner: \"SYSTEM\",\n    severity: \"info\",\n    rotate: true,\n    primary: [\n      \"Connecting your call...\",\n      \"Negotiating secure media channels...\",\n      \"Establishing video path...\"\n    ],\n    secondary: [\n      \"Please stay on this screen.\",\n      \"Optimizing signaling and media routing.\",\n      \"Finalizing connection details.\"\n    ]\n  },\n  WAITING_REMOTE: {\n    owner: \"SYSTEM\",\n    severity: \"info\",\n    rotate: true,\n    primary: [\n      \"Waiting for the other participant...\",\n      \"Waiting for participant to join...\",\n      \"Standing by for remote join...\"\n    ],\n    secondary: [\n      \"Keep this screen open while they join.\",\n      \"Share the link if they have not joined yet.\",\n      \"This screen will update automatically.\"\n    ]\n  },\n  NETWORK_CHECK: {\n    owner: \"SYSTEM\",\n    severity: \"info\",\n    rotate: true,\n    primary: [\n      \"Checking network quality...\",\n      \"Validating connection stability...\",\n      \"Testing the best connection route...\"\n    ],\n    secondary: [\n      \"This helps us keep video stable.\",\n      \"Trying to improve call reliability.\",\n      \"Connection is still being tuned.\"\n    ]\n  },\n  LOCAL_SLOW: {\n    owner: \"LOCAL\",\n    severity: \"warn\",\n    rotate: true,\n    primary: [\n      \"Your network seems slow...\",\n      \"Your connection is unstable right now...\",\n      \"Your upload speed is lower than required...\"\n    ],\n    secondary: [\n      \"Try a stronger network or pause heavy downloads.\",\n      \"The other participant may see delayed video.\",\n      \"We are still trying to stabilize your connection.\"\n    ]\n  },\n  REMOTE_SLOW: {\n    owner: \"REMOTE\",\n    severity: \"warn\",\n    rotate: true,\n    primary: [\n      \"Other participant's network is slow...\",\n      \"Waiting for the other participant's browser to send video...\",\n      \"Still waiting for the participant's network...\"\n    ],\n    secondary: [\n      \"Your connection looks active. Waiting on remote media.\",\n      \"The other side may need a few more seconds.\",\n      \"Their video should appear once their network stabilizes.\"\n    ]\n  },\n  OPTIMIZING: {\n    owner: \"SYSTEM\",\n    severity: \"info\",\n    rotate: true,\n    primary: [\n      \"Switching to a more stable connection...\",\n      \"Optimizing route for better call quality...\",\n      \"Adjusting network path for stability...\"\n    ],\n    secondary: [\n      \"You may notice a brief quality change.\",\n      \"Using fallback routing to keep call alive.\",\n      \"Stability should improve shortly.\"\n    ]\n  },\n  CONNECTED: {\n    owner: \"NEUTRAL\",\n    severity: \"info\",\n    rotate: false,\n    primary: [\"Connected\"],\n    secondary: [\"Video and audio are live.\"]\n  },\n  DEGRADED: {\n    owner: \"SYSTEM\",\n    severity: \"warn\",\n    rotate: true,\n    primary: [\n      \"Connection is unstable...\",\n      \"Call quality is temporarily degraded...\",\n      \"Recovering from network instability...\"\n    ],\n    secondary: [\n      \"Trying to restore stable media.\",\n      \"You may see temporary freezes.\",\n      \"Automatic recovery is in progress.\"\n    ]\n  },\n  SERVER_RETRYING: {\n    owner: \"SYSTEM\",\n    severity: \"warn\",\n    rotate: true,\n    primary: [\n      \"Video server call failed. Retrying...\",\n      \"Unable to reach video server. Retrying...\",\n      \"Reconnecting to video server...\"\n    ],\n    secondary: [\n      \"Please stay on this screen.\",\n      \"Trying a fresh server session now.\",\n      \"Session recovery is in progress.\"\n    ]\n  },\n  PEER_RETRYING: {\n    owner: \"SYSTEM\",\n    severity: \"warn\",\n    rotate: true,\n    primary: [\n      \"Peer connection failed. Retrying...\",\n      \"TURN/ICE connection failed. Retrying...\",\n      \"Rebuilding media connection...\"\n    ],\n    secondary: [\n      \"Trying a new media path now.\",\n      \"Refreshing peer connectivity.\",\n      \"Call media recovery is in progress.\"\n    ]\n  },\n  RETRYING: {\n    owner: \"SYSTEM\",\n    severity: \"warn\",\n    rotate: true,\n    primary: [\n      \"Reconnecting call...\",\n      \"Trying to recover connection...\",\n      \"Attempting a new network route...\"\n    ],\n    secondary: [\n      \"Please stay on this screen.\",\n      \"This usually resolves in a few seconds.\",\n      \"Session recovery is in progress.\"\n    ]\n  },\n  FAILED: {\n    owner: \"SYSTEM\",\n    severity: \"error\",\n    rotate: false,\n    primary: [\"Connection failed\"],\n    secondary: [\"Please reconnect to continue the call.\"]\n  }\n};\n","class ParentBridge {\n  emit(evt:any){\n    try{\n      if(window.parent && window.parent !== window){\n        window.parent.postMessage(evt, \"*\");\n      }\n    }catch(e:any){\n      Logger.error(\"ParentBridge postMessage failed\", e);\n    }\n  }\n\n  onCommand(cb:(cmd:any)=>void){\n    window.addEventListener(\"message\", (ev)=>{\n      const d:any = ev.data;\n      if(d && d.type) cb(d);\n    });\n  }\n}\n","// import { Cookie } from \"./Cookie\";\n// import { Correlation } from \"./Correlation\";\n// import { HttpError } from \"./HttpError\";\n// import type { HttpRequest, HttpResponse } from \"./HttpTypes\";\n\n/**\n * VCX browser HTTP client:\n * - Sends cookies (credentials: include) by default (needed for IMS/OWB token cookies)\n * - Adds X-Request-Id and X-XSRF-Token (from cookies) automatically when available\n * - Adds client-id header\n * - Provides timeout via AbortController\n * - Normalizes errors to HttpError\n */\nclass HttpClient {\n  constructor(\n    private readonly baseUrl: string,\n    private readonly clientId: string,\n    private readonly defaultTimeoutMs = APP_CONFIG.http.defaultTimeoutMs\n  ) {}\n\n  async request<T>(req: Omit<HttpRequest, \"url\"> & { path: string }): Promise<HttpResponse<T>> {\n    const requestId = Correlation.newId();\n    const url = this.buildUrl(this.baseUrl, req.path, req.query);\n\n    const controller = new AbortController();\n    const timeoutMs = req.timeoutMs ?? this.defaultTimeoutMs;\n    const t0 = performance.now();\n    const timeoutHandle = window.setTimeout(() => controller.abort(), timeoutMs);\n\n    const xsrf =\n      Cookie.get(\"xsrf-token\") ||\n      Cookie.get(\"XSRF-TOKEN\") ||\n      \"\";\n\n    const headers: Record<string, string> = {\n      \"accept\": \"application/json\",\n      ...(req.body !== undefined ? { \"content-type\": \"application/json; charset=utf-8\" } : {}),\n      \"client-id\": this.clientId,\n      \"x-request-id\": requestId,\n      ...(xsrf ? { \"x-xsrf-token\": xsrf } : {}),\n      ...(req.headers ?? {}),\n    };\n\n    try {\n      const res = await fetch(url, {\n        method: req.method,\n        headers,\n        body: req.body !== undefined ? JSON.stringify(req.body) : undefined,\n        credentials: req.credentials ?? \"include\",\n        signal: controller.signal,\n      });\n\n      const ms = Math.round(performance.now() - t0);\n\n      const text = await res.text().catch(() => \"\");\n      const data: any = text ? this.safeJson(text) : null;\n\n      if (!res.ok) {\n        throw new HttpError(\n          `HTTP ${res.status} ${req.method} ${req.path}`,\n          res.status,\n          requestId,\n          url,\n          data\n        );\n      }\n\n      return { status: res.status, data: data as T, headers: res.headers, requestId, url, ms };\n    } catch (e: any) {\n      const ms = Math.round(performance.now() - t0);\n\n      if (e?.name === \"AbortError\") {\n        throw new HttpError(\n          `Timeout (${timeoutMs}ms) ${req.method} ${req.path}`,\n          408,\n          requestId,\n          url,\n          { timeoutMs, ms }\n        );\n      }\n      if (e instanceof HttpError) throw e;\n      throw new HttpError(\n        `Network error ${req.method} ${req.path}`,\n        undefined,\n        requestId,\n        url,\n        e\n      );\n    } finally {\n      window.clearTimeout(timeoutHandle);\n    }\n  }\n\n  async getJson<T>(path: string, query?: HttpRequest[\"query\"], headers?: Record<string, string>): Promise<HttpResponse<T>> {\n    return this.request<T>({ method: \"GET\", path, query, headers });\n  }\n\n  private buildUrl(baseUrl: string, path: string, query?: HttpRequest[\"query\"]): string {\n    const u = new URL(path, baseUrl);\n    if (query) {\n      for (const [k, v] of Object.entries(query)) {\n        if (v === undefined || v === null) continue;\n        u.searchParams.set(k, String(v));\n      }\n    }\n    return u.toString();\n  }\n\n  private safeJson(text: string): any {\n    try { return JSON.parse(text); } catch { return text; }\n  }\n}\n","// import { HttpClient } from \"../../http/HttpClient\";\n// import type { ImsSettingRow, MediaConstraintsPayload } from \"./ims.types\";\n\nclass ImsClient {\n  constructor(private readonly http: HttpClient) {}\n\n  /**\n   * GET /ims/users/media-constraints\n   * Returns row with a JSON string in `value`. We parse it and return the payload.\n   */\n  async getMediaConstraints(): Promise<MediaConstraintsPayload> {\n    if (APP_CONFIG.ims.useMockMediaConstraints) {\n      const row = APP_CONFIG.ims.mockMediaConstraintsResponse;\n      return JSON.parse(row.value);\n    }\n\n    const res = await this.http.getJson<ImsSettingRow>(APP_CONFIG.ims.mediaConstraintsPath);\n    const row = res.data;\n\n    // value is a JSON string (escaped)\n    const payload: MediaConstraintsPayload = JSON.parse(row.value);\n    return payload;\n  }\n}\n","interface ImsSettingRow {\n  name: string;\n  /** JSON string */\n  value: string;\n}\n\n/** Parsed payload inside `value` */\ninterface MediaConstraintsPayload {\n  MEDIA_CONSTRAINTS?: {\n    WEB_MEDIA_CONSTRAINTS?: any[];\n    WEB_MEDIA_CONSTRAINTS_GU?: any[];\n    MOBILE_MEDIA_CONSTRAINTS?: any[];\n  };\n  PC_CONFIG?: RTCConfiguration;\n  PC_CONFIG_FF?: any;\n  videochat?: any;\n  chimeMediaConstraints?: any;\n}\n\n/**\n * Pick best constraint object for browser/device.\n * You can tweak strategy later (e.g., based on isMobile, isSafari, bandwidth, etc.)\n */\nfunction pickMediaConstraints(payload: MediaConstraintsPayload, isMobile: boolean): MediaStreamConstraints {\n  const mc = payload.MEDIA_CONSTRAINTS ?? {};\n  if (isMobile) {\n    const list = mc.MOBILE_MEDIA_CONSTRAINTS ?? [];\n    return (list[0] as MediaStreamConstraints) ?? { audio: true, video: true };\n  }\n  const list = mc.WEB_MEDIA_CONSTRAINTS ?? [];\n  return (list[0] as MediaStreamConstraints) ?? { audio: true, video: true };\n}\n","class Cookie {\n  /** Get cookie value by name (decoded). Returns null if missing. */\n  static get(name: string): string | null {\n    const safe = name.replace(/[-.$?*|{}()\\[\\]\\\\\\/\\+^]/g, \"\\\\$&\");\n    const match = document.cookie.match(new RegExp(`(?:^|; )${safe}=([^;]*)`));\n    return match ? decodeURIComponent(match[1]) : null;\n  }\n}\n","class Correlation {\n  /** Browser-safe request id */\n  static newId(): string {\n    const c: any = crypto as any;\n    if (c && typeof c.randomUUID === \"function\") return c.randomUUID();\n    return `${Date.now()}-${Math.random().toString(16).slice(2)}`;\n  }\n}\n","class HttpError extends Error {\n  constructor(\n    message: string,\n    public readonly status?: number,\n    public readonly requestId?: string,\n    public readonly url?: string,\n    public readonly details?: unknown\n  ) {\n    super(message);\n    this.name = \"HttpError\";\n  }\n}\n","type HttpMethod = \"GET\" | \"POST\" | \"PUT\" | \"PATCH\" | \"DELETE\";\n\ninterface HttpRequest {\n  method: HttpMethod;\n  /** Absolute URL */\n  url: string;\n  headers?: Record<string, string>;\n  query?: Record<string, string | number | boolean | null | undefined>;\n  body?: unknown;\n  timeoutMs?: number;\n  /** default: include (send cookies) */\n  credentials?: RequestCredentials;\n}\n\ninterface HttpResponse<T> {\n  status: number;\n  data: T;\n  headers: Headers;\n  requestId: string;\n  url: string;\n  ms: number;\n}\n","class ParticipantRoster {\n  private ids = new Set<number>();\n  private selfId?: number;\n  setSelf(id:number){ this.selfId=id; this.ids.add(id); }\n  add(id:number){ this.ids.add(id); }\n  remove(id:number){ this.ids.delete(id); }\n  has(id:number){ return this.ids.has(id); }\n  snapshot(roomId:number):ParticipantSnapshot{\n    return { roomId, participantIds:Array.from(this.ids.values()), selfId:this.selfId };\n  }\n  reset(){ this.ids.clear(); this.selfId=undefined; }\n}\n","class MediaManager {\n  private localPreviewStream: MediaStream | null = null;\n  private remotePlayPromise: Promise<void> | null = null;\n\n  setLocalTrack(video: HTMLVideoElement, track: MediaStreamTrack){\n    if(!this.localPreviewStream) this.localPreviewStream = new MediaStream();\n    this.localPreviewStream.getTracks().forEach(t=>this.localPreviewStream!.removeTrack(t));\n    this.localPreviewStream.addTrack(track);\n    video.srcObject = this.localPreviewStream;\n    video.muted = true;\n    video.play().catch((e: any) => {\n      if (e?.name === \"AbortError\") return;\n      Logger.error(\"Local video play failed\", e);\n    });\n  }\n\n  setRemoteTrack(video: HTMLVideoElement, track: MediaStreamTrack){\n    const ms = (video.srcObject as MediaStream) || new MediaStream();\n    // Keep one active track per kind for this single remote renderer.\n    ms.getTracks().forEach(t=>{\n      if(t.kind === track.kind && t.id !== track.id){\n        ms.removeTrack(t);\n        try{\n          t.stop();\n        }catch(e:any){\n          Logger.error(\"Stopping replaced remote track failed\", e);\n        }\n      }\n    });\n    ms.addTrack(track);\n    if (video.srcObject !== ms) {\n      video.srcObject = ms;\n    }\n\n    if (!video.paused) return;\n    if (this.remotePlayPromise) return;\n\n    this.remotePlayPromise = video.play()\n      .catch((e:any)=>{\n        // Normal when track/srcObject is reloaded during renegotiation.\n        if (e?.name === \"AbortError\") return;\n        Logger.error(\"Remote video play failed\", e);\n      })\n      .finally(() => {\n        this.remotePlayPromise = null;\n      });\n  }\n\n  removeRemoteTrack(video: HTMLVideoElement, track: MediaStreamTrack){\n    const ms = video.srcObject as MediaStream | null;\n    if(!ms) return;\n\n    ms.getTracks().forEach(t=>{\n      if(t === track || t.id === track.id){\n        ms.removeTrack(t);\n      }\n    });\n\n    if(ms.getTracks().length === 0){\n      video.srcObject = null;\n    }\n  }\n\n  clearLocal(video: HTMLVideoElement){\n    const ms = video.srcObject as MediaStream | null;\n    if(ms) ms.getTracks().forEach(t=>t.stop());\n    video.srcObject = null;\n    this.localPreviewStream = null;\n  }\n\n  clearRemote(video: HTMLVideoElement){\n    this.remotePlayPromise = null;\n    const ms = video.srcObject as MediaStream | null;\n    if(ms) ms.getTracks().forEach(t=>t.stop());\n    video.srcObject = null;\n  }\n}\n","class VirtualBackgroundManager {\n  private bg = new Image();\n  private seg: any = null;\n  private canvas: HTMLCanvasElement;\n  private ctx: CanvasRenderingContext2D;\n  private srcCanvas: HTMLCanvasElement;\n  private srcCtx: CanvasRenderingContext2D;\n  private maskCanvas: HTMLCanvasElement;\n  private maskCtx: CanvasRenderingContext2D;\n  private bgCanvas: HTMLCanvasElement;\n  private bgCtx: CanvasRenderingContext2D;\n  private inVideo: HTMLVideoElement;\n  private running = false;\n  private segInFlight = false;\n  private srcStream: MediaStream | null = null;\n  private outStream: MediaStream | null = null;\n  private resolvedMaskMode: \"normal\" | \"inverted\" | null = null;\n  private maskVotes = { normal: 0, inverted: 0 };\n  private maskProbeFrames = 0;\n  private sourceProvider: (() => Promise<MediaStream | null>) | null = null;\n  private lastRecoverAttemptAt = 0;\n  private readonly recoverCooldownMs = 1200;\n\n  private bgUrl = this.getBgUrl();\n\n  constructor(){\n    this.bg.src = this.bgUrl;\n\n    this.canvas = document.createElement(\"canvas\");\n    const c = this.canvas.getContext(\"2d\");\n    if(!c) throw new Error(\"No canvas 2d\");\n    this.ctx = c;\n\n    this.srcCanvas = document.createElement(\"canvas\");\n    const sc = this.srcCanvas.getContext(\"2d\");\n    if(!sc) throw new Error(\"No source canvas 2d\");\n    this.srcCtx = sc;\n\n    this.maskCanvas = document.createElement(\"canvas\");\n    const mc = this.maskCanvas.getContext(\"2d\");\n    if(!mc) throw new Error(\"No mask canvas 2d\");\n    this.maskCtx = mc;\n\n    this.bgCanvas = document.createElement(\"canvas\");\n    const bc = this.bgCanvas.getContext(\"2d\");\n    if(!bc) throw new Error(\"No background canvas 2d\");\n    this.bgCtx = bc;\n\n    this.inVideo = document.createElement(\"video\");\n    this.inVideo.autoplay = true;\n    this.inVideo.playsInline = true;\n    this.inVideo.muted = true;\n    this.inVideo.style.cssText = \"position:fixed;left:-10000px;top:-10000px;width:1px;height:1px;opacity:0;pointer-events:none;\";\n  }\n\n  setSourceProvider(provider: () => Promise<MediaStream | null>): void {\n    this.sourceProvider = provider;\n  }\n\n  private getBgUrl(): string {\n    try {\n      return new URL(\"./virtual.jpeg\", window.location.href).toString();\n    } catch {\n      return \"./virtual.jpeg\";\n    }\n  }\n\n  private async ensureBgLoaded(): Promise<void> {\n    const img = this.bg;\n    const url = this.bgUrl;\n    if (!img.src || img.src !== url) {\n      img.src = url;\n    }\n    Logger.user(`VB background loading: ${img.src}`);\n    if (img.complete && img.naturalWidth > 0) {\n      Logger.user(`VB background already loaded: w=${img.naturalWidth} h=${img.naturalHeight}`);\n      return;\n    }\n    await new Promise<void>((resolve) => {\n      img.onload = () => {\n        Logger.user(`VB background loaded OK: w=${img.naturalWidth} h=${img.naturalHeight}`);\n        resolve();\n      };\n      img.onerror = () => {\n        Logger.user(`VB background FAILED to load: ${img.src}`);\n        resolve();\n      };\n    });\n  }\n\n  private cloneVideoOnlyStream(stream: MediaStream): MediaStream {\n    const inputTrack = stream.getVideoTracks()[0];\n    if (!inputTrack) {\n      return new MediaStream();\n    }\n    const clonedTrack = inputTrack.clone();\n    clonedTrack.enabled = inputTrack.enabled !== false;\n    return new MediaStream([clonedTrack]);\n  }\n\n  private releaseSourceStream(): void {\n    if (this.srcStream) {\n      this.srcStream.getTracks().forEach((t) => {\n        try {\n          t.stop();\n        } catch {}\n      });\n    }\n    this.srcStream = null;\n    this.inVideo.srcObject = null;\n  }\n\n  private async prepareSourceStream(stream: MediaStream): Promise<void> {\n    const cloned = this.cloneVideoOnlyStream(stream);\n    const track = cloned.getVideoTracks()[0];\n    if (!track) {\n      throw new Error(\"Virtual background source video track unavailable\");\n    }\n\n    this.releaseSourceStream();\n    this.srcStream = cloned;\n    this.inVideo.srcObject = cloned;\n    if (typeof document !== \"undefined\" && document.body && !document.body.contains(this.inVideo)) {\n      document.body.appendChild(this.inVideo);\n    }\n\n    await this.inVideo.play().catch((e:any)=>{\n      if (e?.name === \"AbortError\") return;\n      Logger.error(\"Virtual background input video play failed\", e);\n    });\n  }\n\n  private ensureSegmentation(): void {\n    if (this.seg) return;\n    this.seg = new SelfieSegmentation({\n      locateFile: (file: string) => `https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/${file}`\n    });\n    this.seg.setOptions({ modelSelection: 1 });\n    this.seg.onResults((r: any) => this.onResults(r));\n  }\n\n  async enable(stream: MediaStream): Promise<MediaStream>{\n    this.running = false;\n    this.segInFlight = false;\n    this.resolvedMaskMode = null;\n    this.maskVotes.normal = 0;\n    this.maskVotes.inverted = 0;\n    this.maskProbeFrames = 0;\n\n    await this.prepareSourceStream(stream);\n    await this.ensureBgLoaded();\n    this.ensureSegmentation();\n\n    this.running = true;\n    this.loop();\n    this.outStream = this.canvas.captureStream(24);\n    Logger.user(\"Virtual background enabled\");\n    Logger.setStatus(\"Virtual background enabled\");\n    return this.outStream;\n  }\n\n  disable(){\n    this.running = false;\n    this.segInFlight = false;\n    this.outStream = null;\n    this.releaseSourceStream();\n    Logger.user(\"Virtual background disabled\");\n    Logger.setStatus(\"Virtual background disabled\");\n  }\n\n  getSourceStream(){ return this.srcStream; }\n  getOutputStream(){ return this.outStream; }\n\n  private async tryRecoverSource(): Promise<void> {\n    if (!this.sourceProvider) return;\n    const now = Date.now();\n    if (now - this.lastRecoverAttemptAt < this.recoverCooldownMs) return;\n    this.lastRecoverAttemptAt = now;\n\n    try {\n      const next = await this.sourceProvider();\n      const nextTrack = next?.getVideoTracks()[0];\n      if (!next || !nextTrack || nextTrack.readyState !== \"live\") return;\n      await this.prepareSourceStream(next);\n      Logger.user(\"Virtual background source recovered\");\n    } catch (e: any) {\n      Logger.error(\"Virtual background source recovery failed\", e);\n    }\n  }\n\n  private async loop(){\n    while(this.running){\n      if(this.inVideo.readyState >= 2){\n        try {\n          if (this.inVideo.paused) {\n            await this.inVideo.play().catch(() => {});\n          }\n          const srcVideoTrack = this.srcStream?.getVideoTracks()[0] ?? null;\n          if (!srcVideoTrack || srcVideoTrack.readyState !== \"live\") {\n            await this.tryRecoverSource();\n          } else {\n            if (!srcVideoTrack.enabled) srcVideoTrack.enabled = true;\n\n            // Always paint raw camera first so preview never goes black.\n            const w = this.inVideo.videoWidth || 640;\n            const h = this.inVideo.videoHeight || 480;\n            this.ensureCanvasSizes(w, h);\n            this.ctx.globalCompositeOperation = \"source-over\";\n            this.ctx.clearRect(0, 0, w, h);\n            this.ctx.drawImage(this.inVideo, 0, 0, w, h);\n\n            // Kick segmentation in non-blocking mode to avoid loop freeze.\n            if (!this.segInFlight && this.seg) {\n              this.segInFlight = true;\n              void this.seg.send({ image: this.inVideo })\n                .catch((e: any) => {\n                  Logger.error(\"Virtual background segmentation frame failed\", e);\n                })\n                .finally(() => {\n                  this.segInFlight = false;\n                });\n            }\n          }\n        } catch (e: any) {\n          Logger.error(\"Virtual background loop failed\", e);\n        }\n      } else {\n        await this.tryRecoverSource();\n      }\n      await new Promise(r=>setTimeout(r, 33));\n    }\n  }\n\n  private ensureCanvasSizes(w: number, h: number): void {\n    if (this.canvas.width !== w) this.canvas.width = w;\n    if (this.canvas.height !== h) this.canvas.height = h;\n    if (this.srcCanvas.width !== w) this.srcCanvas.width = w;\n    if (this.srcCanvas.height !== h) this.srcCanvas.height = h;\n    if (this.maskCanvas.width !== w) this.maskCanvas.width = w;\n    if (this.maskCanvas.height !== h) this.maskCanvas.height = h;\n    if (this.bgCanvas.width !== w) this.bgCanvas.width = w;\n    if (this.bgCanvas.height !== h) this.bgCanvas.height = h;\n  }\n\n  private onResults(results: any){\n    if (!this.running) return;\n    if(!results?.image || !results?.segmentationMask) return;\n\n    const w = (results.image && results.image.width) || this.inVideo.videoWidth || 640;\n    const h = (results.image && results.image.height) || this.inVideo.videoHeight || 480;\n    if(!w || !h) return;\n    this.ensureCanvasSizes(w, h);\n\n    // If background not available, keep raw frame already rendered by loop.\n    if(!(this.bg.complete && this.bg.naturalWidth > 0)){\n      return;\n    }\n\n    try {\n      this.srcCtx.clearRect(0, 0, w, h);\n      this.srcCtx.drawImage(results.image, 0, 0, w, h);\n      const srcData = this.srcCtx.getImageData(0, 0, w, h);\n\n      this.maskCtx.clearRect(0, 0, w, h);\n      this.maskCtx.drawImage(results.segmentationMask, 0, 0, w, h);\n      const maskData = this.maskCtx.getImageData(0, 0, w, h);\n\n      this.bgCtx.clearRect(0, 0, w, h);\n      this.bgCtx.drawImage(this.bg, 0, 0, w, h);\n      const bgData = this.bgCtx.getImageData(0, 0, w, h);\n\n      const mode = this.getMaskMode(maskData, w, h);\n      const out = this.ctx.createImageData(w, h);\n      const src = srcData.data;\n      const mask = maskData.data;\n      const bg = bgData.data;\n      const dst = out.data;\n\n      for (let i = 0; i < dst.length; i += 4) {\n        // Use alpha when available; otherwise fall back to luma from RGB mask.\n        const alpha = mask[i + 3];\n        const luma = (mask[i] + mask[i + 1] + mask[i + 2]) / 3;\n        let m = alpha > 8 ? (alpha / 255) : (luma / 255);\n        if (mode === \"inverted\") m = 1 - m;\n        if (m < 0) m = 0;\n        if (m > 1) m = 1;\n\n        const inv = 1 - m;\n        dst[i] = Math.round(src[i] * m + bg[i] * inv);\n        dst[i + 1] = Math.round(src[i + 1] * m + bg[i + 1] * inv);\n        dst[i + 2] = Math.round(src[i + 2] * m + bg[i + 2] * inv);\n        dst[i + 3] = 255;\n      }\n\n      this.ctx.putImageData(out, 0, 0);\n    } catch (e: any) {\n      Logger.error(\"Virtual background composition failed\", e);\n    }\n  }\n\n  private getMaskMode(maskData: ImageData, w: number, h: number): \"normal\" | \"inverted\" {\n    const configured = APP_CONFIG.virtualBackground.maskMode;\n    if (configured === \"normal\" || configured === \"inverted\") return configured;\n    if (this.resolvedMaskMode) return this.resolvedMaskMode;\n\n    const centerPoints: Array<[number, number]> = [\n      [0.5, 0.5],\n      [0.45, 0.5],\n      [0.55, 0.5],\n      [0.5, 0.44],\n      [0.5, 0.56]\n    ];\n    const edgePoints: Array<[number, number]> = [\n      [0.08, 0.08],\n      [0.5, 0.08],\n      [0.92, 0.08],\n      [0.08, 0.5],\n      [0.92, 0.5],\n      [0.08, 0.92],\n      [0.5, 0.92],\n      [0.92, 0.92]\n    ];\n\n    const center = this.sampleMaskSignal(maskData.data, centerPoints, w, h);\n    const edge = this.sampleMaskSignal(maskData.data, edgePoints, w, h);\n    const alphaDiff = center.alpha - edge.alpha;\n    const lumaDiff = center.luma - edge.luma;\n    const useAlpha = Math.abs(alphaDiff) >= Math.abs(lumaDiff);\n    const diff = useAlpha ? alphaDiff : lumaDiff;\n    const minDiff = APP_CONFIG.virtualBackground.maskAutoMinDiff;\n\n    this.maskProbeFrames += 1;\n    if (Math.abs(diff) >= minDiff) {\n      const guess: \"normal\" | \"inverted\" = diff >= 0 ? \"normal\" : \"inverted\";\n      this.maskVotes[guess] += 1;\n      if (this.maskVotes[guess] >= APP_CONFIG.virtualBackground.maskAutoConfirmFrames) {\n        this.resolvedMaskMode = guess;\n        Logger.user(`VB mask mode auto-selected: ${guess}`);\n        return this.resolvedMaskMode;\n      }\n      return guess;\n    }\n\n    if (this.maskProbeFrames >= APP_CONFIG.virtualBackground.maskAutoProbeFrames) {\n      this.resolvedMaskMode = this.maskVotes.inverted > this.maskVotes.normal ? \"inverted\" : \"normal\";\n      Logger.user(`VB mask mode auto-fallback: ${this.resolvedMaskMode}`);\n      return this.resolvedMaskMode;\n    }\n\n    return this.maskVotes.inverted > this.maskVotes.normal ? \"inverted\" : \"normal\";\n  }\n\n  private sampleMaskSignal(\n    rgba: Uint8ClampedArray,\n    points: Array<[number, number]>,\n    w: number,\n    h: number\n  ): { alpha: number; luma: number } {\n    if (!points.length) return { alpha: 0, luma: 0 };\n    let alphaSum = 0;\n    let lumaSum = 0;\n    points.forEach(([nx, ny]) => {\n      const x = Math.max(0, Math.min(w - 1, Math.floor(nx * w)));\n      const y = Math.max(0, Math.min(h - 1, Math.floor(ny * h)));\n      const i = (y * w + x) * 4;\n      const r = rgba[i];\n      const g = rgba[i + 1];\n      const b = rgba[i + 2];\n      const a = rgba[i + 3];\n      alphaSum += a;\n      lumaSum += (r + g + b) / 3;\n    });\n    return {\n      alpha: alphaSum / points.length,\n      luma: lumaSum / points.length\n    };\n  }\n}\n","class ScreenShareManager {\n  private stream: MediaStream | null = null;\n\n  async start(): Promise<MediaStream>{\n\n    // Get screen share stream\n    const stream = await navigator.mediaDevices.getDisplayMedia({\n      video: true\n    });\n\n    // Get audio stream\n    const mic = await navigator.mediaDevices.getUserMedia({\n       audio: true\n    });\n\n    // combine streams\n    mic.getAudioTracks().forEach(track =>\n      stream.addTrack(track)\n    );\n\n    this.stream = stream;\n\n    return this.stream;\n  }\n\n  stop(){\n    if(this.stream){\n      this.stream.getTracks().forEach(t=>t.stop());\n      this.stream = null;\n    }\n  }\n\n  getStream(): MediaStream | null {\n    return this.stream;\n  }\n}\n","type NetQuality = \"High\"|\"Medium\"|\"Low\";\ntype NetworkPeerSnapshot = {\n  publisher: RTCPeerConnection | null;\n  subscribers: RTCPeerConnection[];\n};\ntype NetworkPeerProvider = () => NetworkPeerSnapshot;\ntype PeerMetrics = {\n  rttMs: number;\n  jitterMs: number;\n  lossPct: number;\n  bitrateKbps: number;\n};\n\nclass NetworkQualityManager {\n  private timer:number|null=null;\n  private previousBytes = new Map<string, { bytes: number; at: number }>();\n  private sampleBusy = false;\n\n  start(\n    cb:(local:NetQuality, remote:NetQuality, details:string)=>void,\n    peersProvider?: NetworkPeerProvider\n  ){\n    this.stop();\n    const sample = async () => {\n      if (this.sampleBusy) return;\n      this.sampleBusy = true;\n      try {\n        const peers = peersProvider?.() ?? { publisher: null, subscribers: [] };\n        const hasPeers = !!peers.publisher || peers.subscribers.length > 0;\n        if (hasPeers) {\n          const localMetrics = peers.publisher\n            ? await this.collectPeerMetrics(\"publisher\", peers.publisher)\n            : null;\n          const remoteMetricsList = await Promise.all(\n            peers.subscribers.map((pc, i) => this.collectPeerMetrics(`subscriber-${i}`, pc))\n          );\n          const remoteMetrics = this.mergePeerMetrics(remoteMetricsList);\n\n          const local = localMetrics\n            ? this.calc(localMetrics.rttMs, localMetrics.jitterMs, localMetrics.lossPct, localMetrics.bitrateKbps)\n            : \"Low\";\n          const remote = remoteMetrics\n            ? this.calc(remoteMetrics.rttMs, remoteMetrics.jitterMs, remoteMetrics.lossPct, remoteMetrics.bitrateKbps)\n            : \"Low\";\n\n          const details = [\n            \"src=webrtc-stats\",\n            localMetrics\n              ? `local(rtt=${Math.round(localMetrics.rttMs)}ms jitter=${Math.round(localMetrics.jitterMs)}ms loss=${localMetrics.lossPct.toFixed(1)}% bitrate=${Math.round(localMetrics.bitrateKbps)}kbps)`\n              : \"local(n/a)\",\n            remoteMetrics\n              ? `remote(rtt=${Math.round(remoteMetrics.rttMs)}ms jitter=${Math.round(remoteMetrics.jitterMs)}ms loss=${remoteMetrics.lossPct.toFixed(1)}% bitrate=${Math.round(remoteMetrics.bitrateKbps)}kbps)`\n              : \"remote(n/a)\"\n          ].join(\" \");\n          cb(local, remote, details);\n          return;\n        }\n\n        if (APP_CONFIG.networkQuality.useSimulatedFallback) {\n          const sim = this.sampleSimulatedMetrics();\n          const q = this.calc(sim.rttMs, sim.jitterMs, sim.lossPct, sim.bitrateKbps);\n          cb(q, q, `[simulated] rtt=${Math.round(sim.rttMs)}ms jitter=${Math.round(sim.jitterMs)}ms loss=${sim.lossPct.toFixed(1)}% bitrate=${Math.round(sim.bitrateKbps)}kbps`);\n          return;\n        }\n\n        cb(\"Low\", \"Low\", \"src=webrtc-stats unavailable\");\n      } catch (e: any) {\n        Logger.error(\"[network-quality] stats sampling failed\", e);\n        cb(\"Low\", \"Low\", \"src=webrtc-stats error\");\n      } finally {\n        this.sampleBusy = false;\n      }\n    };\n\n    this.timer = window.setInterval(() => {\n      void sample();\n    }, APP_CONFIG.networkQuality.sampleIntervalMs);\n    void sample();\n  }\n\n  stop(){\n    if(this.timer!=null){\n      clearInterval(this.timer);\n      this.timer=null;\n    }\n    this.sampleBusy = false;\n    this.previousBytes.clear();\n  }\n\n  private calc(rtt:number,jitter:number,loss:number,bitrate:number):NetQuality{\n    let score=0;\n    if(rtt<APP_CONFIG.networkQuality.thresholds.rttGoodMs) score++;\n    if(jitter<APP_CONFIG.networkQuality.thresholds.jitterGoodMs) score++;\n    if(loss<APP_CONFIG.networkQuality.thresholds.lossGoodPct) score++;\n    if(bitrate>APP_CONFIG.networkQuality.thresholds.bitrateGoodKbps) score++;\n    if(score>=4) return \"High\";\n    if(score>=2) return \"Medium\";\n    return \"Low\";\n  }\n\n  private async collectPeerMetrics(key: string, pc: RTCPeerConnection): Promise<PeerMetrics> {\n    const report = await pc.getStats();\n    let rttMs = 0;\n    let jitterMs = 0;\n    let packetsTotal = 0;\n    let packetsLost = 0;\n    let bytesTotal = 0;\n\n    report.forEach((s: RTCStats) => {\n      const anyS = s as any;\n      if (s.type === \"candidate-pair\" && (anyS.selected || anyS.nominated) && typeof anyS.currentRoundTripTime === \"number\") {\n        rttMs = Math.max(rttMs, anyS.currentRoundTripTime * 1000);\n      }\n      const isMediaRtp = anyS.kind === \"video\" || anyS.mediaType === \"video\" || anyS.kind === \"audio\" || anyS.mediaType === \"audio\";\n      if (s.type === \"remote-inbound-rtp\" && isMediaRtp && typeof anyS.roundTripTime === \"number\") {\n        rttMs = Math.max(rttMs, anyS.roundTripTime * 1000);\n      }\n      if ((s.type === \"inbound-rtp\" || s.type === \"outbound-rtp\" || s.type === \"remote-inbound-rtp\") && isMediaRtp) {\n        if (typeof anyS.jitter === \"number\") {\n          jitterMs = Math.max(jitterMs, anyS.jitter * 1000);\n        }\n        const recv = typeof anyS.packetsReceived === \"number\" ? anyS.packetsReceived : 0;\n        const lost = typeof anyS.packetsLost === \"number\" ? anyS.packetsLost : 0;\n        packetsTotal += recv + lost;\n        packetsLost += lost;\n        const bytesReceived = typeof anyS.bytesReceived === \"number\" ? anyS.bytesReceived : 0;\n        const bytesSent = typeof anyS.bytesSent === \"number\" ? anyS.bytesSent : 0;\n        bytesTotal += bytesReceived + bytesSent;\n      }\n    });\n\n    const lossPct = packetsTotal > 0 ? (packetsLost / packetsTotal) * 100 : 0;\n    const bitrateKbps = this.computeBitrateKbps(key, bytesTotal);\n    return { rttMs, jitterMs, lossPct, bitrateKbps };\n  }\n\n  private mergePeerMetrics(metrics: PeerMetrics[]): PeerMetrics | null {\n    if (metrics.length === 0) return null;\n    const totals = metrics.reduce((acc, m) => {\n      acc.rttMs += m.rttMs;\n      acc.jitterMs += m.jitterMs;\n      acc.lossPct += m.lossPct;\n      acc.bitrateKbps += m.bitrateKbps;\n      return acc;\n    }, { rttMs: 0, jitterMs: 0, lossPct: 0, bitrateKbps: 0 });\n    const n = metrics.length;\n    return {\n      rttMs: totals.rttMs / n,\n      jitterMs: totals.jitterMs / n,\n      lossPct: totals.lossPct / n,\n      bitrateKbps: totals.bitrateKbps / n\n    };\n  }\n\n  private computeBitrateKbps(key: string, bytes: number): number {\n    const now = Date.now();\n    const prev = this.previousBytes.get(key);\n    this.previousBytes.set(key, { bytes, at: now });\n    if (!prev || now <= prev.at) return 0;\n    const deltaBytes = Math.max(0, bytes - prev.bytes);\n    const seconds = (now - prev.at) / 1000;\n    if (seconds <= 0) return 0;\n    return (deltaBytes * 8) / 1000 / seconds;\n  }\n\n  private sampleSimulatedMetrics(): PeerMetrics {\n    return {\n      rttMs: APP_CONFIG.networkQuality.simulated.rttBaseMs + Math.random() * APP_CONFIG.networkQuality.simulated.rttSpreadMs,\n      jitterMs: APP_CONFIG.networkQuality.simulated.jitterBaseMs + Math.random() * APP_CONFIG.networkQuality.simulated.jitterSpreadMs,\n      lossPct: Math.random() * APP_CONFIG.networkQuality.simulated.lossMaxPct,\n      bitrateKbps: APP_CONFIG.networkQuality.simulated.bitrateBaseKbps + Math.random() * APP_CONFIG.networkQuality.simulated.bitrateSpreadKbps\n    };\n  }\n}\n","class ConnectionStatusEngine {\n  private status: ConnectionStatusView = {\n    owner: \"SYSTEM\",\n    primaryText: \"\",\n    secondaryText: \"\",\n    severity: \"info\",\n    state: \"INIT\"\n  };\n\n  private joinedAt: number | null = null;\n  private joinStartedAt: number | null = null;\n  private remoteParticipantCount = 0;\n  private remoteParticipantSeenAt: number | null = null;\n  private remoteTrackSeenAt: number | null = null;\n  private remoteMediaFlowAt: number | null = null;\n  private checkingSince: number | null = null;\n  private localPoorSince: number | null = null;\n  private relayDetectedAt: number | null = null;\n  private candidateSwitchAt: number | null = null;\n  private disconnectedSince: number | null = null;\n  private remoteNegotiationReady = false;\n  private selectedPairId: string | null = null;\n  private remoteVideoTracksByFeed = new Map<number, Set<string>>();\n  private localVideoTrackIds = new Set<string>();\n\n  private publisherPc: RTCPeerConnection | null = null;\n  private subscriberPcs = new Map<number, RTCPeerConnection>();\n  private subscriberBytes = new Map<number, { bytes: number; growthAt: number | null }>();\n  private subscriberIceStates = new Map<number, RTCIceConnectionState>();\n  private subscriberConnStates = new Map<number, RTCPeerConnectionState>();\n\n  private localIceState: RTCIceConnectionState = \"new\";\n  private localConnState: RTCPeerConnectionState = \"new\";\n  private localSignalingState: RTCSignalingState = \"stable\";\n\n  private rotationCursor = 0;\n  private nextRotationAt = 0;\n  private tickTimer: number | null = null;\n  private statsBusy = false;\n  private lastStatsSampleAt = 0;\n  private lastPublishedKey = \"\";\n  private boundPcs = new WeakSet<RTCPeerConnection>();\n  private serverRetryAttempt = 0;\n  private serverRetryMax = 0;\n  private peerRetryAttempt = 0;\n  private peerRetryMax = 0;\n  private lastStatsErrorLogAt = 0;\n  private fatalError: { primary: string; secondary: string } | null = null;\n\n  constructor(private onUpdate?: (status: ConnectionStatusView) => void) {\n    this.transition(\"INIT\", true);\n    this.tickTimer = window.setInterval(() => this.tick(), APP_CONFIG.connectionStatus.tickIntervalMs);\n  }\n\n  getStatus(): ConnectionStatusView {\n    return this.status;\n  }\n\n  destroy() {\n    if (this.tickTimer !== null) {\n      window.clearInterval(this.tickTimer);\n      this.tickTimer = null;\n    }\n  }\n\n  onJoinStarted() {\n    this.joinStartedAt = Date.now();\n    this.joinedAt = null;\n    this.remoteParticipantCount = 0;\n    this.remoteParticipantSeenAt = null;\n    this.remoteTrackSeenAt = null;\n    this.remoteMediaFlowAt = null;\n    this.checkingSince = null;\n    this.localPoorSince = null;\n    this.relayDetectedAt = null;\n    this.candidateSwitchAt = null;\n    this.disconnectedSince = null;\n    this.remoteNegotiationReady = false;\n    this.selectedPairId = null;\n    this.subscriberPcs.clear();\n    this.subscriberBytes.clear();\n    this.subscriberIceStates.clear();\n    this.subscriberConnStates.clear();\n    this.remoteVideoTracksByFeed.clear();\n    this.localVideoTrackIds.clear();\n    this.serverRetryAttempt = 0;\n    this.serverRetryMax = 0;\n    this.peerRetryAttempt = 0;\n    this.peerRetryMax = 0;\n    this.publisherPc = null;\n    this.localIceState = \"new\";\n    this.localConnState = \"new\";\n    this.localSignalingState = \"stable\";\n    this.fatalError = null;\n    this.transition(\"MEDIA_PREP\", true);\n  }\n\n  onSessionReady() {\n    this.transition(\"NEGOTIATING\", true);\n  }\n\n  onPublisherAttached() {\n    this.transition(\"NEGOTIATING\", true);\n  }\n\n  onJoinedRoom() {\n    this.joinedAt = Date.now();\n    this.transition(\"NEGOTIATING\", true);\n  }\n\n  onReconnect() {\n    this.transition(\"RETRYING\", true);\n  }\n\n  onServerRetrying(attempt: number, maxAttempts: number) {\n    this.serverRetryAttempt = Math.max(0, attempt);\n    this.serverRetryMax = Math.max(0, maxAttempts);\n    this.transition(\"SERVER_RETRYING\", true);\n  }\n\n  onPeerRetrying(attempt: number, maxAttempts: number) {\n    this.peerRetryAttempt = Math.max(0, attempt);\n    this.peerRetryMax = Math.max(0, maxAttempts);\n    this.transition(\"PEER_RETRYING\", true);\n  }\n\n  onFailed() {\n    this.transition(\"FAILED\", true);\n  }\n\n  onLeft() {\n    this.fatalError = null;\n    this.joinStartedAt = null;\n    this.joinedAt = null;\n    this.remoteParticipantCount = 0;\n    this.remoteParticipantSeenAt = null;\n    this.remoteTrackSeenAt = null;\n    this.remoteMediaFlowAt = null;\n    this.checkingSince = null;\n    this.localPoorSince = null;\n    this.relayDetectedAt = null;\n    this.candidateSwitchAt = null;\n    this.disconnectedSince = null;\n    this.remoteNegotiationReady = false;\n    this.selectedPairId = null;\n    this.publisherPc = null;\n    this.subscriberPcs.clear();\n    this.subscriberBytes.clear();\n    this.subscriberIceStates.clear();\n    this.subscriberConnStates.clear();\n    this.remoteVideoTracksByFeed.clear();\n    this.localVideoTrackIds.clear();\n    this.localIceState = \"new\";\n    this.localConnState = \"new\";\n    this.localSignalingState = \"stable\";\n    this.serverRetryAttempt = 0;\n    this.serverRetryMax = 0;\n    this.peerRetryAttempt = 0;\n    this.peerRetryMax = 0;\n    this.transition(\"INIT\", true);\n  }\n\n  setFatalError(primary: string, secondary: string = \"\") {\n    this.fatalError = { primary, secondary };\n    this.publishFatalError();\n  }\n\n  setRemoteParticipantCount(count: number) {\n    const now = Date.now();\n    this.remoteParticipantCount = Math.max(0, count);\n    if (this.remoteParticipantCount > 0 && this.remoteParticipantSeenAt === null) {\n      this.remoteParticipantSeenAt = now;\n    }\n    if (this.remoteParticipantCount === 0) {\n      this.remoteParticipantSeenAt = null;\n      this.remoteTrackSeenAt = null;\n      this.remoteMediaFlowAt = null;\n      this.remoteNegotiationReady = false;\n      this.subscriberPcs.clear();\n      this.subscriberBytes.clear();\n      this.subscriberIceStates.clear();\n      this.subscriberConnStates.clear();\n      this.remoteVideoTracksByFeed.clear();\n    }\n    this.evaluate();\n  }\n\n  registerPublisherPc(pc: RTCPeerConnection) {\n    this.publisherPc = pc;\n    this.bindPcEvents(pc, \"publisher\");\n    this.evaluate();\n  }\n\n  registerSubscriberPc(feedId: number, pc: RTCPeerConnection) {\n    this.subscriberPcs.set(feedId, pc);\n    this.remoteNegotiationReady = true;\n    this.bindPcEvents(pc, \"subscriber\", feedId);\n    this.evaluate();\n  }\n\n  onSubscriberRequested() {\n    this.remoteNegotiationReady = true;\n    this.evaluate();\n  }\n\n  onRemoteFeedRetryExhausted(feedId: number, attempts: number) {\n    Logger.warn(`[connection-status] remote feed retry exhausted feedId=${feedId} attempts=${attempts}`);\n    this.transition(\"DEGRADED\", true);\n  }\n\n  unregisterSubscriber(feedId: number) {\n    this.subscriberPcs.delete(feedId);\n    this.subscriberBytes.delete(feedId);\n    this.subscriberIceStates.delete(feedId);\n    this.subscriberConnStates.delete(feedId);\n    this.remoteVideoTracksByFeed.delete(feedId);\n    if (!this.hasLiveRemoteVideoTrack()) {\n      this.remoteMediaFlowAt = null;\n    }\n    this.evaluate();\n  }\n\n  onRemoteTrackSignal(feedId: number, track: MediaStreamTrack, on: boolean) {\n    if (track.kind !== \"video\") return;\n    let tracks = this.remoteVideoTracksByFeed.get(feedId);\n    if (!tracks) {\n      tracks = new Set<string>();\n      this.remoteVideoTracksByFeed.set(feedId, tracks);\n    }\n\n    if (on) {\n      const now = Date.now();\n      this.remoteTrackSeenAt = now;\n      this.remoteNegotiationReady = true;\n      tracks.add(track.id);\n      if (!this.subscriberBytes.has(feedId)) {\n        this.subscriberBytes.set(feedId, { bytes: 0, growthAt: now });\n      }\n    } else {\n      tracks.delete(track.id);\n      if (tracks.size === 0) {\n        this.remoteVideoTracksByFeed.delete(feedId);\n      }\n      if (!this.hasLiveRemoteVideoTrack()) {\n        this.remoteMediaFlowAt = null;\n      }\n    }\n    this.evaluate();\n  }\n\n  onLocalTrackSignal(track: MediaStreamTrack, on: boolean) {\n    if (track.kind !== \"video\") return;\n    if (on) {\n      this.localVideoTrackIds.add(track.id);\n    } else {\n      this.localVideoTrackIds.delete(track.id);\n    }\n    this.evaluate();\n  }\n\n  private hasLiveRemoteVideoTrack(): boolean {\n    for (const tracks of this.remoteVideoTracksByFeed.values()) {\n      if (tracks.size > 0) return true;\n    }\n    return false;\n  }\n\n  onSessionDestroyed() {\n    this.transition(\"RETRYING\", true);\n  }\n\n  private bindPcEvents(pc: RTCPeerConnection, role: \"publisher\" | \"subscriber\", feedId?: number) {\n    if (this.boundPcs.has(pc)) return;\n    this.boundPcs.add(pc);\n\n    pc.addEventListener(\"iceconnectionstatechange\", () => {\n      if (role === \"publisher\" && this.publisherPc === pc) {\n        this.localIceState = pc.iceConnectionState;\n        if (pc.iceConnectionState === \"checking\") {\n          if (this.checkingSince === null) this.checkingSince = Date.now();\n        } else {\n          this.checkingSince = null;\n        }\n      }\n      if (role === \"subscriber\" && typeof feedId === \"number\") {\n        this.subscriberIceStates.set(feedId, pc.iceConnectionState);\n      }\n      this.evaluate();\n    });\n\n    pc.addEventListener(\"connectionstatechange\", () => {\n      if (role === \"publisher\" && this.publisherPc === pc) {\n        this.localConnState = (pc.connectionState || \"new\") as RTCPeerConnectionState;\n      }\n      if (role === \"subscriber\" && typeof feedId === \"number\") {\n        this.subscriberConnStates.set(feedId, (pc.connectionState || \"new\") as RTCPeerConnectionState);\n        this.remoteNegotiationReady = true;\n      }\n      this.evaluate();\n    });\n\n    pc.addEventListener(\"signalingstatechange\", () => {\n      if (role === \"publisher\" && this.publisherPc === pc) {\n        this.localSignalingState = pc.signalingState;\n      }\n      this.evaluate();\n    });\n  }\n\n  private tick() {\n    this.sampleStats();\n    this.evaluate();\n    this.maybeRotate();\n  }\n\n  private async sampleStats() {\n    if (this.statsBusy) return;\n    const now = Date.now();\n    const intervalMs = this.status.state === \"CONNECTED\"\n      ? APP_CONFIG.connectionStatus.statsIntervalConnectedMs\n      : APP_CONFIG.connectionStatus.statsIntervalConnectingMs;\n    if (now - this.lastStatsSampleAt < intervalMs) return;\n\n    this.statsBusy = true;\n    this.lastStatsSampleAt = now;\n    try {\n      const jobs: Promise<void>[] = [];\n      if (this.publisherPc) {\n        jobs.push(\n          this.publisherPc.getStats()\n            .then((report: RTCStatsReport) => this.consumePublisherStats(report))\n            .catch((e: any) => this.logStatsError(\"publisher getStats failed\", e))\n        );\n      }\n      for (const [feedId, pc] of this.subscriberPcs.entries()) {\n        jobs.push(\n          pc.getStats()\n            .then((report: RTCStatsReport) => this.consumeSubscriberStats(feedId, report))\n            .catch((e: any) => this.logStatsError(`subscriber getStats failed (feedId=${feedId})`, e))\n        );\n      }\n      await Promise.all(jobs);\n    } catch (e: any) {\n      this.logStatsError(\"sampleStats failed\", e);\n    }\n    this.statsBusy = false;\n  }\n\n  private consumePublisherStats(report: RTCStatsReport) {\n    const now = Date.now();\n    const byId = new Map<string, RTCStats>();\n    report.forEach((s: RTCStats) => byId.set(s.id, s));\n\n    let selectedPairId: string | null = null;\n    let rttMs = 0;\n    let highLoss = false;\n    let relayInUse = false;\n\n    report.forEach((s: RTCStats) => {\n      const anyS = s as any;\n      if (s.type === \"transport\" && typeof anyS.selectedCandidatePairId === \"string\") {\n        selectedPairId = anyS.selectedCandidatePairId;\n      }\n      if (s.type === \"candidate-pair\") {\n        const isSelected = !!anyS.selected || !!anyS.nominated;\n        if (!selectedPairId && isSelected) selectedPairId = s.id;\n        if (selectedPairId === s.id && typeof anyS.currentRoundTripTime === \"number\") {\n          rttMs = Math.max(rttMs, anyS.currentRoundTripTime * 1000);\n        }\n      }\n      if (s.type === \"remote-inbound-rtp\" && (anyS.kind === \"video\" || anyS.mediaType === \"video\")) {\n        const fractionLost = typeof anyS.fractionLost === \"number\" ? anyS.fractionLost : 0;\n        if (fractionLost >= APP_CONFIG.connectionStatus.highPacketLossThreshold) highLoss = true;\n      }\n      if (s.type === \"inbound-rtp\" && (anyS.kind === \"video\" || anyS.mediaType === \"video\")) {\n        const packetsReceived = typeof anyS.packetsReceived === \"number\" ? anyS.packetsReceived : 0;\n        const packetsLost = typeof anyS.packetsLost === \"number\" ? anyS.packetsLost : 0;\n        const total = packetsReceived + packetsLost;\n        if (\n          total > APP_CONFIG.connectionStatus.packetLossMinPackets &&\n          packetsLost / total >= APP_CONFIG.connectionStatus.highPacketLossThreshold\n        ) highLoss = true;\n      }\n    });\n\n    if (selectedPairId) {\n      if (this.selectedPairId && this.selectedPairId !== selectedPairId) {\n        this.candidateSwitchAt = now;\n      }\n      this.selectedPairId = selectedPairId;\n\n      const pair = byId.get(selectedPairId) as any;\n      if (pair) {\n        const local = byId.get(pair.localCandidateId) as any;\n        const remote = byId.get(pair.remoteCandidateId) as any;\n        relayInUse = local?.candidateType === \"relay\" || remote?.candidateType === \"relay\";\n      }\n    }\n\n    if (relayInUse) {\n      if (this.relayDetectedAt === null) this.relayDetectedAt = now;\n    } else {\n      this.relayDetectedAt = null;\n    }\n\n    const highRtt = rttMs >= APP_CONFIG.connectionStatus.highRttMs;\n    if (highRtt || highLoss) {\n      if (this.localPoorSince === null) this.localPoorSince = now;\n    } else {\n      this.localPoorSince = null;\n    }\n  }\n\n  private consumeSubscriberStats(feedId: number, report: RTCStatsReport) {\n    const now = Date.now();\n    let bytes = 0;\n\n    report.forEach((s: RTCStats) => {\n      const anyS = s as any;\n      if (s.type === \"inbound-rtp\" && (anyS.kind === \"video\" || anyS.mediaType === \"video\") && typeof anyS.bytesReceived === \"number\") {\n        bytes += anyS.bytesReceived;\n      }\n    });\n\n    const prev = this.subscriberBytes.get(feedId) || { bytes: 0, growthAt: null };\n    if (bytes > prev.bytes + APP_CONFIG.connectionStatus.bytesGrowthThreshold) {\n      prev.growthAt = now;\n      this.remoteMediaFlowAt = now;\n    }\n    prev.bytes = bytes;\n    this.subscriberBytes.set(feedId, prev);\n  }\n\n  private evaluate() {\n    if (this.fatalError) {\n      this.publishFatalError();\n      return;\n    }\n\n    if (this.status.state === \"SERVER_RETRYING\" || this.status.state === \"PEER_RETRYING\") {\n      return;\n    }\n\n    const now = Date.now();\n    const liveRemoteVideo = this.hasLiveRemoteVideoTrack();\n    const hasRemote = this.remoteParticipantCount > 0 || liveRemoteVideo;\n    const localConnected = this.localIceState === \"connected\" || this.localIceState === \"completed\";\n    const remoteConnected = Array.from(this.subscriberIceStates.values()).some(s => s === \"connected\" || s === \"completed\");\n    const connectedIce = localConnected || remoteConnected;\n    const mediaFlowing = this.remoteMediaFlowAt !== null && now - this.remoteMediaFlowAt <= APP_CONFIG.connectionStatus.mediaFlowRecentMs;\n    const hasLocalVideo = this.localVideoTrackIds.size > 0;\n\n    const anyFailed =\n      this.localIceState === \"failed\" ||\n      this.localConnState === \"failed\" ||\n      Array.from(this.subscriberIceStates.values()).some(s => s === \"failed\") ||\n      Array.from(this.subscriberConnStates.values()).some(s => s === \"failed\");\n\n    if (anyFailed) {\n      this.transition(\"FAILED\");\n      return;\n    }\n\n    const anyDisconnected =\n      this.localConnState === \"disconnected\" ||\n      Array.from(this.subscriberConnStates.values()).some(s => s === \"disconnected\");\n\n    if (anyDisconnected) {\n      if (this.disconnectedSince === null) this.disconnectedSince = now;\n      this.transition(\"DEGRADED\");\n      return;\n    }\n    this.disconnectedSince = null;\n\n    if (hasRemote && !hasLocalVideo) {\n      this.transition(\"NEGOTIATING\");\n      return;\n    }\n\n    // Connected means both sides are exchanging media:\n    // local video ready + remote video track is live, with stats flow when available.\n    // Some environments do not expose stable inbound byte growth every sample,\n    // so we accept recent remote track signal as a bounded fallback.\n    const remoteTrackRecent =\n      this.remoteTrackSeenAt !== null &&\n      now - this.remoteTrackSeenAt <= APP_CONFIG.connectionStatus.mediaFlowRecentMs;\n    const remoteMediaLive = liveRemoteVideo && (mediaFlowing || remoteTrackRecent);\n    const transportReady = connectedIce || this.remoteNegotiationReady;\n    if (hasRemote && hasLocalVideo && remoteMediaLive && transportReady) {\n      this.transition(\"CONNECTED\");\n      return;\n    }\n\n    const relayRecent =\n      this.relayDetectedAt !== null &&\n      now - this.relayDetectedAt <= APP_CONFIG.connectionStatus.relayRecentMs;\n    const candidateSwitchRecent =\n      this.candidateSwitchAt !== null &&\n      now - this.candidateSwitchAt <= APP_CONFIG.connectionStatus.candidateSwitchRecentMs;\n\n    // LOCAL_SLOW rule set:\n    // 1) ICE checking for >12s\n    // 2) high RTT or packet loss from RTCPeerConnection stats\n    // 3) relay-only path detected early in call setup\n    const localSlowByChecking =\n      this.checkingSince !== null &&\n      now - this.checkingSince > APP_CONFIG.connectionStatus.localSlowCheckingMs;\n    const localSlowByStats =\n      this.localPoorSince !== null &&\n      now - this.localPoorSince > APP_CONFIG.connectionStatus.localSlowStatsMs;\n    const localSlowByRelayEarly =\n      this.relayDetectedAt !== null &&\n      this.joinStartedAt !== null &&\n      now - this.joinStartedAt <= APP_CONFIG.connectionStatus.relayEarlyJoinWindowMs &&\n      now - this.relayDetectedAt > APP_CONFIG.connectionStatus.relayEarlyThresholdMs &&\n      !connectedIce;\n\n    if (localSlowByChecking || localSlowByStats || localSlowByRelayEarly) {\n      this.transition(\"LOCAL_SLOW\");\n      return;\n    }\n\n    // REMOTE_SLOW rule set:\n    // remote participant exists and negotiation started, but no remote video track\n    // or bytesReceived stays near zero for >10s.\n    const remoteWaitAnchor = this.remoteParticipantSeenAt ?? this.joinedAt;\n    const remoteWaitingTooLong =\n      remoteWaitAnchor !== null &&\n      now - remoteWaitAnchor > APP_CONFIG.connectionStatus.remoteSlowWaitMs;\n    const remoteFlowStalled = hasRemote && this.remoteNegotiationReady && !liveRemoteVideo && remoteWaitingTooLong;\n    if (remoteFlowStalled) {\n      this.transition(\"REMOTE_SLOW\");\n      return;\n    }\n\n    // OPTIMIZING rule set:\n    // relay usage or candidate switches indicate active path optimization.\n    if (relayRecent || candidateSwitchRecent) {\n      this.transition(\"OPTIMIZING\");\n      return;\n    }\n\n    if (!hasRemote) {\n      this.transition(this.joinedAt && hasLocalVideo ? \"WAITING_REMOTE\" : \"NEGOTIATING\");\n      return;\n    }\n\n    if (!connectedIce) {\n      this.transition(\"NETWORK_CHECK\");\n      return;\n    }\n\n    if (this.localSignalingState !== \"stable\") {\n      this.transition(\"NEGOTIATING\");\n      return;\n    }\n\n    this.transition(\"NEGOTIATING\");\n  }\n\n  private maybeRotate() {\n    const cfg = CONNECTION_MESSAGES[this.status.state];\n    if (!cfg.rotate) return;\n    const now = Date.now();\n    if (now < this.nextRotationAt) return;\n    this.rotationCursor++;\n    this.publishCurrent(true);\n  }\n\n  private transition(next: ConnectionProductState, forcePublish: boolean = false) {\n    if (this.status.state !== next) {\n      this.status.state = next;\n      this.rotationCursor = 0;\n      this.publishCurrent(true);\n      return;\n    }\n\n    if (forcePublish) {\n      this.publishCurrent(true);\n    }\n  }\n\n  private publishCurrent(force: boolean = false) {\n    const cfg = CONNECTION_MESSAGES[this.status.state];\n    const p = cfg.primary;\n    const s = cfg.secondary;\n    const primary = p[this.rotationCursor % p.length] || \"\";\n    const secondary = s[this.rotationCursor % s.length] || \"\";\n    const nextStatus: ConnectionStatusView = {\n      owner: cfg.owner,\n      severity: cfg.severity,\n      primaryText: primary,\n      secondaryText: secondary,\n      state: this.status.state\n    };\n\n    if (nextStatus.state === \"SERVER_RETRYING\" && this.serverRetryMax > 0) {\n      nextStatus.secondaryText = `Retry ${this.serverRetryAttempt}/${this.serverRetryMax}. Reconnecting to video server.`;\n    }\n    if (nextStatus.state === \"PEER_RETRYING\" && this.peerRetryMax > 0) {\n      nextStatus.secondaryText = `Retry ${this.peerRetryAttempt}/${this.peerRetryMax}. Recovering TURN/peer connection.`;\n    }\n\n    if (cfg.rotate) {\n      const span = CONNECTION_ROTATION_MAX_MS - CONNECTION_ROTATION_MIN_MS;\n      this.nextRotationAt = Date.now() + CONNECTION_ROTATION_MIN_MS + Math.floor(Math.random() * (span + 1));\n    } else {\n      this.nextRotationAt = Number.MAX_SAFE_INTEGER;\n    }\n\n    const key = `${nextStatus.state}|${nextStatus.owner}|${nextStatus.primaryText}|${nextStatus.secondaryText}`;\n    if (!force && this.lastPublishedKey === key) return;\n\n    this.status = nextStatus;\n    if (this.lastPublishedKey !== key) {\n      this.logOwnership(nextStatus);\n      this.lastPublishedKey = key;\n    }\n    this.onUpdate?.(nextStatus);\n  }\n\n  private logOwnership(status: ConnectionStatusView) {\n    const prefix = status.owner === \"LOCAL\"\n      ? \"User\"\n      : status.owner === \"REMOTE\"\n        ? \"Remote\"\n        : \"System\";\n    const msg = status.secondaryText\n      ? `${status.primaryText} ${status.secondaryText}`\n      : status.primaryText;\n    console.log(`${prefix}: ${msg}`);\n  }\n\n  private publishFatalError() {\n    if (!this.fatalError) return;\n    const nextStatus: ConnectionStatusView = {\n      owner: \"SYSTEM\",\n      severity: \"error\",\n      primaryText: this.fatalError.primary,\n      secondaryText: this.fatalError.secondary,\n      state: \"FAILED\"\n    };\n    const key = `${nextStatus.state}|${nextStatus.owner}|${nextStatus.primaryText}|${nextStatus.secondaryText}`;\n    this.status = nextStatus;\n    if (this.lastPublishedKey !== key) {\n      this.logOwnership(nextStatus);\n      this.lastPublishedKey = key;\n    }\n    this.onUpdate?.(nextStatus);\n  }\n\n  private logStatsError(message: string, err?: unknown) {\n    const now = Date.now();\n    if (now - this.lastStatsErrorLogAt < 5000) return;\n    this.lastStatsErrorLogAt = now;\n    Logger.error(`[connection-status] ${message}`, err);\n  }\n}\n","class JanusGateway {\n  private janus: any = null;\n  private publisher: any = null;\n  private opaqueId = \"videocx-ui-\" + Janus.randomString(12);\n\n  constructor() {}\n\n  init() {\n    Janus.init({\n      debug: APP_CONFIG.janus.initDebug,\n      callback: () => {\n        Logger.setStatus(\"Janus initialized\");\n        Logger.user(\"Janus.init done\");\n      }\n    });\n  }\n\n  /**\n   * Creates Janus session.\n   * IMPORTANT: pass iceServers from IMS payload.PC_CONFIG.iceServers\n   */\n  createSession(\n    server: string,\n    iceServers: RTCIceServer[] | undefined,\n    ok: () => void,\n    destroyed: () => void,\n    onError?: (e: any) => void\n  ) {\n    Logger.setStatus(\"Creating Janus session...\");\n    Logger.user(`Creating Janus session: ${server}`);\n\n    this.janus = new Janus({\n      server,\n\n      //  TURN/STUN config (from IMS)\n      // Janus will use these ICE servers for the underlying RTCPeerConnection(s)\n      iceServers: iceServers ?? [],\n\n      success: ok,\n      error: (e: any) => {\n        Logger.setStatus(\"Janus error: \" + JSON.stringify(e));\n        Logger.error(\"Janus session create error: \" + JSON.stringify(e));\n        onError?.(e);\n      },\n      destroyed: () => {\n        Logger.user(\"Janus session destroyed\");\n        destroyed();\n      }\n    });\n  }\n\n  attachPublisher(\n    onAttached: (h: any) => void,\n    onMessage: (msg: any, jsep: any) => void,\n    onLocalTrack: (track: MediaStreamTrack, on: boolean) => void,\n    onCleanup: () => void,\n    onError?: (e: any) => void\n  ) {\n    if (!this.janus) {\n      Logger.setStatus(\"Janus not ready\");\n      Logger.user(\"attachPublisher called but Janus session is null\");\n      onError?.(new Error(\"Janus not ready\"));\n      return;\n    }\n\n    Logger.user(\"Attaching videoroom publisher plugin...\");\n\n    this.janus.attach({\n      plugin: \"janus.plugin.videoroom\",\n      opaqueId: this.opaqueId,\n      success: (h: any) => {\n        this.publisher = h;\n        Logger.user(`Publisher plugin attached. handleId=${h.getId?.() ?? \"?\"}`);\n        onAttached(h);\n      },\n      error: (e: any) => {\n        Logger.setStatus(\"Attach error: \" + JSON.stringify(e));\n        Logger.error(\"Attach error: \" + JSON.stringify(e));\n        onError?.(e);\n      },\n      onmessage: (msg: any, jsep: any) => {\n        onMessage(msg, jsep);\n      },\n      onlocaltrack: (track: MediaStreamTrack, on: boolean) => {\n        onLocalTrack(track, on);\n      },\n      oncleanup: () => {\n        Logger.user(\"Publisher plugin cleanup\");\n        onCleanup();\n      }\n    });\n  }\n\n  getJanus() {\n    return this.janus;\n  }\n\n  getOpaqueId() {\n    return this.opaqueId;\n  }\n\n  destroy() {\n    Logger.user(\"Destroying Janus session + publisher...\");\n\n    try {\n      this.publisher?.detach?.();\n    } catch (e: any) {\n      Logger.error(\"Publisher detach failed during destroy\", e);\n    }\n\n    this.publisher = null;\n\n    try {\n      this.janus?.destroy?.();\n    } catch (e: any) {\n      Logger.error(\"Janus destroy failed\", e);\n    }\n\n    this.janus = null;\n  }\n}\n","class RemoteFeedManager {\n  private feeds = new Map<number, any>();\n  private feedTracks = new Map<number, Map<string, MediaStreamTrack>>();\n  private pendingFeedAttach = new Set<number>();\n  private pendingAttachTimers = new Map<number, number>();\n  private feedStartTimers = new Map<number, number>();\n  private retryTimers = new Map<number, number>();\n  private retryAttempts = new Map<number, number>();\n  private retryBlockedUntil = new Map<number, number>();\n\n  constructor(\n    private janus:any,\n    private roomId:number,\n    private privateId:number,\n    private opaqueId:string,\n    private media:MediaManager,\n    private remoteVideo:HTMLVideoElement,\n    private observer?: RemoteFeedObserver\n  ){}\n\n  private clearAttachTimer(feedId: number){\n    const t = this.pendingAttachTimers.get(feedId);\n    if(t !== undefined){\n      window.clearTimeout(t);\n      this.pendingAttachTimers.delete(feedId);\n    }\n  }\n\n  private clearFeedStartTimer(feedId: number){\n    const t = this.feedStartTimers.get(feedId);\n    if(t !== undefined){\n      window.clearTimeout(t);\n      this.feedStartTimers.delete(feedId);\n    }\n  }\n\n  private clearRetryTimer(feedId: number){\n    const t = this.retryTimers.get(feedId);\n    if(t !== undefined){\n      window.clearTimeout(t);\n      this.retryTimers.delete(feedId);\n    }\n  }\n\n  private resetRetryState(feedId: number){\n    this.retryAttempts.delete(feedId);\n    this.retryBlockedUntil.delete(feedId);\n  }\n\n  private scheduleReattach(feedId:number, reason:string){\n    if(this.retryTimers.has(feedId)) return;\n    const now = Date.now();\n    const blockedUntil = this.retryBlockedUntil.get(feedId) ?? 0;\n    if(blockedUntil > now){\n      Logger.warn(`Remote feed ${feedId} retry blocked until ${new Date(blockedUntil).toISOString()}`);\n      return;\n    }\n\n    const maxAttempts = APP_CONFIG.call.remoteFeedRetryMaxAttempts;\n    const attempt = (this.retryAttempts.get(feedId) ?? 0) + 1;\n    this.retryAttempts.set(feedId, attempt);\n    if(attempt > maxAttempts){\n      const cooldownUntil = now + APP_CONFIG.call.remoteFeedRetryCooldownMs;\n      this.retryAttempts.set(feedId, 0);\n      this.retryBlockedUntil.set(feedId, cooldownUntil);\n      Logger.error(`Remote feed ${feedId} retries exhausted after ${maxAttempts} attempts. Cooldown started. reason=${reason}`);\n      this.observer?.onRemoteFeedRetryExhausted?.(feedId, maxAttempts);\n      return;\n    }\n\n    const baseDelayMs = APP_CONFIG.call.remoteFeedRetryDelayMs;\n    const maxDelayMs = APP_CONFIG.call.remoteFeedRetryMaxDelayMs;\n    const jitterMaxMs = APP_CONFIG.call.remoteFeedRetryJitterMs;\n    const backoffDelay = Math.min(maxDelayMs, baseDelayMs * Math.pow(2, Math.max(0, attempt - 1)));\n    const jitter = Math.floor(Math.random() * Math.max(1, jitterMaxMs));\n    const delayMs = backoffDelay + jitter;\n    Logger.warn(`Remote feed ${feedId} retry scheduled (${attempt}/${maxAttempts}, delay=${delayMs}ms): ${reason}`);\n    const t = window.setTimeout(()=>{\n      this.retryTimers.delete(feedId);\n      this.addFeed(feedId);\n    }, delayMs);\n    this.retryTimers.set(feedId, t);\n  }\n\n  addFeed(feedId:number){\n    if(this.feeds.has(feedId) || this.pendingFeedAttach.has(feedId)) return;\n    const blockedUntil = this.retryBlockedUntil.get(feedId) ?? 0;\n    if(blockedUntil > Date.now()){\n      Logger.warn(`Remote feed ${feedId} add skipped during cooldown`);\n      return;\n    }\n    if(blockedUntil !== 0){\n      this.retryBlockedUntil.delete(feedId);\n    }\n    if(!this.janus){\n      Logger.error(`Remote feed ${feedId} attach skipped: Janus session not ready`);\n      return;\n    }\n    this.clearRetryTimer(feedId);\n    this.pendingFeedAttach.add(feedId);\n    this.clearAttachTimer(feedId);\n    const attachTimer = window.setTimeout(()=>{\n      if(!this.pendingFeedAttach.has(feedId)) return;\n      this.pendingFeedAttach.delete(feedId);\n      this.clearAttachTimer(feedId);\n      Logger.error(`Remote feed ${feedId} attach timed out`);\n      this.scheduleReattach(feedId, \"attach timeout\");\n    }, APP_CONFIG.call.remoteFeedAttachTimeoutMs);\n    this.pendingAttachTimers.set(feedId, attachTimer);\n\n    let remoteHandle:any = null;\n\n    this.janus.attach({\n      plugin:\"janus.plugin.videoroom\",\n      opaqueId:this.opaqueId,\n      success:(h:any)=>{\n        remoteHandle=h;\n        this.pendingFeedAttach.delete(feedId);\n        this.clearAttachTimer(feedId);\n        this.feeds.set(feedId,h);\n        this.resetRetryState(feedId);\n        this.clearFeedStartTimer(feedId);\n        const startTimer = window.setTimeout(()=>{\n          if(!this.feeds.has(feedId)) return;\n          Logger.error(`Remote feed ${feedId} did not start media in time`);\n          this.removeFeed(feedId, true, true);\n        }, APP_CONFIG.call.remoteFeedStartTimeoutMs);\n        this.feedStartTimers.set(feedId, startTimer);\n        h.send({ message:{ request:\"join\", room:this.roomId, ptype:\"subscriber\", feed:feedId, private_id:this.privateId }});\n      },\n      error:(e:any)=>{\n        this.pendingFeedAttach.delete(feedId);\n        this.clearAttachTimer(feedId);\n        Logger.error(\"Remote attach error: \"+JSON.stringify(e));\n        this.scheduleReattach(feedId, `attach error: ${JSON.stringify(e)}`);\n      },\n      onmessage:(msg:any,jsep:any)=>{\n        const data = msg?.plugindata?.data;\n        if(data?.error || data?.error_code){\n          Logger.error(`Remote feed ${feedId} plugin error: ${JSON.stringify(data)}`);\n        }\n        if(msg?.janus === \"hangup\"){\n          Logger.error(`Remote feed ${feedId} hangup: ${msg?.reason || \"unknown\"}`);\n          this.removeFeed(feedId, true, true);\n          return;\n        }\n        if(jsep){\n          this.clearFeedStartTimer(feedId);\n          // TODO: If Janus internals change and webrtcStuff.pc is unavailable, pass the subscriber PC from a Janus plugin callback here.\n          const pc = remoteHandle?.webrtcStuff?.pc as RTCPeerConnection | undefined;\n          if(pc){\n            this.observer?.onSubscriberPcReady?.(feedId, pc);\n          }\n          const answerTracks = [\n            {type:\"audio\",capture:false,recv:true},\n            {type:\"video\",capture:false,recv:true}\n          ];\n          if (APP_CONFIG.mediaTelemetry.enablePeerTelemetry) {\n            answerTracks.push({type:\"data\"} as any);\n          }\n          remoteHandle.createAnswer({\n            jsep,\n            tracks: answerTracks,\n            success:(ans:any)=>remoteHandle.send({ message:{ request:\"start\", room:this.roomId }, jsep:ans }),\n            error:(e:any)=>{\n              Logger.error(\"Remote answer error: \"+JSON.stringify(e));\n              this.removeFeed(feedId, true, true);\n            }\n          });\n        }\n      },\n      ondata: (payload: any) => {\n        if (!payload || typeof payload !== \"string\") return;\n        try {\n          const parsed = JSON.parse(payload);\n          if (parsed?.type !== \"vcx-peer-telemetry\") return;\n          this.observer?.onRemoteTelemetry?.(feedId, parsed as PeerPlaybackTelemetry);\n        } catch (e: any) {\n          Logger.error(`Remote feed ${feedId} telemetry parse failed`, e);\n        }\n      },\n      onlocaltrack:()=>{},\n      onremotetrack:(track:MediaStreamTrack,_mid:string,on:boolean)=>{\n        this.observer?.onRemoteTrackSignal?.(feedId, track, on);\n        if(on){\n          this.resetRetryState(feedId);\n          this.clearFeedStartTimer(feedId);\n        }\n        let byId = this.feedTracks.get(feedId);\n        if(!byId){\n          byId = new Map<string, MediaStreamTrack>();\n          this.feedTracks.set(feedId, byId);\n        }\n\n        if(!on){\n          const prev = byId.get(track.id);\n          if(prev){\n            this.media.removeRemoteTrack(this.remoteVideo, prev);\n            byId.delete(track.id);\n          } else {\n            this.media.removeRemoteTrack(this.remoteVideo, track);\n          }\n          return;\n        }\n\n        const existingSameKind = Array.from(byId.values()).find(t => t.kind === track.kind && t.id !== track.id);\n        if(existingSameKind){\n          this.media.removeRemoteTrack(this.remoteVideo, existingSameKind);\n          byId.delete(existingSameKind.id);\n        }\n\n        byId.set(track.id, track);\n        this.media.setRemoteTrack(this.remoteVideo, track);\n      },\n      oncleanup:()=>{\n        this.clearFeedStartTimer(feedId);\n        this.removeFeed(feedId, false, true);\n      }\n    });\n  }\n\n  removeFeed(id:number, detach:boolean = true, notify:boolean = true){\n    this.pendingFeedAttach.delete(id);\n    this.clearAttachTimer(id);\n    this.clearFeedStartTimer(id);\n    this.clearRetryTimer(id);\n    let removed = false;\n    const h = this.feeds.get(id);\n    if(h){\n      if(detach){\n        try{h.detach();}catch(e:any){\n          Logger.error(`Remote feed ${id} detach failed`, e);\n        }\n      }\n      this.feeds.delete(id);\n      removed = true;\n    }\n\n    const tracks = this.feedTracks.get(id);\n    if(tracks){\n      tracks.forEach(t => this.media.removeRemoteTrack(this.remoteVideo, t));\n      this.feedTracks.delete(id);\n      removed = true;\n    }\n\n    if(removed && notify){\n      this.observer?.onRemoteFeedCleanup?.(id);\n    }\n  }\n\n  cleanupAll(){\n    this.pendingAttachTimers.forEach(t => window.clearTimeout(t));\n    this.pendingAttachTimers.clear();\n    this.feedStartTimers.forEach(t => window.clearTimeout(t));\n    this.feedStartTimers.clear();\n    this.retryTimers.forEach(t => window.clearTimeout(t));\n    this.retryTimers.clear();\n    this.retryAttempts.clear();\n    this.retryBlockedUntil.clear();\n    this.pendingFeedAttach.clear();\n    Array.from(this.feeds.keys()).forEach(id => this.removeFeed(id, true, false));\n    this.media.clearRemote(this.remoteVideo);\n  }\n}\n","// import { HttpClient } from \"../core/http/HttpClient\";\n// import { ImsClient } from \"../core/clients/ims/ImsClient\";\n\nclass CallController {\n\n  private gateway: JanusGateway;\n  private media: MediaManager;\n  private roster = new ParticipantRoster();\n\n  private plugin: any = null;\n  private privateId: number | null = null;\n  private selfId: number | null = null;\n  private remoteFeeds: RemoteFeedManager | null = null;\n\n  private joinedRoom = false;\n  private roomCreateAttempted = false;\n\n  private cameraStream: MediaStream | null = null;\n  private screenEnabled = false;\n  private vbEnabled = false;\n\n  private screenManager = new ScreenShareManager();\n  private vbManager: VirtualBackgroundManager;\n\n  //  CLEAN recording state\n  private recording = false;\n  private currentRecordingId: string | null = null;\n  private currentRoomId: number | null = null;\n  private participantSyncTimer: number | null = null;\n  private participantSyncInFlight = false;\n  private lastParticipantSyncAt = 0;\n  private connectionEngine: ConnectionStatusEngine;\n  private activeJoinCfg: JoinConfig | null = null;\n  private retryTimer: number | null = null;\n  private serverRetryAttempt = 0;\n  private peerRetryAttempt = 0;\n  private isLeaving = false;\n  private suppressPublisherCleanupRetry = false;\n  private suppressRemoteFeedRetry = false;\n  private participantSyncRequestTimer: number | null = null;\n  private participantSyncRequestSeq = 0;\n  private readonly recordingRetryDelayMs = 700;\n  private cameraStreamOrientation: \"portrait\" | \"landscape\" | null = null;\n  private publisherPc: RTCPeerConnection | null = null;\n  private subscriberPcs = new Map<number, RTCPeerConnection>();\n  private localVideoEnabled = true;\n  private videoToggleBusy = false;\n  private screenToggleBusy = false;\n  private vbToggleBusy = false;\n  private mediaStatsTimer: number | null = null;\n  private metricsPrevAt = 0;\n  private outboundPrev = { audio: 0, video: 0 };\n  private outboundAudioPacketsPrev = 0;\n  private inboundPrev = { audio: 0, video: 0 };\n  private remoteInboundPrev = { audioPackets: 0, videoPackets: 0 };\n  private remoteReceiveGrowthAt = { audio: 0, video: 0 };\n  private localReceiveGrowthAt = { audio: 0, video: 0 };\n  private peerTelemetryByFeed = new Map<number, PeerPlaybackTelemetry>();\n  private remoteVideoPlaybackAt = 0;\n  private lastRemoteVideoTime = 0;\n  private localAudioPlaybackAt = 0;\n  private mixedAudioContext: AudioContext | null = null;\n  private mixedAudioTrack: MediaStreamTrack | null = null;\n  private callId: string | null = null;\n\n  constructor(\n    private bus: EventBus,\n    private localVideo: HTMLVideoElement,\n    private remoteVideo: HTMLVideoElement\n  ) {\n    this.gateway = new JanusGateway();\n    this.media = new MediaManager();\n    this.vbManager = new VirtualBackgroundManager();\n    this.vbManager.setSourceProvider(async () => {\n      try {\n        return await this.ensureCameraStream();\n      } catch {\n        return null;\n      }\n    });\n    this.connectionEngine = new ConnectionStatusEngine((status: ConnectionStatusView) => {\n      this.bus.emit(\"connection-status\", status);\n    });\n    this.bus.emit(\"connection-status\", this.connectionEngine.getStatus());\n    this.gateway.init();\n  }\n\n  async join(cfg: JoinConfig, opts?: { internalRetry?: boolean }) {\n    if (!opts?.internalRetry || !this.callId) {\n      this.callId = Correlation.newId();\n    }\n    this.activeJoinCfg = cfg;\n    this.isLeaving = false;\n    this.localVideoEnabled = true;\n    this.suppressPublisherCleanupRetry = false;\n    if (!opts?.internalRetry) {\n      this.serverRetryAttempt = 0;\n      this.peerRetryAttempt = 0;\n      this.clearRetryTimer();\n    }\n    Logger.user(`[call] join start callId=${this.callId} roomId=${cfg.roomId} participantId=${cfg.participantId ?? \"n/a\"}`);\n    this.bus.emit(\"telemetry-context\", {\n      callId: this.callId,\n      roomId: cfg.roomId,\n      participantId: cfg.participantId ?? null\n    });\n    this.connectionEngine.onJoinStarted();\n    try {\n      const server = UrlConfig.getVcxServer().server;\n      const clientId = UrlConfig.getVcxServer().client_id;\n\n      const http: HttpClient = new HttpClient(server, clientId);\n      const ims = new ImsClient(http);\n      const payload = await ims.getMediaConstraints();\n\n      this.gateway.createSession(\n        cfg.server,\n        payload.PC_CONFIG?.iceServers,\n        () => {\n          this.connectionEngine.onSessionReady();\n          this.attachAndEnsureRoomThenJoin(cfg);\n        },\n        () => {\n          this.connectionEngine.onSessionDestroyed();\n          this.scheduleServerRetry(\"Janus session destroyed\");\n        },\n        (e: any) => {\n          this.scheduleServerRetry(`Janus session create failed: ${JSON.stringify(e)}`);\n        }\n      );\n    } catch (e: any) {\n      const requestId = String(e?.requestId || \"n/a\");\n      Logger.error(`[join] failed callId=${this.callId} roomId=${cfg.roomId} requestId=${requestId}`, e);\n      this.scheduleServerRetry(\"Join error: \" + (e?.message || e));\n    }\n  }\n\n  private clearRetryTimer() {\n    if (this.retryTimer !== null) {\n      window.clearTimeout(this.retryTimer);\n      this.retryTimer = null;\n    }\n  }\n\n  private clearParticipantSyncRequestTimer() {\n    if (this.participantSyncRequestTimer !== null) {\n      window.clearTimeout(this.participantSyncRequestTimer);\n      this.participantSyncRequestTimer = null;\n    }\n  }\n\n  private cleanupForRetry() {\n    this.suppressRemoteFeedRetry = true;\n    this.stopMediaStatsLoop();\n    this.clearMixedAudioResources();\n    this.vbManager.disable();\n    this.vbEnabled = false;\n    this.screenManager.stop();\n    this.screenEnabled = false;\n    this.peerTelemetryByFeed.clear();\n    this.remoteFeeds?.cleanupAll();\n    this.remoteFeeds = null;\n    this.plugin = null;\n    this.stopParticipantSync();\n    this.joinedRoom = false;\n    this.roomCreateAttempted = false;\n    this.privateId = null;\n    this.selfId = null;\n    this.publisherPc = null;\n    this.subscriberPcs.clear();\n    this.localVideoEnabled = true;\n    this.videoToggleBusy = false;\n    this.screenToggleBusy = false;\n    this.vbToggleBusy = false;\n    this.recording = false;\n    this.currentRecordingId = null;\n    this.currentRoomId = null;\n    this.roster.reset();\n    this.bus.emit(\"recording-changed\", false);\n    this.bus.emit(\"joined\", false);\n\n    this.suppressPublisherCleanupRetry = true;\n    this.gateway.destroy();\n  }\n\n  private scheduleServerRetry(reason: string) {\n    this.scheduleRetry(\"server\", reason);\n  }\n\n  private schedulePeerRetry(reason: string) {\n    this.scheduleRetry(\"peer\", reason);\n  }\n\n  private scheduleRetry(kind: \"server\" | \"peer\", reason: string) {\n    if (this.isLeaving) return;\n    const cfg = this.activeJoinCfg;\n    if (!cfg) return;\n    if (this.retryTimer !== null) return;\n\n    const maxAttempts = kind === \"server\"\n      ? APP_CONFIG.call.retry.serverMaxAttempts\n      : APP_CONFIG.call.retry.peerMaxAttempts;\n    const delayMs = kind === \"server\"\n      ? APP_CONFIG.call.retry.serverDelayMs\n      : APP_CONFIG.call.retry.peerDelayMs;\n\n    const attempt = kind === \"server\"\n      ? ++this.serverRetryAttempt\n      : ++this.peerRetryAttempt;\n\n    if (kind === \"server\") {\n      this.peerRetryAttempt = 0;\n    } else {\n      this.serverRetryAttempt = 0;\n    }\n\n    if (attempt > maxAttempts) {\n      this.connectionEngine.onFailed();\n      if (kind === \"server\") {\n        Logger.setStatus(\"Video server call failed. Retry limit reached.\");\n      } else {\n        Logger.setStatus(\"TURN/peer connection failed. Retry limit reached.\");\n      }\n      Logger.error(`[retry] ${kind} retries exhausted. callId=${this.callId ?? \"n/a\"} roomId=${cfg.roomId} reason=${reason}`);\n      return;\n    }\n\n    if (kind === \"server\") {\n      this.connectionEngine.onServerRetrying(attempt, maxAttempts);\n      Logger.setStatus(`Video server call failed. Retrying (${attempt}/${maxAttempts})...`);\n    } else {\n      this.connectionEngine.onPeerRetrying(attempt, maxAttempts);\n      Logger.setStatus(`TURN/peer connection failed. Retrying (${attempt}/${maxAttempts})...`);\n    }\n    Logger.warn(`[retry] ${kind} scheduled (${attempt}/${maxAttempts}). callId=${this.callId ?? \"n/a\"} roomId=${cfg.roomId} reason=${reason}`);\n\n    this.cleanupForRetry();\n    this.retryTimer = window.setTimeout(() => {\n      this.retryTimer = null;\n      this.join(cfg, { internalRetry: true });\n    }, delayMs);\n  }\n\n  private attachAndEnsureRoomThenJoin(cfg: JoinConfig) {\n\n    this.gateway.attachPublisher(\n      (h: any) => {\n\n        this.plugin = h;\n        this.joinedRoom = false;\n        this.roomCreateAttempted = false;\n        this.selfId = null;\n        this.publisherPc = null;\n        this.subscriberPcs.clear();\n        this.roster.reset();\n        this.stopParticipantSync();\n\n        // reset recording\n        this.recording = false;\n        this.currentRecordingId = null;\n        this.bus.emit(\"recording-changed\", false);\n        this.connectionEngine.onPublisherAttached();\n\n        Logger.setStatus(\"Plugin attached. Checking room...\");\n        this.ensureRoomThenJoin(cfg);\n      },\n      (msg: any, jsep: any) => this.onPublisherMessage(cfg, msg, jsep),\n      (track: any, on: any) => {\n        if (track && typeof track.kind === \"string\") {\n          this.connectionEngine.onLocalTrackSignal(track, !!on);\n        }\n      },\n      () => {\n        if (this.isLeaving || this.suppressPublisherCleanupRetry) return;\n        this.connectionEngine.onPeerRetrying(this.peerRetryAttempt + 1, APP_CONFIG.call.retry.peerMaxAttempts);\n        Logger.setStatus(\"Publisher cleanup. Recovering media connection...\");\n        this.schedulePeerRetry(\"Publisher cleanup\");\n      },\n      (e: any) => {\n        this.scheduleServerRetry(`Attach publisher failed: ${JSON.stringify(e)}`);\n      }\n    );\n  }\n\n  private getVideoRoomData(msg: any) {\n    return msg?.plugindata?.data ?? msg;\n  }\n\n  private ensureRoomThenJoin(cfg: JoinConfig) {\n\n    if (!this.plugin) return;\n\n    this.plugin.send({\n      message: { request: \"exists\", room: cfg.roomId },\n      success: (res: any) => {\n\n        const data = this.getVideoRoomData(res);\n        const exists = !!data?.exists;\n\n        if (exists) {\n          Logger.setStatus(`Room exists. Joining...`);\n          this.sendPublisherJoin(cfg);\n        } else {\n          Logger.setStatus(`Room not found. Creating...`);\n          this.roomCreateAttempted = true;\n          this.sendCreateRoom(cfg);\n        }\n      },\n      error: () => {\n        this.scheduleServerRetry(\"Room exists check failed\");\n      }\n    });\n  }\n\n  private sendPublisherJoin(cfg: JoinConfig) {\n    if (!this.plugin) return;\n    const message: any = {\n      request: \"join\",\n      room: cfg.roomId,\n      ptype: \"publisher\",\n      display: cfg.display\n    };\n    if (typeof cfg.participantId === \"number\" && Number.isFinite(cfg.participantId)) {\n      message.id = cfg.participantId;\n    }\n    this.plugin.send({\n      message\n    });\n  }\n\n  private sendCreateRoom(cfg: JoinConfig) {\n\n    if (!this.plugin) return;\n\n    this.plugin.send({\n      message: {\n        request: \"create\",\n        room: cfg.roomId,\n        publishers: APP_CONFIG.videoroom.maxPublishers,\n        description: `Room ${cfg.roomId}`\n      },\n      success: () => {\n        Logger.setStatus(\"Room created. Joining...\");\n        this.sendPublisherJoin(cfg);\n      },\n      error: () => {\n        this.scheduleServerRetry(\"Create room failed\");\n      }\n    });\n  }\n\n  private isParticipantIdCollisionError(errorCode: number | null, errorText: string): boolean {\n    const lower = errorText.toLowerCase();\n    if (errorCode === 436) return true;\n    return lower.includes(\"id\") &&\n      (lower.includes(\"exists\") || lower.includes(\"exist\") || lower.includes(\"already\") || lower.includes(\"taken\"));\n  }\n\n  private handlePublisherJoinError(cfg: JoinConfig, data: any, errorCodeRaw: unknown): boolean {\n    const errorCode = Number.isFinite(Number(errorCodeRaw)) ? Number(errorCodeRaw) : null;\n    const errorText = String(data?.error || data?.error_reason || data?.reason || \"\").trim();\n    const lower = errorText.toLowerCase();\n\n    if (errorCode === 426) {\n      if (!this.roomCreateAttempted) {\n        this.roomCreateAttempted = true;\n        this.sendCreateRoom(cfg);\n      } else {\n        this.scheduleServerRetry(\"Room join failed with 426 after create attempt\");\n      }\n      return true;\n    }\n\n    if (this.isParticipantIdCollisionError(errorCode, errorText)) {\n      const msg = \"Participant ID already in use. Use a unique Participant ID and reconnect.\";\n      Logger.error(`[join] participant id collision callId=${this.callId ?? \"n/a\"} roomId=${cfg.roomId} participantId=${cfg.participantId ?? \"n/a\"} code=${errorCode ?? \"n/a\"} detail=${errorText}`);\n      Logger.setStatus(msg);\n      this.connectionEngine.setFatalError(msg, \"Open call with a unique participant ID.\");\n      this.bus.emit(\"joined\", false);\n      return true;\n    }\n\n    const unauthorized = lower.includes(\"unauthor\") || lower.includes(\"forbidden\") || errorCode === 433 || errorCode === 428;\n    if (unauthorized) {\n      const msg = \"Authorization failed for call join. Please refresh and re-authenticate.\";\n      Logger.error(`[join] unauthorized callId=${this.callId ?? \"n/a\"} roomId=${cfg.roomId} code=${errorCode ?? \"n/a\"} detail=${errorText}`);\n      Logger.setStatus(msg);\n      this.connectionEngine.setFatalError(msg, \"Retry after authentication.\");\n      this.bus.emit(\"joined\", false);\n      return true;\n    }\n\n    const roomMissing = lower.includes(\"no such room\") || lower.includes(\"room not found\");\n    if (roomMissing) {\n      if (!this.roomCreateAttempted) {\n        this.roomCreateAttempted = true;\n        this.sendCreateRoom(cfg);\n      } else {\n        this.scheduleServerRetry(`Room missing after create attempt (code=${errorCode ?? \"n/a\"})`);\n      }\n      return true;\n    }\n\n    this.scheduleServerRetry(`Publisher join error code=${errorCode ?? \"n/a\"} detail=${errorText || JSON.stringify(data)}`);\n    return true;\n  }\n\n  private onPublisherMessage(cfg: JoinConfig, msg: any, jsep: any) {\n    if (msg?.janus === \"hangup\") {\n      const reason = String(msg?.reason || \"Peer hangup\");\n      Logger.error(`Publisher hangup: ${reason}`);\n      if (reason.toLowerCase().includes(\"ice\")) {\n        this.schedulePeerRetry(`Publisher hangup: ${reason}`);\n      }\n      return;\n    }\n\n    const data = this.getVideoRoomData(msg);\n    const event = data[\"videoroom\"];\n    const errorCode = data[\"error_code\"];\n    if (data?.error || errorCode) {\n      Logger.error(`Publisher plugin error: ${JSON.stringify(data)}`);\n      if (!this.joinedRoom && this.handlePublisherJoinError(cfg, data, errorCode)) {\n        return;\n      }\n    }\n\n    if (event === \"joined\") {\n\n      this.joinedRoom = true;\n      this.currentRoomId = cfg.roomId;\n      this.serverRetryAttempt = 0;\n      this.peerRetryAttempt = 0;\n      this.clearRetryTimer();\n      this.suppressRemoteFeedRetry = false;\n      this.connectionEngine.onJoinedRoom();\n\n      const myId = data[\"id\"];\n      this.privateId = data[\"private_id\"];\n      this.selfId = myId;\n      this.roster.setSelf(myId);\n\n      Logger.setStatus(\"Joined. Publishing...\");\n\n      this.remoteFeeds = new RemoteFeedManager(\n        this.gateway.getJanus(),\n        cfg.roomId,\n        this.privateId!,\n        this.gateway.getOpaqueId(),\n        this.media,\n        this.remoteVideo,\n        {\n          onSubscriberPcReady: (feedId: number, pc: RTCPeerConnection) => {\n            this.subscriberPcs.set(feedId, pc);\n            this.connectionEngine.registerSubscriberPc(feedId, pc);\n          },\n          onRemoteTrackSignal: (feedId: number, track: MediaStreamTrack, on: boolean) => {\n            this.connectionEngine.onRemoteTrackSignal(feedId, track, on);\n          },\n          onRemoteTelemetry: (feedId: number, payload: PeerPlaybackTelemetry) => {\n            this.peerTelemetryByFeed.set(feedId, payload);\n          },\n          onRemoteFeedCleanup: (feedId: number) => {\n            this.subscriberPcs.delete(feedId);\n            this.peerTelemetryByFeed.delete(feedId);\n            this.connectionEngine.unregisterSubscriber(feedId);\n            if (this.isLeaving || this.suppressRemoteFeedRetry) {\n              Logger.warn(`Remote feed ${feedId} cleanup ignored (controlled cleanup)`);\n              return;\n            }\n            if (this.remoteFeeds && this.roster.has(feedId) && feedId !== this.selfId) {\n              Logger.warn(`Remote feed ${feedId} cleaned up. Scheduling re-subscribe.`);\n              window.setTimeout(() => {\n                this.remoteFeeds?.addFeed(feedId);\n              }, APP_CONFIG.call.remoteFeedRetryDelayMs);\n            }\n          },\n          onRemoteFeedRetryExhausted: (feedId: number, attempts: number) => {\n            this.subscriberPcs.delete(feedId);\n            this.connectionEngine.onRemoteFeedRetryExhausted(feedId, attempts);\n            Logger.setStatus(\"Remote video is unstable. Ask participant to reconnect.\");\n            Logger.error(`[remote-feed] retry exhausted callId=${this.callId ?? \"n/a\"} roomId=${cfg.roomId} feedId=${feedId} attempts=${attempts}`);\n          }\n        }\n      );\n\n      this.publish();\n      this.reconcile(cfg, data[\"publishers\"]);\n      this.bus.emit(\"joined\", true);\n      this.bus.emit(\"video-mute-changed\", !this.localVideoEnabled);\n      this.startParticipantSync(cfg);\n      this.startMediaStatsLoop();\n    }\n\n    if (event === \"event\") {\n      this.reconcile(cfg, data[\"publishers\"]);\n\n      const leaving = data[\"leaving\"];\n      if (typeof leaving === \"number\") {\n        this.removeParticipant(cfg, leaving);\n      }\n\n      const unpublished = data[\"unpublished\"];\n      if (typeof unpublished === \"number\") {\n        this.removeParticipant(cfg, unpublished);\n      }\n\n      this.syncParticipantsFromServer(cfg);\n    }\n\n    if (event === \"destroyed\") {\n      this.scheduleServerRetry(\"Video room destroyed event\");\n      return;\n    }\n\n    if (jsep) this.plugin.handleRemoteJsep({ jsep });\n  }\n\n  private reconcile(cfg: JoinConfig, publishers: any) {\n    if (!publishers) return;\n    publishers.forEach((p: any) => {\n      const feedId = Number(p?.id);\n      if (!Number.isFinite(feedId)) return;\n\n      this.roster.add(feedId);\n      if (this.remoteFeeds && feedId !== this.selfId) {\n        this.connectionEngine.onSubscriberRequested();\n        this.remoteFeeds.addFeed(feedId);\n      }\n    });\n\n    this.publishParticipants(cfg);\n  }\n\n  private publishParticipants(cfg: JoinConfig) {\n    const snapshot = this.roster.snapshot(cfg.roomId);\n    this.bus.emit(\"participants\", snapshot);\n\n    const remoteCount = snapshot.participantIds\n      .filter((id: number) => id !== this.selfId)\n      .length;\n    this.connectionEngine.setRemoteParticipantCount(remoteCount);\n  }\n\n  private startParticipantSync(cfg: JoinConfig) {\n    this.stopParticipantSync();\n    this.syncParticipantsFromServer(cfg);\n    this.participantSyncTimer = window.setInterval(() => {\n      this.syncParticipantsFromServer(cfg);\n    }, APP_CONFIG.call.participantSyncIntervalMs);\n  }\n\n  private stopParticipantSync() {\n    if (this.participantSyncTimer !== null) {\n      window.clearInterval(this.participantSyncTimer);\n      this.participantSyncTimer = null;\n    }\n    this.clearParticipantSyncRequestTimer();\n    this.participantSyncRequestSeq = 0;\n    this.participantSyncInFlight = false;\n    this.lastParticipantSyncAt = 0;\n  }\n\n  private syncParticipantsFromServer(cfg: JoinConfig) {\n    if (!this.plugin || !this.joinedRoom) return;\n    if (this.participantSyncInFlight) return;\n\n    const now = Date.now();\n    if (now - this.lastParticipantSyncAt < APP_CONFIG.call.participantSyncCooldownMs) return;\n    this.lastParticipantSyncAt = now;\n    this.participantSyncInFlight = true;\n    const requestSeq = ++this.participantSyncRequestSeq;\n    this.clearParticipantSyncRequestTimer();\n    this.participantSyncRequestTimer = window.setTimeout(() => {\n      if (!this.participantSyncInFlight || requestSeq !== this.participantSyncRequestSeq) return;\n      this.participantSyncInFlight = false;\n      this.participantSyncRequestTimer = null;\n      Logger.error(`listparticipants timeout (request=${requestSeq}, room=${cfg.roomId})`);\n    }, APP_CONFIG.call.participantSyncRequestTimeoutMs);\n\n    this.plugin.send({\n      message: { request: \"listparticipants\", room: cfg.roomId },\n      success: (res: any) => {\n        if (requestSeq !== this.participantSyncRequestSeq) return;\n        this.clearParticipantSyncRequestTimer();\n        const data = this.getVideoRoomData(res);\n        const participants = Array.isArray(data?.participants) ? data.participants : [];\n        const serverIds = new Set<number>();\n\n        participants.forEach((p: any) => {\n          const feedId = Number(p?.id);\n          if (!Number.isFinite(feedId)) return;\n          serverIds.add(feedId);\n          this.roster.add(feedId);\n          if (this.remoteFeeds && feedId !== this.selfId) {\n            this.remoteFeeds.addFeed(feedId);\n          }\n        });\n\n        const localIds = this.roster.snapshot(cfg.roomId).participantIds;\n        localIds.forEach((id: number) => {\n          if (id === this.selfId) return;\n          if (!serverIds.has(id)) {\n            this.roster.remove(id);\n            this.remoteFeeds?.removeFeed(id);\n          }\n        });\n\n        this.publishParticipants(cfg);\n        this.participantSyncInFlight = false;\n      },\n      error: (e: any) => {\n        if (requestSeq !== this.participantSyncRequestSeq) return;\n        this.clearParticipantSyncRequestTimer();\n        this.participantSyncInFlight = false;\n        Logger.error(`listparticipants error (request=${requestSeq}): ${JSON.stringify(e)}`);\n      }\n    });\n  }\n\n  private removeParticipant(cfg: JoinConfig, feedId: number) {\n    if (feedId === this.selfId) return;\n    this.roster.remove(feedId);\n    this.subscriberPcs.delete(feedId);\n    this.peerTelemetryByFeed.delete(feedId);\n    this.remoteFeeds?.removeFeed(feedId);\n    this.publishParticipants(cfg);\n    const remoteCount = this.roster.snapshot(cfg.roomId).participantIds\n      .filter((id: number) => id !== this.selfId)\n      .length;\n    if (!this.isLeaving && this.joinedRoom && remoteCount === 0) {\n      this.bus.emit(\"call-ended\", { reason: \"remote-left\" });\n      this.leave();\n    }\n  }\n\n  // =====================================\n  // MEDIA\n  // =====================================\n\n  private getVideoConfig(): VcxVideoConfig {\n    const cfg = UrlConfig.getVcxVideoConfig();\n    const bitrateBps = Number.isFinite(cfg.bitrate_bps) ? Math.floor(cfg.bitrate_bps) : APP_CONFIG.media.bitrateBps;\n    const maxFramerate = Number.isFinite(cfg.max_framerate) ? Math.floor(cfg.max_framerate) : APP_CONFIG.media.maxFramerate;\n\n    return {\n      bitrate_bps: Math.max(APP_CONFIG.media.minBitrateBps, Math.min(APP_CONFIG.media.maxBitrateBps, bitrateBps)),\n      bitrate_cap: cfg.bitrate_cap !== false,\n      max_framerate: Math.max(APP_CONFIG.media.minFramerate, Math.min(APP_CONFIG.media.maxFramerateCap, maxFramerate))\n    };\n  }\n\n  private tuneVideoSenderBitrate(pc: RTCPeerConnection, bitrateBps: number, maxFramerate: number) {\n    try {\n      const sender = pc.getSenders().find(s => s.track?.kind === \"video\");\n      if (!sender || typeof sender.getParameters !== \"function\" || typeof sender.setParameters !== \"function\") return;\n\n      const p = sender.getParameters();\n      const encodings = (p.encodings && p.encodings.length > 0) ? p.encodings : [{} as RTCRtpEncodingParameters];\n      encodings[0].maxBitrate = bitrateBps;\n      encodings[0].maxFramerate = maxFramerate;\n      p.encodings = encodings;\n\n      sender.setParameters(p).catch((e: any) => {\n        Logger.error(\"VCX_SET_PARAMETERS_ERROR\", e);\n      });\n    } catch (e: any) {\n      Logger.error(\"VCX_SET_PARAMETERS_HOOK_ERROR\", e);\n    }\n  }\n\n  private getErrorName(err: any): string {\n    return String(err?.name || err?.error?.name || \"\").trim();\n  }\n\n  private getErrorMessage(err: any): string {\n    return String(err?.message || err?.error?.message || \"\").trim();\n  }\n\n  private isMediaPermissionError(err: any): boolean {\n    const name = this.getErrorName(err).toLowerCase();\n    const msg = this.getErrorMessage(err).toLowerCase();\n    return name === \"notallowederror\" ||\n      name === \"permissiondeniederror\" ||\n      name === \"securityerror\" ||\n      /permission|denied|not allowed/.test(msg);\n  }\n\n  private isMediaDeviceMissingError(err: any): boolean {\n    const name = this.getErrorName(err).toLowerCase();\n    const msg = this.getErrorMessage(err).toLowerCase();\n    return name === \"notfounderror\" ||\n      name === \"devicesnotfounderror\" ||\n      /requested device not found|notfound/.test(msg);\n  }\n\n  private isMediaBusyError(err: any): boolean {\n    const name = this.getErrorName(err).toLowerCase();\n    const msg = this.getErrorMessage(err).toLowerCase();\n    return name === \"notreadableerror\" ||\n      name === \"trackstarterror\" ||\n      /device in use|device is busy|could not start video source/.test(msg);\n  }\n\n  private isMediaConstraintError(err: any): boolean {\n    const name = this.getErrorName(err).toLowerCase();\n    const msg = this.getErrorMessage(err).toLowerCase();\n    return name === \"overconstrainederror\" ||\n      name === \"constraintnotsatisfiederror\" ||\n      /overconstrained|constraint/.test(msg);\n  }\n\n  private getCameraMicErrorMessage(err: any): string {\n    if (this.isMediaPermissionError(err)) {\n      return \"Camera/Mic access blocked. Allow permissions in browser settings, then retry.\";\n    }\n    if (this.isMediaDeviceMissingError(err)) {\n      return \"Camera or microphone not found. Connect your devices, then retry.\";\n    }\n    if (this.isMediaBusyError(err)) {\n      return \"Camera/Mic is busy in another app. Close other apps using them, then retry.\";\n    }\n    if (this.isMediaConstraintError(err)) {\n      return \"Camera/Mic settings are unsupported. Reconnect device or reset browser media settings.\";\n    }\n    return \"Unable to start camera/microphone. Check devices and browser permissions, then retry.\";\n  }\n\n  private getScreenShareErrorMessage(err: any): string {\n    if (this.isMediaPermissionError(err)) {\n      return \"Screen share was blocked or canceled. Select a window/screen and allow access.\";\n    }\n    if (this.getErrorName(err).toLowerCase() === \"aborterror\") {\n      return \"Screen share was canceled. Please try sharing again.\";\n    }\n    if (this.isMediaBusyError(err)) {\n      return \"Screen share is unavailable right now. Close blocking apps and retry.\";\n    }\n    return \"Screen share failed. Please try again.\";\n  }\n\n  private classifyPublishError(err: any): { userMessage: string; retryable: boolean } {\n    if (this.isMediaPermissionError(err) || this.isMediaDeviceMissingError(err) || this.isMediaBusyError(err) || this.isMediaConstraintError(err)) {\n      return {\n        userMessage: this.getCameraMicErrorMessage(err),\n        retryable: false\n      };\n    }\n\n    return {\n      userMessage: \"Offer error. Recovering media path...\",\n      retryable: true\n    };\n  }\n\n  private isIOSDevice(): boolean {\n    const ua = navigator.userAgent || \"\";\n    const isiPhoneFamily = /iPad|iPhone|iPod/i.test(ua);\n    const iPadOSDesktopUA = navigator.platform === \"MacIntel\" && navigator.maxTouchPoints > 1;\n    return isiPhoneFamily || iPadOSDesktopUA;\n  }\n\n  private getViewportOrientation(): \"portrait\" | \"landscape\" {\n    return window.innerHeight >= window.innerWidth ? \"portrait\" : \"landscape\";\n  }\n\n  private buildIOSVideoConstraints(orientation: \"portrait\" | \"landscape\"): MediaTrackConstraints {\n    if (orientation === \"portrait\") {\n      return {\n        facingMode: \"user\",\n        width: { ideal: 480 },\n        height: { ideal: 640 },\n        frameRate: { ideal: 15, max: 20 }\n      };\n    }\n    return {\n      facingMode: \"user\",\n      width: { ideal: 640 },\n      height: { ideal: 480 },\n      frameRate: { ideal: 15, max: 20 }\n    };\n  }\n\n  private async getPublishTracks(): Promise<any[]> {\n    const stream = await this.ensureCameraStream();\n    const audioTrack = stream.getAudioTracks()[0];\n    const videoTrack = stream.getVideoTracks()[0];\n\n    if (!audioTrack || !videoTrack) {\n      throw new Error(\"Camera or microphone track unavailable\");\n    }\n\n    // Ensure local preview and connectivity state are updated even when\n    // browser/Janus onlocaltrack callback is delayed or missing.\n    this.connectionEngine.onLocalTrackSignal(videoTrack, true);\n    this.media.setLocalTrack(this.localVideo, videoTrack);\n\n    const tracks: any[] = [\n      { type: \"audio\", capture: audioTrack, recv: false },\n      { type: \"video\", capture: videoTrack, recv: false }\n    ];\n    if (APP_CONFIG.mediaTelemetry.enablePeerTelemetry) {\n      tracks.push({ type: \"data\" });\n    }\n    return tracks;\n  }\n\n  // public publish() {\n  //   this.plugin.createOffer({\n  //     tracks: [\n  //       { type: \"audio\", capture: true, recv: false },\n  //       { type: \"video\", capture: true, recv: false }\n  //     ],\n  //     success: (jsep: any) => {\n  //       this.plugin.send({\n  //         message: { request: \"configure\", audio: true, video: true },\n  //         jsep\n  //       });\n  //     }\n  //   });\n  // }\n\n  public async publish() {\n    if (!this.plugin) {\n      Logger.setStatus(\"Publish ignored: plugin not ready\");\n      return;\n    }\n    const videoCfg = this.getVideoConfig();\n    let tracks: any[];\n\n    try {\n      tracks = await this.getPublishTracks();\n    } catch (e: any) {\n      const classified = this.classifyPublishError(e);\n      Logger.setStatus(classified.userMessage);\n      Logger.error(classified.userMessage, e);\n      this.connectionEngine.setFatalError(\n        classified.userMessage,\n        \"Fix camera/mic issue and reconnect the call.\"\n      );\n      return;\n    }\n\n    this.plugin.createOffer({\n      tracks,\n\n      success: (jsep: any) => {\n        //  Point #4: capture and emit connectivity info from RTCPeerConnection\n        try {\n          // TODO: If Janus internals change and webrtcStuff.pc is unavailable, bind the publisher PC from Janus plugin callbacks.\n          const pc: RTCPeerConnection | undefined = this.plugin?.webrtcStuff?.pc;\n\n          if (pc) {\n            this.publisherPc = pc;\n            this.connectionEngine.registerPublisherPc(pc);\n            this.tuneVideoSenderBitrate(pc, videoCfg.bitrate_bps, videoCfg.max_framerate);\n            const emit = () => {\n              const payload = {\n                ice: pc.iceConnectionState,\n                signaling: pc.signalingState,\n                connection: (pc as any).connectionState ?? \"n/a\",\n                gathering: pc.iceGatheringState,\n                ts: Date.now(),\n              };\n\n              console.log(\"VCX_CONNECTIVITY=\", payload);\n              this.bus.emit(\"connectivity\", payload);\n            };\n\n            // emit once immediately\n            emit();\n\n            pc.oniceconnectionstatechange = () => {\n              console.log(\"VCX_ICE=\" + pc.iceConnectionState);\n              emit();\n              if (pc.iceConnectionState === \"failed\") {\n                this.schedulePeerRetry(\"Publisher ICE state failed\");\n              }\n            };\n\n            pc.onsignalingstatechange = () => {\n              console.log(\"VCX_SIGNALING=\" + pc.signalingState);\n              emit();\n            };\n\n            // connectionState exists on modern browsers; not always present everywhere\n            (pc as any).onconnectionstatechange = () => {\n              console.log(\"VCX_CONNECTION=\" + ((pc as any).connectionState ?? \"n/a\"));\n              emit();\n              if ((pc as any).connectionState === \"failed\") {\n                this.schedulePeerRetry(\"Publisher connection state failed\");\n              }\n            };\n\n            pc.onicegatheringstatechange = () => {\n              console.log(\"VCX_GATHERING=\" + pc.iceGatheringState);\n              emit();\n            };\n          } else {\n            this.publisherPc = null;\n            console.log(\"VCX_CONNECTIVITY=pc_not_available\");\n            this.bus.emit(\"connectivity\", {\n              ice: \"n/a\",\n              signaling: \"n/a\",\n              connection: \"n/a\",\n              gathering: \"n/a\",\n              ts: Date.now(),\n            });\n          }\n        } catch (e: any) {\n          Logger.error(\"VCX_CONNECTIVITY hook error\", e);\n        }\n\n        //  normal Janus publish configure\n        this.plugin.send({\n          message: {\n            request: \"configure\",\n            audio: true,\n            video: true,\n            data: APP_CONFIG.mediaTelemetry.enablePeerTelemetry,\n            bitrate: videoCfg.bitrate_bps,\n            bitrate_cap: videoCfg.bitrate_cap\n          },\n          jsep,\n        });\n      },\n\n      error: (e: any) => {\n        const classified = this.classifyPublishError(e);\n        console.error(\"VCX_OFFER_ERROR\", e);\n        Logger.setStatus(classified.userMessage);\n        Logger.error(classified.userMessage, e);\n        if (!classified.retryable) {\n          this.connectionEngine.setFatalError(\n            classified.userMessage,\n            \"Fix camera/mic issue and reconnect the call.\"\n          );\n          return;\n        }\n        this.connectionEngine.onPeerRetrying(this.peerRetryAttempt + 1, APP_CONFIG.call.retry.peerMaxAttempts);\n        Logger.setStatus(\"Offer error. Recovering media path...\");\n        this.schedulePeerRetry(\"Offer error: \" + JSON.stringify(e));\n      },\n    });\n  }\n\n  toggleMute() {\n    if (!this.plugin) return;\n    const m = this.plugin.isAudioMuted();\n    m ? this.plugin.unmuteAudio() : this.plugin.muteAudio();\n    this.bus.emit(\"mute-changed\", !m);\n  }\n\n  async setVideoEnabled(enabled: boolean): Promise<boolean> {\n    if (!this.plugin) return this.localVideoEnabled;\n    if (this.videoToggleBusy) return this.localVideoEnabled;\n    this.videoToggleBusy = true;\n    try {\n      if (enabled) {\n        let track: MediaStreamTrack | undefined;\n        if (this.vbEnabled) {\n          const vbSourceTrack = this.vbManager.getSourceStream()?.getVideoTracks()[0] ?? this.cameraStream?.getVideoTracks()[0];\n          if (vbSourceTrack) vbSourceTrack.enabled = true;\n        }\n        if (this.screenEnabled) {\n          track = this.screenManager.getStream()?.getVideoTracks()[0];\n        } else if (this.vbEnabled) {\n          track = this.vbManager.getOutputStream()?.getVideoTracks()[0];\n        }\n        if (!track) {\n          const cam = await this.ensureCameraStream();\n          track = cam.getVideoTracks()[0];\n        }\n        if (track) {\n          track.enabled = true;\n          this.replaceVideoTrack(track);\n        }\n        await this.ensureOutgoingAudio({ camera: this.cameraStream });\n        try {\n          if (typeof this.plugin.unmuteVideo === \"function\") {\n            this.plugin.unmuteVideo();\n          } else {\n            this.plugin.send({ message: { request: \"configure\", video: true } });\n          }\n        } catch (e: any) {\n          Logger.error(\"Video unmute signaling failed\", e);\n        }\n        this.localVideoEnabled = true;\n      } else {\n        try {\n          if (typeof this.plugin.muteVideo === \"function\") {\n            this.plugin.muteVideo();\n          } else {\n            this.plugin.send({ message: { request: \"configure\", video: false } });\n          }\n        } catch (e: any) {\n          Logger.error(\"Video mute signaling failed\", e);\n        }\n        const localTrack = this.screenEnabled\n          ? this.screenManager.getStream()?.getVideoTracks()[0]\n          : this.vbEnabled\n            ? this.vbManager.getOutputStream()?.getVideoTracks()[0]\n            : this.cameraStream?.getVideoTracks()[0];\n        if (localTrack) {\n          localTrack.enabled = false;\n          this.connectionEngine.onLocalTrackSignal(localTrack, false);\n        }\n        this.localVideoEnabled = false;\n      }\n    } catch (e: any) {\n      Logger.error(\"Video toggle failed\", e);\n      Logger.setStatus(this.getCameraMicErrorMessage(e));\n    } finally {\n      this.videoToggleBusy = false;\n      this.bus.emit(\"video-mute-changed\", !this.localVideoEnabled);\n    }\n    return this.localVideoEnabled;\n  }\n\n  markRetrying() {\n    this.connectionEngine.onReconnect();\n  }\n\n  public getNetworkQualityPeers(): { publisher: RTCPeerConnection | null; subscribers: RTCPeerConnection[] } {\n    return {\n      publisher: this.publisherPc,\n      subscribers: Array.from(this.subscriberPcs.values())\n    };\n  }\n\n  stopVideo() {\n    void this.setVideoEnabled(false);\n  }\n\n  // =====================================\n  // RECORDING\n  // =====================================\n\n  private endCallOnRecordingFailure(message: string, err?: unknown) {\n    Logger.error(`[recording] ${message}`, err);\n    Logger.setStatus(\"Recording failed twice. Ending call.\");\n    this.recording = false;\n    this.currentRecordingId = null;\n    this.bus.emit(\"recording-changed\", false);\n    if (!this.isLeaving) this.leave();\n  }\n\n  public startRecording(recordingId: string, attempt: number = 1) {\n\n    if (!this.plugin || !this.joinedRoom) return;\n    if (this.recording) return;\n\n    this.currentRecordingId = recordingId;\n    const recordingIdRandom = Math.floor(100000 + Math.random() * 900000);\n    this.plugin.send({\n    message: {\n          request: \"enable_recording\",\n          record: true,\n          room: this.currentRoomId,\n          recordingId: recordingIdRandom,\n          participantId: this.activeJoinCfg?.participantId\n      },\n      success: () => {\n        this.recording = true;\n        Logger.setStatus(`Recording started (room): ${recordingId}`);\n        this.bus.emit(\"recording-changed\", true);\n      },\n      error: (e: any) => {\n        Logger.error(`[recording] start failed (attempt ${attempt})`, e);\n        this.recording = false;\n        this.bus.emit(\"recording-changed\", false);\n        if (attempt < 2) {\n          Logger.setStatus(\"Recording start failed. Retrying...\");\n          window.setTimeout(() => this.startRecording(recordingId, attempt + 1), this.recordingRetryDelayMs);\n          return;\n        }\n        this.endCallOnRecordingFailure(\"start failed after retry\", e);\n      }\n    });\n  }\n\n  public stopRecording(attempt: number = 1) {\n\n    if (!this.plugin || !this.recording) return;\n\n    this.plugin.send({\n      message: { request: \"enable_recording\", record: false, room: this.currentRoomId },\n      success: () => {\n        this.recording = false;\n        this.currentRecordingId = null;\n        Logger.setStatus(\"Recording stopped\");\n        this.bus.emit(\"recording-changed\", false);\n      },\n      error: (e: any) => {\n        Logger.error(`[recording] stop failed (attempt ${attempt})`, e);\n        if (attempt < 2) {\n          Logger.setStatus(\"Recording stop failed. Retrying...\");\n          window.setTimeout(() => this.stopRecording(attempt + 1), this.recordingRetryDelayMs);\n          return;\n        }\n        this.endCallOnRecordingFailure(\"stop failed after retry\", e);\n      }\n    });\n  }\n\n  // =====================================\n  // LEAVE\n  // =====================================\n\n  leave() {\n\n    try {\n      this.isLeaving = true;\n      this.suppressRemoteFeedRetry = true;\n      this.stopMediaStatsLoop();\n      this.clearMixedAudioResources();\n      this.vbManager.disable();\n      this.vbEnabled = false;\n      this.screenManager.stop();\n      this.screenEnabled = false;\n      this.clearRetryTimer();\n      this.serverRetryAttempt = 0;\n      this.peerRetryAttempt = 0;\n\n      if (this.recording && this.plugin) {\n        try {\n          this.plugin.send({ message: { request: \"enable_recording\", record: false, room: this.currentRoomId } });\n        } catch (e: any) {\n          Logger.error(\"[recording] stop on leave failed\", e);\n        }\n      }\n\n      try {\n        if (this.joinedRoom) {\n          this.plugin?.send({ message: { request: \"leave\" } });\n        }\n      } catch (e: any) {\n        Logger.error(\"Leave signaling failed\", e);\n      }\n\n      this.remoteFeeds?.cleanupAll();\n      this.remoteFeeds = null;\n\n      this.plugin = null;\n      this.suppressPublisherCleanupRetry = true;\n      this.gateway.destroy();\n      this.suppressPublisherCleanupRetry = false;\n      this.stopParticipantSync();\n\n      this.joinedRoom = false;\n      this.recording = false;\n      this.currentRecordingId = null;\n      this.currentRoomId = null;\n      this.activeJoinCfg = null;\n      this.selfId = null;\n      this.publisherPc = null;\n      this.subscriberPcs.clear();\n      this.peerTelemetryByFeed.clear();\n      this.localVideoEnabled = true;\n      this.videoToggleBusy = false;\n      this.screenToggleBusy = false;\n      this.vbToggleBusy = false;\n      this.roster.reset();\n\n      this.bus.emit(\"recording-changed\", false);\n      this.bus.emit(\"joined\", false);\n      this.bus.emit(\"video-mute-changed\", false);\n      this.connectionEngine.onLeft();\n\n      this.media.clearLocal(this.localVideo);\n      this.media.clearRemote(this.remoteVideo);\n      this.cameraStream = null;\n      this.cameraStreamOrientation = null;\n      this.callId = null;\n\n      Logger.setStatus(\"Left\");\n\n    } catch (e: any) {\n      Logger.setStatus(\"Leave error: \" + e.message);\n      Logger.error(\"Leave error\", e);\n    }\n  }\n\n  async toggleScreenShare() {\n    if (!this.plugin || this.screenToggleBusy) return;\n    this.screenToggleBusy = true;\n    try {\n      if (!this.screenEnabled) {\n        const ss = await this.screenManager.start();\n        const screenTrack = ss.getVideoTracks()[0];\n        if (!screenTrack) throw new Error(\"Screen video track unavailable\");\n\n        const cam = await this.ensureCameraStream();\n        const micTrack = cam.getAudioTracks()[0] ?? null;\n        const displayAudioTrack = ss.getAudioTracks()[0] ?? null;\n        const outgoingAudio = await this.resolveScreenShareAudioTrack(micTrack, displayAudioTrack);\n        if (outgoingAudio) this.syncPublishedAudioTrack(outgoingAudio);\n\n        this.screenEnabled = true;\n        await this.ensureOutgoingAudio({ camera: cam, screen: ss });\n        this.replaceVideoTrack(screenTrack);\n        Logger.setStatus(\"Screen share started\");\n        this.bus.emit(\"screen-changed\", true);\n        screenTrack.onended = () => {\n          if (!this.isLeaving && this.screenEnabled) void this.toggleScreenShare();\n        };\n      } else {\n        this.screenManager.stop();\n        this.clearMixedAudioResources();\n        this.screenEnabled = false;\n        const cam = await this.ensureCameraStream();\n        await this.ensureOutgoingAudio({ camera: cam });\n        const videoTrack = cam.getVideoTracks()[0];\n        if (videoTrack) {\n          videoTrack.enabled = this.localVideoEnabled;\n          this.replaceVideoTrack(videoTrack);\n        }\n        const micTrack = cam.getAudioTracks()[0];\n        if (micTrack) this.syncPublishedAudioTrack(micTrack);\n        Logger.setStatus(\"Screen share stopped\");\n        this.bus.emit(\"screen-changed\", false);\n      }\n    } catch (e: any) {\n      Logger.error(\"Screen share toggle failed\", e);\n      Logger.setStatus(this.getScreenShareErrorMessage(e));\n    } finally {\n      this.screenToggleBusy = false;\n    }\n  }\n\n  async toggleVirtualBackground() {\n    if (!this.plugin || this.vbToggleBusy) return;\n    if (this.screenEnabled) {\n      Logger.setStatus(\"Disable screen share before virtual background\");\n      return;\n    }\n    this.vbToggleBusy = true;\n    try {\n      if (!this.vbEnabled) {\n        if (!this.localVideoEnabled) {\n          await this.setVideoEnabled(true);\n        }\n        const cam = await this.ensureCameraStream();\n        const camVideoTrack = cam.getVideoTracks()[0];\n        if (camVideoTrack) camVideoTrack.enabled = true;\n        const processed = await this.vbManager.enable(cam);\n        const track = processed.getVideoTracks()[0];\n        if (!track) throw new Error(\"Virtual background output track unavailable\");\n        track.enabled = true;\n        this.vbEnabled = true;\n        this.localVideoEnabled = true;\n        await this.ensureOutgoingAudio({ camera: cam });\n        this.replaceVideoTrack(track);\n        this.bus.emit(\"video-mute-changed\", false);\n        const micTrack = cam.getAudioTracks()[0];\n        if (micTrack) this.syncPublishedAudioTrack(micTrack);\n        this.bus.emit(\"vb-changed\", true);\n      } else {\n        this.vbManager.disable();\n        this.vbEnabled = false;\n        const cam = await this.ensureCameraStream();\n        await this.ensureOutgoingAudio({ camera: cam });\n        const track = cam.getVideoTracks()[0];\n        if (track) {\n          track.enabled = this.localVideoEnabled;\n          this.replaceVideoTrack(track);\n        }\n        const micTrack = cam.getAudioTracks()[0];\n        if (micTrack) this.syncPublishedAudioTrack(micTrack);\n        this.bus.emit(\"vb-changed\", false);\n      }\n    } catch (e: any) {\n      Logger.error(\"Virtual background toggle failed\", e);\n      Logger.setStatus(this.getCameraMicErrorMessage(e));\n    } finally {\n      this.vbToggleBusy = false;\n    }\n  }\n\n  private async ensureCameraStream(): Promise<MediaStream> {\n    try {\n      const desiredOrientation = this.getViewportOrientation();\n      const currentStream = this.cameraStream;\n      const hasLiveVideo = !!currentStream?.getVideoTracks().some(t => t.readyState === \"live\");\n      const hasLiveAudio = !!currentStream?.getAudioTracks().some(t => t.readyState === \"live\");\n      const needsRecreate =\n        !currentStream ||\n        !hasLiveVideo ||\n        !hasLiveAudio ||\n        (this.isIOSDevice() && this.cameraStreamOrientation !== desiredOrientation);\n\n      if (needsRecreate) {\n        const videoConstraints = this.isIOSDevice()\n          ? this.buildIOSVideoConstraints(desiredOrientation)\n          : true;\n        const nextStream = await navigator.mediaDevices.getUserMedia({\n          video: videoConstraints,\n          audio: true\n        });\n        const previous = this.cameraStream;\n        this.cameraStream = nextStream;\n        this.cameraStreamOrientation = desiredOrientation;\n\n        const nextAudio = nextStream.getAudioTracks()[0];\n        if (nextAudio && (!this.screenEnabled || !this.mixedAudioTrack)) {\n          this.syncPublishedAudioTrack(nextAudio);\n        }\n\n        if (previous && previous !== nextStream) {\n          const vbSourceLive = !!this.vbManager\n            .getSourceStream()\n            ?.getVideoTracks()\n            .some((t: MediaStreamTrack) => t.readyState === \"live\");\n          previous.getTracks().forEach(t => {\n            if (nextStream.getTracks().some(nt => nt.id === t.id)) return;\n            if (this.vbEnabled && vbSourceLive && t.kind === \"video\") return;\n            try {\n              t.stop();\n            } catch (stopErr: any) {\n              Logger.error(\"Stopping stale camera track failed\", stopErr);\n            }\n          });\n        }\n      }\n\n      if (!this.cameraStream) {\n        throw new Error(\"Camera stream unavailable after initialization\");\n      }\n      return this.cameraStream;\n    } catch (e: any) {\n      Logger.error(\"Camera access failed\", e);\n      Logger.setStatus(this.getCameraMicErrorMessage(e));\n      throw e;\n    }\n  }\n\n  private replaceVideoTrack(track: MediaStreamTrack) {\n    if (!this.plugin) return;\n    try {\n      this.plugin.replaceTracks({\n        tracks: [{ type: \"video\", capture: track, recv: false }]\n      });\n      this.connectionEngine.onLocalTrackSignal(track, track.enabled !== false);\n      this.media.setLocalTrack(this.localVideo, track);\n      this.syncPreferredAudioTrack();\n    } catch (e: any) {\n      Logger.error(\"replaceVideoTrack failed\", e);\n      Logger.setStatus(\"Video track switch failed.\");\n    }\n  }\n\n  private getPreferredAudioTrack(): MediaStreamTrack | null {\n    if (this.screenEnabled && this.mixedAudioTrack && this.mixedAudioTrack.readyState === \"live\") {\n      return this.mixedAudioTrack;\n    }\n    const mic = this.cameraStream?.getAudioTracks().find((t: MediaStreamTrack) => t.readyState === \"live\") ?? null;\n    return mic;\n  }\n\n  private syncPreferredAudioTrack(): void {\n    if (!this.plugin) return;\n    let preferred = this.getPreferredAudioTrack();\n    if (!preferred && this.screenEnabled) {\n      this.clearMixedAudioResources();\n      preferred = this.getPreferredAudioTrack();\n    }\n    if (!preferred) return;\n    preferred.enabled = true;\n    this.syncPublishedAudioTrack(preferred);\n  }\n\n  private async ensureOutgoingAudio(opts?: { camera?: MediaStream | null; screen?: MediaStream | null }): Promise<void> {\n    if (!this.plugin) return;\n    const camera = opts?.camera ?? await this.ensureCameraStream();\n    if (this.screenEnabled) {\n      const screen = opts?.screen ?? this.screenManager.getStream();\n      const micTrack = camera.getAudioTracks()[0] ?? null;\n      const displayAudioTrack = screen?.getAudioTracks()[0] ?? null;\n      const outgoing = await this.resolveScreenShareAudioTrack(micTrack, displayAudioTrack);\n      if (outgoing) {\n        outgoing.enabled = true;\n        this.syncPublishedAudioTrack(outgoing);\n      } else {\n        Logger.warn(\"No outgoing audio track available during screen share.\");\n      }\n      return;\n    }\n\n    if (this.mixedAudioTrack) {\n      this.clearMixedAudioResources();\n    }\n    const micTrack = camera.getAudioTracks()[0] ?? null;\n    if (micTrack) {\n      micTrack.enabled = true;\n      this.syncPublishedAudioTrack(micTrack);\n    } else {\n      Logger.warn(\"No microphone track available for outgoing audio.\");\n    }\n  }\n\n  private syncPublishedAudioTrack(track: MediaStreamTrack) {\n    if (!this.plugin) return;\n    try {\n      this.plugin.replaceTracks({\n        tracks: [{ type: \"audio\", capture: track, recv: false }]\n      });\n    } catch (e: any) {\n      Logger.error(\"replaceAudioTrack failed\", e);\n    }\n  }\n\n  private async resolveScreenShareAudioTrack(\n    micTrack: MediaStreamTrack | null,\n    displayAudioTrack: MediaStreamTrack | null\n  ): Promise<MediaStreamTrack | null> {\n    this.clearMixedAudioResources();\n    if (!micTrack && !displayAudioTrack) return null;\n    if (!micTrack) return displayAudioTrack;\n    if (!displayAudioTrack) return micTrack;\n\n    try {\n      const ctx = new AudioContext();\n      const destination = ctx.createMediaStreamDestination();\n      const micSource = ctx.createMediaStreamSource(new MediaStream([micTrack]));\n      const displaySource = ctx.createMediaStreamSource(new MediaStream([displayAudioTrack]));\n      micSource.connect(destination);\n      displaySource.connect(destination);\n      const mixedTrack = destination.stream.getAudioTracks()[0] ?? null;\n      if (!mixedTrack) {\n        void ctx.close();\n        return micTrack;\n      }\n      this.mixedAudioContext = ctx;\n      this.mixedAudioTrack = mixedTrack;\n      return mixedTrack;\n    } catch (e: any) {\n      Logger.error(\"Screen-share audio mixing failed; using microphone only\", e);\n      return micTrack;\n    }\n  }\n\n  private clearMixedAudioResources() {\n    if (this.mixedAudioTrack) {\n      try {\n        this.mixedAudioTrack.stop();\n      } catch (e: any) {\n        Logger.error(\"Stopping mixed audio track failed\", e);\n      }\n    }\n    this.mixedAudioTrack = null;\n    if (this.mixedAudioContext) {\n      this.mixedAudioContext.close().catch((e: any) => {\n        Logger.error(\"Closing mixed audio context failed\", e);\n      });\n    }\n    this.mixedAudioContext = null;\n  }\n\n  private startMediaStatsLoop() {\n    this.stopMediaStatsLoop();\n    this.metricsPrevAt = 0;\n    this.outboundPrev = { audio: 0, video: 0 };\n    this.outboundAudioPacketsPrev = 0;\n    this.inboundPrev = { audio: 0, video: 0 };\n    this.remoteInboundPrev = { audioPackets: 0, videoPackets: 0 };\n    this.remoteReceiveGrowthAt = { audio: 0, video: 0 };\n    this.localReceiveGrowthAt = { audio: 0, video: 0 };\n    this.remoteVideoPlaybackAt = 0;\n    this.lastRemoteVideoTime = 0;\n    this.localAudioPlaybackAt = 0;\n\n    this.mediaStatsTimer = window.setInterval(() => {\n      void this.sampleMediaStats();\n    }, APP_CONFIG.mediaTelemetry.sampleIntervalMs);\n    void this.sampleMediaStats();\n  }\n\n  private stopMediaStatsLoop() {\n    if (this.mediaStatsTimer !== null) {\n      window.clearInterval(this.mediaStatsTimer);\n      this.mediaStatsTimer = null;\n    }\n    this.bus.emit<MediaIoSnapshot>(\"media-io\", {\n      bytes: { audioSent: 0, audioReceived: 0, videoSent: 0, videoReceived: 0 },\n      quality: { localJitterMs: null, localLossPct: null, remoteJitterMs: null, remoteLossPct: null },\n      issues: [],\n      matrix: {\n        remoteReceivingYourVideo: \"Unknown\",\n        remoteReceivingYourAudio: \"Unknown\",\n        remoteAudioPlaybackStatus: \"Unknown\",\n        remoteVideoPlaybackStatus: \"Unknown\",\n        localReceivingYourVideo: \"Unknown\",\n        localReceivingYourAudio: \"Unknown\",\n        localAudioPlaybackStatus: \"Unknown\",\n        localVideoPlaybackStatus: \"Unknown\"\n      },\n      ts: Date.now()\n    });\n  }\n\n  private async sampleMediaStats() {\n    const now = Date.now();\n    const publisher = this.publisherPc;\n    const subscribers = Array.from(this.subscriberPcs.values());\n    const remoteCount = this.roster.snapshot(this.currentRoomId ?? 0).participantIds\n      .filter((id: number) => id !== this.selfId)\n      .length;\n    const remoteMs = this.remoteVideo.srcObject as MediaStream | null;\n    const hasLiveRemoteTrack = !!remoteMs?.getTracks().some((t: MediaStreamTrack) => t.readyState === \"live\");\n    const remotePresent = remoteCount > 0 || subscribers.length > 0 || hasLiveRemoteTrack;\n    if (!publisher && subscribers.length === 0) {\n      this.bus.emit<MediaIoSnapshot>(\"media-io\", {\n        bytes: { audioSent: 0, audioReceived: 0, videoSent: 0, videoReceived: 0 },\n        quality: { localJitterMs: null, localLossPct: null, remoteJitterMs: null, remoteLossPct: null },\n        issues: [],\n        matrix: {\n          remoteReceivingYourVideo: \"Unknown\",\n          remoteReceivingYourAudio: \"Unknown\",\n          remoteAudioPlaybackStatus: \"Unknown\",\n          remoteVideoPlaybackStatus: \"Unknown\",\n          localReceivingYourVideo: \"Unknown\",\n          localReceivingYourAudio: \"Unknown\",\n          localAudioPlaybackStatus: \"Unknown\",\n          localVideoPlaybackStatus: \"Unknown\"\n        },\n        ts: now\n      });\n      return;\n    }\n\n    const publisherMetrics = publisher ? await this.collectPublisherMetrics(publisher) : {\n      audioBytesSent: 0,\n      audioPacketsSent: 0,\n      videoBytesSent: 0,\n      remoteInboundAudioPacketsReceived: null as number | null,\n      remoteInboundVideoPacketsReceived: null as number | null,\n      localJitterMs: null as number | null,\n      localLossPct: null as number | null\n    };\n    const subscriberMetrics = await this.collectSubscriberMetrics(subscribers);\n\n    const prevAt = this.metricsPrevAt;\n    this.metricsPrevAt = now;\n    const audioSentDelta = Math.max(0, publisherMetrics.audioBytesSent - this.outboundPrev.audio);\n    const audioPacketsSentDelta = Math.max(0, publisherMetrics.audioPacketsSent - this.outboundAudioPacketsPrev);\n    const videoSentDelta = Math.max(0, publisherMetrics.videoBytesSent - this.outboundPrev.video);\n    const audioRecvDelta = Math.max(0, subscriberMetrics.audioBytesReceived - this.inboundPrev.audio);\n    const videoRecvDelta = Math.max(0, subscriberMetrics.videoBytesReceived - this.inboundPrev.video);\n    this.outboundPrev = { audio: publisherMetrics.audioBytesSent, video: publisherMetrics.videoBytesSent };\n    this.outboundAudioPacketsPrev = publisherMetrics.audioPacketsSent;\n    this.inboundPrev = { audio: subscriberMetrics.audioBytesReceived, video: subscriberMetrics.videoBytesReceived };\n\n    const localOutgoingAudioTrack = this.getPreferredAudioTrack();\n    const localOutgoingAudioActive = !!localOutgoingAudioTrack &&\n      localOutgoingAudioTrack.readyState === \"live\" &&\n      localOutgoingAudioTrack.enabled !== false &&\n      !(typeof this.plugin?.isAudioMuted === \"function\" && this.plugin.isAudioMuted());\n\n    let remoteAudioReceiveStatus: YesNoUnknown = \"Unknown\";\n    let remoteVideoReceiveStatus: YesNoUnknown = \"Unknown\";\n    if (remotePresent) {\n      if (publisherMetrics.remoteInboundAudioPacketsReceived === null) {\n        if (publisher && (audioSentDelta > 0 || audioPacketsSentDelta > 0)) this.remoteReceiveGrowthAt.audio = now;\n        if (!publisher) {\n          remoteAudioReceiveStatus = \"Unknown\";\n        } else if (this.remoteReceiveGrowthAt.audio > 0 && now - this.remoteReceiveGrowthAt.audio <= APP_CONFIG.mediaTelemetry.stallWindowMs) {\n          remoteAudioReceiveStatus = \"Yes\";\n        } else {\n          // Without remote-inbound stats we cannot reliably prove \"No\" while track is active.\n          remoteAudioReceiveStatus = localOutgoingAudioActive ? \"Unknown\" : \"No\";\n        }\n      } else {\n        const delta = publisherMetrics.remoteInboundAudioPacketsReceived - this.remoteInboundPrev.audioPackets;\n        if (delta > 0) this.remoteReceiveGrowthAt.audio = now;\n        remoteAudioReceiveStatus =\n          this.remoteReceiveGrowthAt.audio > 0 && now - this.remoteReceiveGrowthAt.audio <= APP_CONFIG.mediaTelemetry.stallWindowMs\n            ? \"Yes\"\n            : \"No\";\n      }\n      if (publisherMetrics.remoteInboundVideoPacketsReceived === null) {\n        if (publisher && videoSentDelta > 0) this.remoteReceiveGrowthAt.video = now;\n        remoteVideoReceiveStatus = publisher\n          ? (this.remoteReceiveGrowthAt.video > 0 && now - this.remoteReceiveGrowthAt.video <= APP_CONFIG.mediaTelemetry.stallWindowMs ? \"Yes\" : \"No\")\n          : \"Unknown\";\n      } else {\n        const delta = publisherMetrics.remoteInboundVideoPacketsReceived - this.remoteInboundPrev.videoPackets;\n        if (delta > 0) this.remoteReceiveGrowthAt.video = now;\n        remoteVideoReceiveStatus =\n          this.remoteReceiveGrowthAt.video > 0 && now - this.remoteReceiveGrowthAt.video <= APP_CONFIG.mediaTelemetry.stallWindowMs\n            ? \"Yes\"\n            : \"No\";\n      }\n    } else {\n      this.remoteReceiveGrowthAt.audio = 0;\n      this.remoteReceiveGrowthAt.video = 0;\n    }\n    this.remoteInboundPrev = {\n      audioPackets: publisherMetrics.remoteInboundAudioPacketsReceived ?? this.remoteInboundPrev.audioPackets,\n      videoPackets: publisherMetrics.remoteInboundVideoPacketsReceived ?? this.remoteInboundPrev.videoPackets\n    };\n\n    if (videoRecvDelta > 0) this.localReceiveGrowthAt.video = now;\n    if (audioRecvDelta > 0) this.localReceiveGrowthAt.audio = now;\n    const localReceivingVideo: YesNoUnknown = remotePresent\n      ? (this.localReceiveGrowthAt.video > 0 && now - this.localReceiveGrowthAt.video <= APP_CONFIG.mediaTelemetry.stallWindowMs ? \"Yes\" : \"No\")\n      : \"Unknown\";\n    const localReceivingAudio: YesNoUnknown = remotePresent\n      ? (this.localReceiveGrowthAt.audio > 0 && now - this.localReceiveGrowthAt.audio <= APP_CONFIG.mediaTelemetry.stallWindowMs ? \"Yes\" : \"No\")\n      : \"Unknown\";\n    const localVideoPlaybackStatus = this.deriveLocalVideoPlaybackStatus(now);\n    const localAudioPlaybackStatus = this.deriveLocalAudioPlaybackStatus(now, audioRecvDelta, subscriberMetrics.hasAudioTrack);\n    const peerTelemetry = this.pickFreshPeerTelemetry(now);\n    const remoteAudioPlaybackStatus = peerTelemetry?.audioPlaybackStatus ?? \"Unknown\";\n    const remoteVideoPlaybackStatus = peerTelemetry?.videoPlaybackStatus ?? \"Unknown\";\n\n    const issues: string[] = [];\n    if (remoteAudioReceiveStatus === \"No\" && remotePresent && localOutgoingAudioActive) {\n      issues.push(\"your audio not working\");\n    }\n    if (localReceivingAudio === \"No\" && remotePresent) {\n      issues.push(\"participant audio not working\");\n    }\n    if (localReceivingVideo === \"No\" && remotePresent) {\n      issues.push(\"participant video not working\");\n    }\n\n    const snapshot: MediaIoSnapshot = {\n      bytes: {\n        audioSent: publisherMetrics.audioBytesSent,\n        audioReceived: subscriberMetrics.audioBytesReceived,\n        videoSent: publisherMetrics.videoBytesSent,\n        videoReceived: subscriberMetrics.videoBytesReceived\n      },\n      quality: {\n        localJitterMs: publisherMetrics.localJitterMs,\n        localLossPct: publisherMetrics.localLossPct,\n        remoteJitterMs: subscriberMetrics.remoteJitterMs,\n        remoteLossPct: subscriberMetrics.remoteLossPct\n      },\n      issues,\n      matrix: {\n        remoteReceivingYourVideo: remoteVideoReceiveStatus,\n        remoteReceivingYourAudio: remoteAudioReceiveStatus,\n        remoteAudioPlaybackStatus,\n        remoteVideoPlaybackStatus,\n        localReceivingYourVideo: localReceivingVideo,\n        localReceivingYourAudio: localReceivingAudio,\n        localAudioPlaybackStatus,\n        localVideoPlaybackStatus\n      },\n      ts: now\n    };\n    this.bus.emit(\"media-io\", snapshot);\n    if (prevAt > 0) {\n      this.sendPeerTelemetry({\n        type: \"vcx-peer-telemetry\",\n        ts: now,\n        audioPlaybackStatus: localAudioPlaybackStatus,\n        videoPlaybackStatus: localVideoPlaybackStatus\n      });\n    }\n  }\n\n  private async collectPublisherMetrics(pc: RTCPeerConnection): Promise<{\n    audioBytesSent: number;\n    audioPacketsSent: number;\n    videoBytesSent: number;\n    remoteInboundAudioPacketsReceived: number | null;\n    remoteInboundVideoPacketsReceived: number | null;\n    localJitterMs: number | null;\n    localLossPct: number | null;\n  }> {\n    try {\n      const report = await pc.getStats();\n      let audioBytesSent = 0;\n      let audioPacketsSent = 0;\n      let videoBytesSent = 0;\n      let remoteInboundAudioPacketsReceived: number | null = null;\n      let remoteInboundVideoPacketsReceived: number | null = null;\n      let localJitterMs: number | null = null;\n      let lost = 0;\n      let total = 0;\n\n      report.forEach((s: RTCStats) => {\n        const anyS = s as any;\n        if (s.type === \"outbound-rtp\" && !anyS.isRemote) {\n          if (anyS.kind === \"audio\" || anyS.mediaType === \"audio\") {\n            if (typeof anyS.bytesSent === \"number\") audioBytesSent += anyS.bytesSent;\n            if (typeof anyS.packetsSent === \"number\") audioPacketsSent += anyS.packetsSent;\n          }\n          if (anyS.kind === \"video\" || anyS.mediaType === \"video\") {\n            if (typeof anyS.bytesSent === \"number\") videoBytesSent += anyS.bytesSent;\n          }\n        }\n        if (s.type === \"remote-inbound-rtp\") {\n          if (typeof anyS.jitter === \"number\") {\n            const jitterMs = anyS.jitter * 1000;\n            localJitterMs = localJitterMs === null ? jitterMs : Math.max(localJitterMs, jitterMs);\n          }\n          const packetsLost = typeof anyS.packetsLost === \"number\" ? anyS.packetsLost : 0;\n          const packetsReceived = typeof anyS.packetsReceived === \"number\" ? anyS.packetsReceived : 0;\n          lost += packetsLost;\n          total += packetsLost + packetsReceived;\n          if (anyS.kind === \"audio\" || anyS.mediaType === \"audio\") {\n            if (typeof anyS.packetsReceived === \"number\") {\n              remoteInboundAudioPacketsReceived = anyS.packetsReceived;\n            }\n          }\n          if (anyS.kind === \"video\" || anyS.mediaType === \"video\") {\n            if (typeof anyS.packetsReceived === \"number\") {\n              remoteInboundVideoPacketsReceived = anyS.packetsReceived;\n            }\n          }\n        }\n      });\n      return {\n        audioBytesSent,\n        audioPacketsSent,\n        videoBytesSent,\n        remoteInboundAudioPacketsReceived,\n        remoteInboundVideoPacketsReceived,\n        localJitterMs,\n        localLossPct: total > 0 ? (lost / total) * 100 : null\n      };\n    } catch (e: any) {\n      Logger.error(\"Publisher metrics collection failed\", e);\n      return {\n        audioBytesSent: this.outboundPrev.audio,\n        audioPacketsSent: this.outboundAudioPacketsPrev,\n        videoBytesSent: this.outboundPrev.video,\n        remoteInboundAudioPacketsReceived: null,\n        remoteInboundVideoPacketsReceived: null,\n        localJitterMs: null,\n        localLossPct: null\n      };\n    }\n  }\n\n  private async collectSubscriberMetrics(subscribers: RTCPeerConnection[]): Promise<{\n    audioBytesReceived: number;\n    videoBytesReceived: number;\n    remoteJitterMs: number | null;\n    remoteLossPct: number | null;\n    hasAudioTrack: boolean;\n  }> {\n    let audioBytesReceived = 0;\n    let videoBytesReceived = 0;\n    let remoteJitterMs: number | null = null;\n    let lost = 0;\n    let total = 0;\n    let hasAudioTrack = false;\n\n    await Promise.all(subscribers.map(async (pc: RTCPeerConnection) => {\n      try {\n        const report = await pc.getStats();\n        report.forEach((s: RTCStats) => {\n          const anyS = s as any;\n          if (s.type === \"inbound-rtp\" && !anyS.isRemote) {\n            if (anyS.kind === \"audio\" || anyS.mediaType === \"audio\") {\n              hasAudioTrack = true;\n              if (typeof anyS.bytesReceived === \"number\") audioBytesReceived += anyS.bytesReceived;\n            }\n            if (anyS.kind === \"video\" || anyS.mediaType === \"video\") {\n              if (typeof anyS.bytesReceived === \"number\") videoBytesReceived += anyS.bytesReceived;\n            }\n            if (typeof anyS.jitter === \"number\") {\n              const jitterMs = anyS.jitter * 1000;\n              remoteJitterMs = remoteJitterMs === null ? jitterMs : Math.max(remoteJitterMs, jitterMs);\n            }\n            const packetsLost = typeof anyS.packetsLost === \"number\" ? anyS.packetsLost : 0;\n            const packetsReceived = typeof anyS.packetsReceived === \"number\" ? anyS.packetsReceived : 0;\n            lost += packetsLost;\n            total += packetsLost + packetsReceived;\n          }\n        });\n      } catch (e: any) {\n        Logger.error(\"Subscriber metrics collection failed\", e);\n      }\n    }));\n\n    return {\n      audioBytesReceived,\n      videoBytesReceived,\n      remoteJitterMs,\n      remoteLossPct: total > 0 ? (lost / total) * 100 : null,\n      hasAudioTrack\n    };\n  }\n\n  private deriveLocalVideoPlaybackStatus(now: number): PlaybackState {\n    const ms = this.remoteVideo.srcObject as MediaStream | null;\n    const hasTrack = !!ms?.getVideoTracks().some(t => t.readyState === \"live\" && t.enabled !== false);\n    if (!hasTrack) return \"Unknown\";\n    const currentTime = Number.isFinite(this.remoteVideo.currentTime) ? this.remoteVideo.currentTime : 0;\n    if (currentTime > this.lastRemoteVideoTime + 0.03) {\n      this.lastRemoteVideoTime = currentTime;\n      this.remoteVideoPlaybackAt = now;\n      return \"Active\";\n    }\n    if (this.remoteVideoPlaybackAt === 0 && currentTime > 0) {\n      this.remoteVideoPlaybackAt = now;\n      return \"Active\";\n    }\n    if (this.remoteVideoPlaybackAt > 0 && now - this.remoteVideoPlaybackAt <= APP_CONFIG.mediaTelemetry.stallWindowMs) {\n      return \"Active\";\n    }\n    return \"Stalled\";\n  }\n\n  private deriveLocalAudioPlaybackStatus(now: number, audioRecvDelta: number, hasAudioTrack: boolean): PlaybackState {\n    if (!hasAudioTrack) return \"Unknown\";\n    if (audioRecvDelta > 0) {\n      this.localAudioPlaybackAt = now;\n      return \"Active\";\n    }\n    if (this.localAudioPlaybackAt > 0 && now - this.localAudioPlaybackAt <= APP_CONFIG.mediaTelemetry.stallWindowMs) {\n      return \"Active\";\n    }\n    return \"Stalled\";\n  }\n\n  private pickFreshPeerTelemetry(now: number): PeerPlaybackTelemetry | null {\n    for (const payload of this.peerTelemetryByFeed.values()) {\n      if (now - payload.ts <= APP_CONFIG.mediaTelemetry.peerTelemetryFreshnessMs) {\n        return payload;\n      }\n    }\n    return null;\n  }\n\n  private sendPeerTelemetry(payload: PeerPlaybackTelemetry) {\n    if (!APP_CONFIG.mediaTelemetry.enablePeerTelemetry) return;\n    const channel = this.plugin?.data;\n    if (typeof channel !== \"function\") return;\n    try {\n      channel.call(this.plugin, { text: JSON.stringify(payload) });\n    } catch {}\n  }\n}\n","// import {Dom} from \"./Dom\";\n// import {CallController} from \"../managers/CallController\";\n\nclass UIController {\n\n  private getQueryParam(key: string): string | null {\n    try {\n      return new URLSearchParams(window.location.search).get(key);\n    } catch {\n      return null;\n    }\n  }\n\n  private logger: Logger;\n  private bus = new EventBus();\n  private controller: CallController;\n\n  private btnMute = document.getElementById(\"btnMute\") as HTMLButtonElement;\n  private btnUnpublish = document.getElementById(\"btnUnpublish\") as HTMLButtonElement;\n  private btnLeave = document.getElementById(\"btnLeave\") as HTMLButtonElement;\n  private btnReconnect = document.getElementById(\"btnReconnect\") as HTMLButtonElement;\n  private btnScreen = document.getElementById(\"btnScreen\") as HTMLButtonElement;\n  private btnVB = document.getElementById(\"btnVB\") as HTMLButtonElement;\n\n  //  NEW\n  private btnRecord = document.getElementById(\"btnRecord\") as HTMLButtonElement;\n\n  private lastCfg: JoinConfig | null = null;\n\n  private bridge = new ParentBridge();\n  private net = new NetworkQualityManager();\n  private localVideoEl = document.getElementById(\"localVideo\") as HTMLVideoElement;\n  private remoteVideoEl = document.getElementById(\"remoteVideo\") as HTMLVideoElement;\n  private remoteFallback = document.getElementById(\"remoteFallback\") as HTMLDivElement;\n\n  private localOverlay = document.getElementById(\"localOverlay\") as HTMLDivElement;\n  private remoteOverlay = document.getElementById(\"remoteOverlay\") as HTMLDivElement;\n  private endedOverlay = document.getElementById(\"endedOverlay\") as HTMLDivElement;\n\n  private localQ = document.getElementById(\"localQuality\") as HTMLDivElement;\n  private remoteQ = document.getElementById(\"remoteQuality\") as HTMLDivElement;\n  private localQD = document.getElementById(\"localQualityDetails\") as HTMLDivElement;\n  private remoteQD = document.getElementById(\"remoteQualityDetails\") as HTMLDivElement;\n  private callMeta = document.getElementById(\"callMeta\") as HTMLDivElement;\n  private mediaIoBytes = document.getElementById(\"mediaIoBytes\") as HTMLDivElement;\n  private mediaIoIssues = document.getElementById(\"mediaIoIssues\") as HTMLDivElement;\n  private mRemoteRecvVideo = document.getElementById(\"mRemoteRecvVideo\") as HTMLDivElement;\n  private mRemoteRecvAudio = document.getElementById(\"mRemoteRecvAudio\") as HTMLDivElement;\n  private mRemoteAudioPlayback = document.getElementById(\"mRemoteAudioPlayback\") as HTMLDivElement;\n  private mRemoteVideoPlayback = document.getElementById(\"mRemoteVideoPlayback\") as HTMLDivElement;\n  private mLocalRecvVideo = document.getElementById(\"mLocalRecvVideo\") as HTMLDivElement;\n  private mLocalRecvAudio = document.getElementById(\"mLocalRecvAudio\") as HTMLDivElement;\n  private mLocalAudioPlayback = document.getElementById(\"mLocalAudioPlayback\") as HTMLDivElement;\n  private mLocalVideoPlayback = document.getElementById(\"mLocalVideoPlayback\") as HTMLDivElement;\n\n  private audioMuted = false;\n  private videoMuted = false;\n  private ended = false;\n  private readonly userType = this.resolveUserType();\n  private readonly canRecord = this.userType === \"agent\";\n  private folderPath:string = APP_CONFIG.recording.folderPath;\n\n  //  recording state\n  private recording = false;\n  private renderedParticipantCount = 0;\n  private lastRemoteVideoTime = 0;\n  private remoteVideoFrameProgressAt = 0;\n  private connectionStatus: ConnectionStatusView | null = null;\n  private remoteVideoMonitorTimer: number | null = null;\n\n  constructor() {\n    const qn = this.getQueryParam(\"name\");\n    if (qn) Logger.setUserName(qn);\n\n    Logger.user(\"UI loaded. Initializing controllers...\");\n    Logger.flow(\"DOMContentLoaded  UIController()\");\n\n    this.logger = new Logger(\n      document.getElementById(\"statusLine\") as HTMLElement,\n      document.getElementById(\"sessionInfo\") as HTMLElement\n    );\n\n    const localVideo = this.localVideoEl;\n    const remoteVideo = this.remoteVideoEl;\n\n    this.controller = new CallController(this.bus, localVideo, remoteVideo);\n    this.applyRecordingAccess();\n\n    this.bus.on<boolean>(\"joined\", j=>{\n        this.setJoinedState(j);\n        console.log(\"VCX_JOINED=\" + j);\n        this.updateDebugState({\n          joined: j\n        });\n    });\n\n    this.bus.on<boolean>(\"mute-changed\", muted => {\n      this.btnMute.innerHTML =\n        muted\n          ? '<i class=\"fa-solid fa-microphone-slash\"></i>'\n          : '<i class=\"fa-solid fa-microphone\"></i>';\n    });\n    this.bus.on<boolean>(\"video-mute-changed\", muted => {\n      this.videoMuted = muted;\n      this.btnUnpublish.classList.toggle(\"danger\", muted);\n      this.btnUnpublish.innerHTML =\n        muted\n          ? '<i class=\"fa-solid fa-video-slash\"></i>'\n          : '<i class=\"fa-solid fa-video\"></i>';\n      this.applyConnectionOverlays();\n    });\n\n    this.bus.on<boolean>(\"screen-changed\", on => {\n      this.btnScreen.title = on ? \"Stop Screen Share\" : \"Start Screen Share\";\n    });\n\n    this.bus.on<boolean>(\"vb-changed\", on => {\n      this.btnVB.title = on ? \"Disable Virtual Background\" : \"Enable Virtual Background\";\n    });\n    this.bus.on<boolean>(\"recording-changed\", isRecording => {\n        this.recording = isRecording;\n        this.updateRecordUI();\n        this.updateDebugState({\n          recording: isRecording\n        });\n        this.bridge.emit({\n          type: \"RECORDING_CHANGED\",\n          recording: isRecording\n        });\n    });\n\n    this.bus.on<any>(\"participants\", (snapshot) => {\n        const count = snapshot.participantIds.length;\n        Logger.user(`Roster participants count: ${count}`);\n        // SIMPLE LOG (automation-friendly)\n        console.log(\"VCX_ROSTER_PARTICIPANTS=\" + count);\n        this.updateDebugState({\n          rosterParticipants: count\n        });\n    });\n    this.bus.on<any>(\"telemetry-context\", (ctx) => {\n      this.updateDebugState({\n        callId: ctx?.callId,\n        roomId: ctx?.roomId,\n        participantId: ctx?.participantId\n      });\n    });\n    this.bus.on<any>(\"connectivity\", (s) => {\n        this.updateDebugState({\n          iceState: s.ice,\n          signalingState: s.signaling,\n          connectionState: s.connection\n        });\n    });\n    this.bus.on<ConnectionStatusView>(\"connection-status\", (status) => {\n      this.renderConnectionStatus(status);\n    });\n    this.bus.on<MediaIoSnapshot>(\"media-io\", (stats) => {\n      this.renderMediaIo(stats);\n    });\n    this.bus.on<any>(\"call-ended\", (payload) => {\n      Logger.user(`Call ended event received: ${payload?.reason || \"unknown\"}`);\n      this.setEndedState(true);\n    });\n\n    this.wire();\n    this.setupNetworkUI();\n    this.setupParentBridge();\n    this.setupRemoteFallbackMonitor();\n    this.autoJoin();\n  }\n\n  private wire() {\n\n    // AUDIO\n    this.btnMute.onclick = () => {\n      Logger.user(\"Audio button clicked  toggle mute\");\n      this.controller.toggleMute();\n\n      this.audioMuted = !this.audioMuted;\n      this.btnMute.classList.toggle(\"danger\", this.audioMuted);\n      this.applyConnectionOverlays();\n\n      this.bridge.emit({ type: \"AUDIO_MUTED\", muted: this.audioMuted });\n    };\n\n    // VIDEO\n    this.btnUnpublish.onclick = async () => {\n      Logger.user(\"Video button clicked\");\n      if (this.btnUnpublish.disabled) return;\n      this.btnUnpublish.disabled = true;\n      try {\n        const enabled = await this.controller.setVideoEnabled(this.videoMuted);\n        this.videoMuted = !enabled;\n      } finally {\n        if (!this.ended) this.btnUnpublish.disabled = false;\n      }\n      this.applyConnectionOverlays();\n\n      this.bridge.emit({ type: \"VIDEO_MUTED\", muted: this.videoMuted });\n    };\n\n    // LEAVE / START\n    this.btnLeave.onclick = () => {\n\n      if (!this.ended) {\n        Logger.user(\"End button clicked\");\n        this.controller.leave();\n        this.setEndedState(true);\n\n        this.bridge.emit({ type: \"CALL_ENDED\" });\n      } else {\n        Logger.user(\"Start button clicked\");\n        this.autoJoin();\n      }\n    };\n\n    this.btnReconnect.onclick = () => this.reconnect();\n\n    this.btnScreen.onclick = async () => {\n      if (this.btnScreen.disabled) return;\n      this.btnScreen.disabled = true;\n      try {\n        await this.controller.toggleScreenShare();\n      } finally {\n        if (!this.ended) this.btnScreen.disabled = false;\n      }\n    };\n\n    this.btnVB.onclick = async () => {\n      if (this.btnVB.disabled) return;\n      this.btnVB.disabled = true;\n      try {\n        await this.controller.toggleVirtualBackground();\n      } finally {\n        if (!this.ended) this.btnVB.disabled = false;\n      }\n    };\n\n    //  RECORD BUTTON\n    if (this.btnRecord) {\n      this.btnRecord.onclick = () => {\n        if (this.recording) {\n          this.stopRecording(\"manual\");\n        } else {\n          this.startRecording(\"manual\");\n        }\n      };\n    }\n  }\n\n  private resolveUserType(): \"agent\" | \"customer\" {\n    const raw =\n      this.getQueryParam(\"user_type\") ??\n      this.getQueryParam(\"usertpye\") ??\n      this.getQueryParam(\"usertype\") ??\n      \"\";\n    return raw.trim().toLowerCase() === \"agent\" ? \"agent\" : \"customer\";\n  }\n\n  private applyRecordingAccess() {\n    if (!this.btnRecord) return;\n    if (this.canRecord) return;\n    this.btnRecord.style.display = \"none\";\n    this.btnRecord.disabled = true;\n  }\n\n  private syncAutoRecordingByParticipants(participantCount: number) {\n    const shouldRecord = participantCount === 2;\n\n    if (shouldRecord && !this.recording) {\n      this.startRecording(\"auto\");\n      return;\n    }\n\n    if (!shouldRecord && this.recording) {\n      this.stopRecording(\"auto\");\n    }\n  }\n\n  private startRecording(source: \"manual\" | \"auto\") {\n    if (!this.canRecord) {\n      Logger.user(`Recording blocked for user_type=${this.userType}`);\n      return;\n    }\n    if (this.renderedParticipantCount !== 2) {\n      Logger.setStatus(\"Recording requires both participants on live video.\");\n      Logger.user(`Recording blocked: rendered participants=${this.renderedParticipantCount}, required=2`);\n      return;\n    }\n    if (this.recording) return;\n\n    const rid = this.createRecordingId();\n    Logger.user(`${source} start recording`);\n    this.controller.startRecording(rid);\n  }\n\n  private stopRecording(source: \"manual\" | \"auto\") {\n    if (!this.recording) return;\n\n    Logger.user(`${source} stop recording`);\n    this.controller.stopRecording();\n  }\n  private createRecordingId(): string{\n    const participantId = this.lastCfg?.participantId;\n    const recordingId = Number.isFinite(participantId as number)\n      ? Number(participantId)\n      : Math.floor(100000 + Math.random() * 900000);\n    // Build Janus recording basename\n    const rid = `${this.folderPath}/${recordingId}/rec_${Date.now()}`;\n    Logger.user(`Recording generated -> id=${recordingId}, rid=${rid}`);\n    return rid;\n  }\n\n  private updateRecordUI() {\n    if (!this.btnRecord) return;\n\n    if (this.recording) {\n      this.btnRecord.classList.add(\"danger\");\n      this.btnRecord.innerHTML =\n        '<i class=\"fa-solid fa-stop\"></i>';\n      this.btnRecord.title = \"Stop Recording\";\n    } else {\n      this.btnRecord.classList.remove(\"danger\");\n      this.btnRecord.innerHTML =\n        '<i class=\"fa-solid fa-circle\"></i>';\n      this.btnRecord.title = \"Start Recording\";\n    }\n  }\n\n  private setEndedState(ended: boolean) {\n    this.ended = ended;\n    this.endedOverlay.style.display = ended ? \"flex\" : \"none\";\n    this.renderRemoteFallback();\n    if (ended) {\n      this.btnLeave.innerHTML = '<i class=\"fa-solid fa-play\"></i>';\n      this.btnLeave.title = \"Start\";\n      this.btnLeave.disabled = false;\n      return;\n    }\n    this.btnLeave.innerHTML = '<i class=\"fa-solid fa-phone-slash\"></i>';\n    this.btnLeave.title = \"End\";\n  }\n\n  private autoJoin() {\n    const cfg = UrlConfig.buildJoinConfig();\n    this.lastCfg = cfg;\n    this.recording = false;\n    this.renderedParticipantCount = 0;\n    this.lastRemoteVideoTime = 0;\n    this.remoteVideoFrameProgressAt = 0;\n    this.updateRecordUI();\n    this.renderCallMeta(cfg);\n\n    Logger.setStatus(`Joining... roomId=${cfg.roomId}, name=${cfg.display}${cfg.participantId ? `, participantId=${cfg.participantId}` : \"\"}`);\n\n    this.audioMuted = false;\n    this.videoMuted = false;\n    this.setEndedState(false);\n    this.applyConnectionOverlays();\n\n    this.controller.join(cfg);\n    this.bridge.emit({ type: \"CALL_STARTED\" });\n  }\n\n  private renderCallMeta(cfg: JoinConfig) {\n    if (!this.callMeta) return;\n    this.callMeta.textContent = `RoomId: ${cfg.roomId} | Name: ${cfg.display}${cfg.participantId ? ` | ParticipantId: ${cfg.participantId}` : \"\"}`;\n  }\n\n  private reconnect() {\n    if (!this.lastCfg) return;\n\n    this.controller.leave();\n    this.controller.markRetrying();\n    this.renderRemoteFallback();\n\n    // safer Janus reconnect\n    setTimeout(() => {\n      this.controller.join(this.lastCfg!);\n    }, APP_CONFIG.call.reconnectDelayMs);\n  }\n\n  private setJoinedState(joined: boolean) {\n    [\n      this.btnMute,\n      this.btnUnpublish,\n      this.btnReconnect,\n      this.btnScreen,\n      this.btnVB\n    ].forEach(b => b && (b.disabled = !joined));\n\n    this.btnLeave.disabled = this.ended ? false : !joined;\n\n    if (this.btnRecord) {\n      this.btnRecord.disabled = !joined || !this.canRecord;\n    }\n  }\n\n  private getLocalBaseOverlayText(): string {\n    if (this.videoMuted) return \"video muted\";\n    if (this.audioMuted) return \"audio muted\";\n    return \"Local\";\n  }\n\n  private getRemoteBaseOverlayText(): string {\n    return \"Remote\";\n  }\n\n  private applyConnectionOverlays() {\n    const localBase = this.getLocalBaseOverlayText();\n    const remoteBase = this.getRemoteBaseOverlayText();\n    const status = this.connectionStatus;\n\n    if (!status) {\n      this.localOverlay.innerText = localBase;\n      this.remoteOverlay.innerText = remoteBase;\n      return;\n    }\n\n    if (status.owner === \"LOCAL\") {\n      this.localOverlay.innerText = status.primaryText;\n      this.remoteOverlay.innerText = remoteBase;\n      return;\n    }\n\n    if (status.owner === \"REMOTE\") {\n      this.remoteOverlay.innerText = status.primaryText;\n      this.localOverlay.innerText = localBase;\n      return;\n    }\n\n    this.localOverlay.innerText = localBase;\n    this.remoteOverlay.innerText = remoteBase;\n  }\n\n  private renderConnectionStatus(status: ConnectionStatusView) {\n    const resolved = this.resolveVisibleConnectionStatus(status);\n    this.connectionStatus = resolved;\n    this.logger.setStatus(resolved.primaryText);\n    this.logger.setInfo(resolved.secondaryText);\n    this.applyConnectionOverlays();\n    this.renderRemoteFallback();\n\n    this.updateDebugState({\n      connectionOwner: resolved.owner,\n      connectionSeverity: resolved.severity,\n      connectionState: resolved.state\n    });\n  }\n\n  private resolveVisibleConnectionStatus(status: ConnectionStatusView): ConnectionStatusView {\n    // Keep hard failures visible as-is.\n    if (status.severity === \"error\" || status.state === \"FAILED\") {\n      return status;\n    }\n    const inSetupPhase = status.state === \"NEGOTIATING\" || status.state === \"WAITING_REMOTE\";\n    if (!inSetupPhase) {\n      return status;\n    }\n    // If both videos are actually live in the UI, present connected state.\n    if (this.hasLocalVideoTrack() && this.hasRemoteVideoTrack()) {\n      return {\n        owner: \"NEUTRAL\",\n        severity: \"info\",\n        state: \"CONNECTED\",\n        primaryText: \"Connected\",\n        secondaryText: \"Video and audio are live.\"\n      };\n    }\n    return status;\n  }\n\n  private setupRemoteFallbackMonitor() {\n    const refresh = () => {\n      this.refreshRenderedParticipantCount();\n      this.renderRemoteFallback();\n    };\n\n    this.localVideoEl.onloadeddata = refresh;\n    this.localVideoEl.onplaying = refresh;\n    this.localVideoEl.onemptied = refresh;\n    this.localVideoEl.onpause = refresh;\n    this.remoteVideoEl.onloadeddata = refresh;\n    this.remoteVideoEl.onplaying = refresh;\n    this.remoteVideoEl.onemptied = refresh;\n    this.remoteVideoEl.onpause = refresh;\n\n    if (this.remoteVideoMonitorTimer !== null) {\n      window.clearInterval(this.remoteVideoMonitorTimer);\n    }\n    this.remoteVideoMonitorTimer = window.setInterval(refresh, APP_CONFIG.ui.remoteFallbackRefreshMs);\n    refresh();\n  }\n\n  private hasLiveVideoTrack(videoEl: HTMLVideoElement): boolean {\n    const ms = videoEl.srcObject as MediaStream | null;\n    if (!ms) return false;\n    const tracks = ms.getVideoTracks();\n    if (!tracks || tracks.length === 0) return false;\n    return tracks.some(t => t.readyState === \"live\" && t.enabled !== false);\n  }\n\n  private hasRenderableVideoTrack(videoEl: HTMLVideoElement): boolean {\n    if (!this.hasLiveVideoTrack(videoEl)) return false;\n\n    const hasDecodedFrame =\n      videoEl.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA &&\n      videoEl.videoWidth > 0 &&\n      videoEl.videoHeight > 0;\n    const isPlaying = !videoEl.paused;\n    return hasDecodedFrame && isPlaying;\n  }\n\n  private hasLocalVideoTrack(): boolean {\n    // Local participant is considered present when local camera track is live.\n    return this.hasLiveVideoTrack(this.localVideoEl);\n  }\n\n  private hasRemoteVideoTrack(): boolean {\n    this.updateRemoteVideoProgress();\n    if (!this.hasRenderableVideoTrack(this.remoteVideoEl)) return false;\n    if (this.remoteVideoFrameProgressAt === 0) return false;\n    return Date.now() - this.remoteVideoFrameProgressAt <= APP_CONFIG.ui.remoteVideoStallThresholdMs;\n  }\n\n  private updateRemoteVideoProgress() {\n    const now = Date.now();\n    if (!this.hasLiveVideoTrack(this.remoteVideoEl)) {\n      this.lastRemoteVideoTime = 0;\n      this.remoteVideoFrameProgressAt = 0;\n      return;\n    }\n\n    const currentTime = Number.isFinite(this.remoteVideoEl.currentTime) ? this.remoteVideoEl.currentTime : 0;\n    if (currentTime + 0.01 < this.lastRemoteVideoTime) {\n      this.lastRemoteVideoTime = currentTime;\n      this.remoteVideoFrameProgressAt = 0;\n      return;\n    }\n\n    if (currentTime > this.lastRemoteVideoTime + 0.03) {\n      this.lastRemoteVideoTime = currentTime;\n      this.remoteVideoFrameProgressAt = now;\n      return;\n    }\n\n    if (this.remoteVideoFrameProgressAt === 0 && currentTime > 0) {\n      this.remoteVideoFrameProgressAt = now;\n    }\n  }\n\n  private refreshRenderedParticipantCount() {\n    this.updateRemoteVideoProgress();\n    const count =\n      (this.hasLocalVideoTrack() ? 1 : 0) +\n      (this.hasRemoteVideoTrack() ? 1 : 0);\n\n    if (count === this.renderedParticipantCount) return;\n    this.renderedParticipantCount = count;\n    Logger.user(`Rendered participants count: ${count}`);\n    console.log(\"VCX_PARTICIPANTS=\" + count);\n    this.updateDebugState({\n      participants: count,\n      participantsRendered: count\n    });\n    this.syncAutoRecordingByParticipants(count);\n  }\n\n  private renderRemoteFallback() {\n    if (!this.remoteFallback) return;\n\n    const showFallback = !this.ended && !this.hasRemoteVideoTrack();\n    this.remoteFallback.style.display = showFallback ? \"flex\" : \"none\";\n  }\n\n  private formatBytes(bytes: number): string {\n    if (!Number.isFinite(bytes) || bytes <= 0) return \"0B\";\n    if (bytes < 1024) return `${Math.floor(bytes)}B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)}KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(2)}MB`;\n  }\n\n  private formatQuality(v: number | null): string {\n    if (v === null || !Number.isFinite(v)) return \"n/a\";\n    return `${v.toFixed(1)}`;\n  }\n\n  private renderMediaIo(stats: MediaIoSnapshot) {\n    if (this.mediaIoBytes) {\n      this.mediaIoBytes.textContent =\n        `A(sent/recv): ${this.formatBytes(stats.bytes.audioSent)} / ${this.formatBytes(stats.bytes.audioReceived)} | ` +\n        `V(sent/recv): ${this.formatBytes(stats.bytes.videoSent)} / ${this.formatBytes(stats.bytes.videoReceived)}`;\n    }\n    if (this.mediaIoIssues) {\n      this.mediaIoIssues.textContent = stats.issues.length > 0\n        ? stats.issues.join(\" | \")\n        : \"\";\n    }\n\n    this.mRemoteRecvVideo.textContent = stats.matrix.remoteReceivingYourVideo;\n    this.mRemoteRecvAudio.textContent = stats.matrix.remoteReceivingYourAudio;\n    this.mRemoteAudioPlayback.textContent = stats.matrix.remoteAudioPlaybackStatus;\n    this.mRemoteVideoPlayback.textContent = stats.matrix.remoteVideoPlaybackStatus;\n    this.mLocalRecvVideo.textContent = stats.matrix.localReceivingYourVideo;\n    this.mLocalRecvAudio.textContent = stats.matrix.localReceivingYourAudio;\n    this.mLocalAudioPlayback.textContent = stats.matrix.localAudioPlaybackStatus;\n    this.mLocalVideoPlayback.textContent = stats.matrix.localVideoPlaybackStatus;\n\n    this.localQD.textContent =\n      `jitter=${this.formatQuality(stats.quality.localJitterMs)}ms loss=${this.formatQuality(stats.quality.localLossPct)}%`;\n    this.remoteQD.textContent =\n      `jitter=${this.formatQuality(stats.quality.remoteJitterMs)}ms loss=${this.formatQuality(stats.quality.remoteLossPct)}%`;\n  }\n\n  private setupNetworkUI() {\n    const toggle = (el: HTMLElement) =>\n      el.classList.toggle(\"show\");\n\n    this.localQ.onclick = () => toggle(this.localQD);\n    this.remoteQ.onclick = () => toggle(this.remoteQD);\n\n    this.net.start((l, r, d) => {\n      this.localQ.textContent = `Local: ${l}`;\n      this.remoteQ.textContent = `Remote: ${r}`;\n      this.localQD.textContent = d;\n      this.remoteQD.textContent = d;\n\n      Logger.net(`Local ${l} | Remote ${r} | ${d}`);\n\n      this.bridge.emit({\n        type: \"NETWORK_CHANGED\",\n        local: l,\n        remote: r\n      });\n    }, () => this.controller.getNetworkQualityPeers());\n  }\n\n  private setupParentBridge() {\n    this.bridge.onCommand((cmd: any) => {\n      switch (cmd.type) {\n        case \"START_CALL\":\n          this.controller.join(this.lastCfg!);\n          break;\n\n        case \"STOP_CALL\":\n          this.controller.leave();\n          this.setEndedState(true);\n          break;\n\n        case \"TOGGLE_AUDIO\":\n          this.btnMute.click();\n          break;\n\n        case \"TOGGLE_VIDEO\":\n          this.btnUnpublish.click();\n          break;\n\n        case \"RECONNECT\":\n          this.reconnect();\n          break;\n\n        //  recording events\n        case \"START_RECORDING\":\n          this.startRecording(\"manual\");\n          break;\n\n        case \"STOP_RECORDING\":\n          this.stopRecording(\"manual\");\n          break;\n\n        case \"TOGGLE_RECORDING\":\n          this.btnRecord.click();\n          break;\n      }\n    });\n  }\n  private updateDebugState(extra:any = {}) {\n    const dbg = (window as any).__vcxDebug || {};\n    (window as any).__vcxDebug = {\n      ...dbg,\n      ...extra,\n      timestamp: Date.now()\n    };\n\n    console.log(\"VCX_DEBUG\", (window as any).__vcxDebug);\n  }\n}\n\r\n","// src/app.ts\n// import {UIController} from \"./ui/UIController\";\nwindow.addEventListener(\"DOMContentLoaded\", () => {\n    console.log(\"page loaded\")\n     new UIController(); \n});\n"]}