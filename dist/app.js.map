{"version":3,"file":"app.js","sourceRoot":"","sources":["../src/AppConfig.ts","../src/core/Logger.ts","../src/core/EventBus.ts","../src/core/Types.ts","../src/core/UrlConfig.ts","../src/core/ConnectionMessages.ts","../src/core/ParentBridge.ts","../src/core/http/HttpClient.ts","../src/core/clients/ims/ImsClient.ts","../src/core/clients/ims/ims.types.ts","../src/core/http/Cookie.ts","../src/core/http/Correlation.ts","../src/core/http/HttpError.ts","../src/core/http/HttpTypes.ts","../src/managers/ParticipantRoster.ts","../src/managers/MediaManager.ts","../src/managers/VirtualBackgroundManager.ts","../src/managers/ScreenShareManager.ts","../src/managers/NetworkQualityManager.ts","../src/managers/ConnectionStatusEngine.ts","../src/managers/JanusGateway.ts","../src/managers/RemoteFeedManager.ts","../src/managers/CallController.ts","../src/ui/UIController.ts","../src/app.ts"],"names":[],"mappings":";AAEA,MAAM,kCAAkC,GAAG;IACzC,iBAAiB,EAAE;QACjB,qBAAqB,EAAE;YACrB;gBACE,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE;oBACL,KAAK,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;oBACzC,SAAS,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE;oBACtB,WAAW,EAAE,WAAW;iBACzB;aACF;YACD;gBACE,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE;oBACL,KAAK,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE;oBAC/B,SAAS,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE;oBACtB,WAAW,EAAE,WAAW;iBACzB;aACF;YACD,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;SAC7B;QACD,wBAAwB,EAAE;YACxB;gBACE,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE;oBACL,KAAK,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;oBACzC,SAAS,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE;oBACtB,WAAW,EAAE,WAAW;iBACzB;aACF;YACD;gBACE,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE;oBACL,KAAK,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE;oBAC/B,SAAS,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE;oBACtB,WAAW,EAAE,WAAW;iBACzB;aACF;YACD,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;SAC7B;QACD,wBAAwB,EAAE;YACxB;gBACE,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE;oBACL,KAAK,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE;oBACnB,SAAS,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE;oBACtB,UAAU,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE;iBAC9B;aACF;SACF;KACF;IACD,SAAS,EAAE;QACT,UAAU,EAAE;YACV;gBACE,IAAI,EAAE;oBACJ,0CAA0C;oBAC1C,2CAA2C;iBAC5C;gBACD,QAAQ,EAAE,mDAAmD;gBAC7D,UAAU,EAAE,8BAA8B;aAC3C;YACD;gBACE,IAAI,EAAE,CAAC,4BAA4B,CAAC;aACrC;SACF;KACF;IACD,YAAY,EAAE;QACZ,UAAU,EAAE;YACV;gBACE,GAAG,EAAE,0CAA0C;gBAC/C,QAAQ,EAAE,iDAAiD;gBAC3D,UAAU,EAAE,8BAA8B;aAC3C;YACD;gBACE,GAAG,EAAE,4BAA4B;aAClC;SACF;KACF;IACD,SAAS,EAAE;QACT,cAAc,EAAE,MAAM;KACvB;IACD,qBAAqB,EAAE;QACrB,gBAAgB,EAAE,GAAG;QACrB,QAAQ,EAAE;YACR,OAAO,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,SAAS,EAAE,EAAE,EAAE;YACnD,MAAM,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,SAAS,EAAE,EAAE,EAAE;SACnD;QACD,QAAQ,EAAE;YACR,OAAO,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,SAAS,EAAE,EAAE,EAAE;YACnD,MAAM,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,SAAS,EAAE,EAAE,EAAE;SACnD;KACF;CACF,CAAC;AAEF,MAAM,UAAU,GAAG;IACjB,OAAO,EAAE;QACP,KAAK,EAAE,MAAkB;KAC1B;IACD,KAAK,EAAE;QACL,SAAS,EAAE,MAA2C;KACvD;IACD,IAAI,EAAE;QACJ,gBAAgB,EAAE,KAAK;KACxB;IACD,GAAG,EAAE;QACH,oBAAoB,EAAE,8BAA8B;QACpD,uBAAuB,EAAE,IAAI;QAC7B,4BAA4B,EAAE;YAC5B,IAAI,EAAE,iBAAiB;YACvB,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,kCAAkC,CAAC;SAC1D;KACF;IACD,GAAG,EAAE;QACH,UAAU,EAAE,mCAAmC;QAC/C,QAAQ,EAAE,KAAK;QACf,kBAAkB,EAAE,+CAA+C;QACnE,kBAAkB,EAAE,OAAO;KAC5B;IACD,SAAS,EAAE;QACT,aAAa,EAAE,EAAE;KAClB;IACD,KAAK,EAAE;QACL,UAAU,EAAE,MAAM;QAClB,UAAU,EAAE,IAAI;QAChB,YAAY,EAAE,EAAE;QAChB,aAAa,EAAE,KAAK;QACpB,aAAa,EAAE,OAAO;QACtB,YAAY,EAAE,CAAC;QACf,eAAe,EAAE,EAAE;KACpB;IACD,IAAI,EAAE;QACJ,gBAAgB,EAAE,GAAG;QACrB,yBAAyB,EAAE,IAAI;QAC/B,yBAAyB,EAAE,IAAI;KAChC;IACD,EAAE,EAAE;QACF,uBAAuB,EAAE,IAAI;KAC9B;IACD,SAAS,EAAE;QACT,UAAU,EAAE,0CAA0C;QACtD,6BAA6B,EAAE,CAAC;KACjC;IACD,cAAc,EAAE;QACd,gBAAgB,EAAE,IAAI;QACtB,SAAS,EAAE;YACT,SAAS,EAAE,EAAE;YACb,WAAW,EAAE,GAAG;YAChB,YAAY,EAAE,CAAC;YACf,cAAc,EAAE,EAAE;YAClB,UAAU,EAAE,CAAC;YACb,eAAe,EAAE,GAAG;YACpB,iBAAiB,EAAE,IAAI;SACxB;QACD,UAAU,EAAE;YACV,SAAS,EAAE,GAAG;YACd,YAAY,EAAE,EAAE;YAChB,WAAW,EAAE,CAAC;YACd,eAAe,EAAE,GAAG;SACrB;KACF;IACD,gBAAgB,EAAE;QAChB,cAAc,EAAE,IAAI;QACpB,aAAa,EAAE,IAAI;QACnB,aAAa,EAAE,IAAI;QACnB,yBAAyB,EAAE,IAAI;QAC/B,wBAAwB,EAAE,IAAI;QAC9B,SAAS,EAAE,IAAI;QACf,uBAAuB,EAAE,IAAI;QAC7B,oBAAoB,EAAE,GAAG;QACzB,oBAAoB,EAAE,IAAI;QAC1B,iBAAiB,EAAE,IAAI;QACvB,aAAa,EAAE,KAAK;QACpB,uBAAuB,EAAE,KAAK;QAC9B,mBAAmB,EAAE,KAAK;QAC1B,gBAAgB,EAAE,IAAI;QACtB,sBAAsB,EAAE,KAAK;QAC7B,qBAAqB,EAAE,IAAI;QAC3B,gBAAgB,EAAE,KAAK;QACvB,mBAAmB,EAAE,IAAI;KAC1B;CACO,CAAC;ACtLX,MAAM,MAAM;IAcV,YACU,QAAsB,EACtB,MAAoB;QADpB,aAAQ,GAAR,QAAQ,CAAc;QACtB,WAAM,GAAN,MAAM,CAAc;QAE5B,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;IACzB,CAAC;IAED,MAAM,CAAC,WAAW,CAAC,IAAY;QAC7B,MAAM,CAAC,QAAQ,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC;QAC/D,MAAM,CAAC,IAAI,CAAC,uBAAuB,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;IACxD,CAAC;IAED,MAAM,CAAC,aAAa,CAAC,IAAY;QAC/B,MAAM,CAAC,UAAU,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC;QACnE,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;IACnC,CAAC;IAED,MAAM,CAAC,QAAQ,CAAC,KAAe;QAC7B,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,CAAC;IAEO,MAAM,CAAC,MAAM,CAAC,KAAe;QACnC,OAAO,MAAM,CAAC,cAAc,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAC7E,CAAC;IAED,sBAAsB;IACtB,SAAS,CAAC,GAAW;QACnB,IAAI,IAAI,CAAC,QAAQ;YAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,GAAG,CAAC;QACnD,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACnB,CAAC;IAED,OAAO,CAAC,GAAW;QACjB,IAAI,IAAI,CAAC,MAAM;YAAE,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,GAAG,CAAC;QAC/C,IAAI,GAAG;YAAE,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC5B,CAAC;IAED,0CAA0C;IAC1C,MAAM,CAAC,SAAS,CAAC,GAAW;QAC1B,IAAI,MAAM,CAAC,QAAQ,EAAE,CAAC;YACpB,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAC/B,OAAO;QACT,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACnB,CAAC;IACD,MAAM,CAAC,OAAO,CAAC,GAAW;QACxB,IAAI,MAAM,CAAC,QAAQ,EAAE,CAAC;YACpB,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YAC7B,OAAO;QACT,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACnB,CAAC;IACD,MAAM,CAAC,IAAI,CAAC,GAAW,IAAU,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACvD,MAAM,CAAC,IAAI,CAAC,GAAW;QACrB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC;YAAE,OAAO;QACnC,OAAO,CAAC,GAAG,CAAC,UAAU,MAAM,CAAC,QAAQ,MAAM,GAAG,EAAE,EAAE,gCAAgC,CAAC,CAAC;IACtF,CAAC;IACD,MAAM,CAAC,KAAK,CAAC,GAAW,EAAE,GAAa;QACrC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC;YAAE,OAAO;QACpC,OAAO,CAAC,GAAG,CAAC,UAAU,MAAM,CAAC,QAAQ,MAAM,GAAG,EAAE,EAAE,gCAAgC,CAAC,CAAC;QACpF,IAAI,GAAG;YAAE,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAC9B,CAAC;IAED,0BAA0B;IAC1B,MAAM,CAAC,IAAI,CAAC,GAAW,EAAE,IAAU;QACjC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC;YAAE,OAAO;QACnC,OAAO,CAAC,GAAG,CAAC,UAAU,MAAM,CAAC,QAAQ,MAAM,GAAG,EAAE,EAAE,gCAAgC,EAAE,IAAI,IAAI,EAAE,CAAC,CAAC;IAClG,CAAC;IACD,MAAM,CAAC,MAAM,CAAC,GAAW,EAAE,IAAU;QACnC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC;YAAE,OAAO;QACnC,OAAO,CAAC,GAAG,CAAC,YAAY,MAAM,CAAC,UAAU,MAAM,GAAG,EAAE,EAAE,gCAAgC,EAAE,IAAI,IAAI,EAAE,CAAC,CAAC;IACtG,CAAC;IACD,MAAM,CAAC,GAAG,CAAC,GAAW,EAAE,IAAU;QAChC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC;YAAE,OAAO;QACpC,OAAO,CAAC,GAAG,CAAC,UAAU,GAAG,EAAE,EAAE,gCAAgC,EAAE,IAAI,IAAI,EAAE,CAAC,CAAC;IAC7E,CAAC;IACD,MAAM,CAAC,IAAI,CAAC,GAAW,EAAE,IAAU;QACjC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC;YAAE,OAAO;QACpC,OAAO,CAAC,GAAG,CAAC,WAAW,GAAG,EAAE,EAAE,gCAAgC,EAAE,IAAI,IAAI,EAAE,CAAC,CAAC;IAC9E,CAAC;;AA3FM,eAAQ,GAAkB,IAAI,CAAC;AAEvB,eAAQ,GAAG,MAAM,CAAC;AAClB,iBAAU,GAAG,QAAQ,CAAC;AACtB,YAAK,GAAa,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC;AAClC,qBAAc,GAA6B;IACjE,KAAK,EAAE,EAAE;IACT,IAAI,EAAE,EAAE;IACR,IAAI,EAAE,EAAE;IACR,KAAK,EAAE,EAAE;IACT,MAAM,EAAE,EAAE;CACX,CAAC;ACXJ,MAAM,QAAQ;IAAd;QACU,aAAQ,GAAG,IAAI,GAAG,EAA6B,CAAC;IAU1D,CAAC;IATC,EAAE,CAAQ,KAAY,EAAE,CAAiB;QACvC,IAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC;YAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;QAClE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAE,CAAC,GAAG,CAAC,CAAiB,CAAC,CAAC;IACnD,CAAC;IACD,IAAI,CAAQ,KAAY,EAAE,OAAS;QACjC,MAAM,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACpC,IAAG,CAAC,EAAE;YAAE,OAAO;QACf,EAAE,CAAC,OAAO,CAAC,CAAC,CAAA,EAAE,GAAE,IAAG,CAAC;YAAE,CAAqB,CAAC,OAAO,CAAC,CAAC;QAAA,CAAC;QAAC,OAAM,CAAC,EAAC,CAAC;YAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAAA,CAAC,CAAC,CAAC,CAAC,CAAC;IACzF,CAAC;CACF;AEZD,MAAM,SAAS;IACb,MAAM,CAAC,SAAS,CAAC,CAAQ,EAAE,KAAU,EAAE;QACrC,MAAM,CAAC,GAAG,IAAI,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC7D,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;IACvC,CAAC;IACD,MAAM,CAAC,SAAS,CAAC,CAAQ,EAAE,EAAS;QAClC,MAAM,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,EAAC,EAAE,CAAC,CAAC;QAC/B,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAC,EAAE,CAAC,CAAC;QACzB,OAAO,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACrC,CAAC;IACD,MAAM,CAAC,YAAY;QACjB,OAAO;YACL,MAAM,EAAE,UAAU,CAAC,GAAG,CAAC,UAAU;YACjC,SAAS,EAAE,UAAU,CAAC,GAAG,CAAC,QAAQ;SACnC,CAAC;IACJ,CAAC;IACD,MAAM,CAAC,iBAAiB;QACtB,OAAO;YACL,WAAW,EAAE,UAAU,CAAC,KAAK,CAAC,UAAU;YACxC,WAAW,EAAE,UAAU,CAAC,KAAK,CAAC,UAAU;YACxC,aAAa,EAAE,UAAU,CAAC,KAAK,CAAC,YAAY;SAC7C,CAAC;IACJ,CAAC;IACD,MAAM,CAAC,eAAe;QACpB,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;QAC/C,IAAG,CAAC,SAAS,EAAC,CAAC;YACb,KAAK,CAAE,2HAA2H,CAAC,CAAA;YACnI,MAAM,IAAI,KAAK,CAAC,sCAAsC,CAAC,CAAC;QAC1D,CAAC;QACD,MAAM,MAAM,GAAG,QAAQ,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;QACvC,IAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAC,CAAC;YACvB,KAAK,CAAE,2HAA2H,CAAC,CAAA;YACvI,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC,CAAC;QAClE,CAAC;QACD,OAAO;YACL,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,UAAU,CAAC,GAAG,CAAC,kBAAkB,CAAC;YACnE,MAAM;YACN,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,UAAU,CAAC,GAAG,CAAC,kBAAkB,CAAC;SACnE,CAAC;IACJ,CAAC;CACF;AChCD,MAAM,0BAA0B,GAAG,UAAU,CAAC,gBAAgB,CAAC,aAAa,CAAC;AAC7E,MAAM,0BAA0B,GAAG,UAAU,CAAC,gBAAgB,CAAC,aAAa,CAAC;AAE7E,MAAM,mBAAmB,GAA2D;IAClF,IAAI,EAAE;QACJ,KAAK,EAAE,QAAQ;QACf,QAAQ,EAAE,MAAM;QAChB,MAAM,EAAE,KAAK;QACb,OAAO,EAAE,CAAC,kBAAkB,CAAC;QAC7B,SAAS,EAAE,CAAC,8BAA8B,CAAC;KAC5C;IACD,UAAU,EAAE;QACV,KAAK,EAAE,QAAQ;QACf,QAAQ,EAAE,MAAM;QAChB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE;YACP,oCAAoC;YACpC,kCAAkC;YAClC,iCAAiC;SAClC;QACD,SAAS,EAAE;YACT,mCAAmC;YACnC,2CAA2C;YAC3C,cAAc;SACf;KACF;IACD,WAAW,EAAE;QACX,KAAK,EAAE,QAAQ;QACf,QAAQ,EAAE,MAAM;QAChB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE;YACP,yBAAyB;YACzB,sCAAsC;YACtC,4BAA4B;SAC7B;QACD,SAAS,EAAE;YACT,6BAA6B;YAC7B,yCAAyC;YACzC,gCAAgC;SACjC;KACF;IACD,cAAc,EAAE;QACd,KAAK,EAAE,QAAQ;QACf,QAAQ,EAAE,MAAM;QAChB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE;YACP,sCAAsC;YACtC,2CAA2C;YAC3C,gCAAgC;SACjC;QACD,SAAS,EAAE;YACT,8BAA8B;YAC9B,6CAA6C;YAC7C,wCAAwC;SACzC;KACF;IACD,aAAa,EAAE;QACb,KAAK,EAAE,QAAQ;QACf,QAAQ,EAAE,MAAM;QAChB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE;YACP,6BAA6B;YAC7B,oCAAoC;YACpC,sCAAsC;SACvC;QACD,SAAS,EAAE;YACT,kCAAkC;YAClC,qCAAqC;YACrC,kCAAkC;SACnC;KACF;IACD,UAAU,EAAE;QACV,KAAK,EAAE,OAAO;QACd,QAAQ,EAAE,MAAM;QAChB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE;YACP,4BAA4B;YAC5B,0CAA0C;YAC1C,6CAA6C;SAC9C;QACD,SAAS,EAAE;YACT,kDAAkD;YAClD,8CAA8C;YAC9C,mDAAmD;SACpD;KACF;IACD,WAAW,EAAE;QACX,KAAK,EAAE,QAAQ;QACf,QAAQ,EAAE,MAAM;QAChB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE;YACP,wCAAwC;YACxC,8DAA8D;YAC9D,gDAAgD;SACjD;QACD,SAAS,EAAE;YACT,wDAAwD;YACxD,6CAA6C;YAC7C,0DAA0D;SAC3D;KACF;IACD,UAAU,EAAE;QACV,KAAK,EAAE,QAAQ;QACf,QAAQ,EAAE,MAAM;QAChB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE;YACP,0CAA0C;YAC1C,6CAA6C;YAC7C,yCAAyC;SAC1C;QACD,SAAS,EAAE;YACT,wCAAwC;YACxC,4CAA4C;YAC5C,mCAAmC;SACpC;KACF;IACD,SAAS,EAAE;QACT,KAAK,EAAE,SAAS;QAChB,QAAQ,EAAE,MAAM;QAChB,MAAM,EAAE,KAAK;QACb,OAAO,EAAE,CAAC,WAAW,CAAC;QACtB,SAAS,EAAE,CAAC,2BAA2B,CAAC;KACzC;IACD,QAAQ,EAAE;QACR,KAAK,EAAE,QAAQ;QACf,QAAQ,EAAE,MAAM;QAChB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE;YACP,2BAA2B;YAC3B,yCAAyC;YACzC,wCAAwC;SACzC;QACD,SAAS,EAAE;YACT,iCAAiC;YACjC,gCAAgC;YAChC,oCAAoC;SACrC;KACF;IACD,QAAQ,EAAE;QACR,KAAK,EAAE,QAAQ;QACf,QAAQ,EAAE,MAAM;QAChB,MAAM,EAAE,IAAI;QACZ,OAAO,EAAE;YACP,sBAAsB;YACtB,iCAAiC;YACjC,mCAAmC;SACpC;QACD,SAAS,EAAE;YACT,6BAA6B;YAC7B,yCAAyC;YACzC,kCAAkC;SACnC;KACF;IACD,MAAM,EAAE;QACN,KAAK,EAAE,QAAQ;QACf,QAAQ,EAAE,OAAO;QACjB,MAAM,EAAE,KAAK;QACb,OAAO,EAAE,CAAC,mBAAmB,CAAC;QAC9B,SAAS,EAAE,CAAC,wCAAwC,CAAC;KACtD;CACF,CAAC;ACxKF,MAAM,YAAY;IAChB,IAAI,CAAC,GAAO;QACV,IAAG,CAAC;YACF,IAAG,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,KAAK,MAAM,EAAC,CAAC;gBAC5C,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;YACtC,CAAC;QACH,CAAC;QAAA,MAAK,CAAC,CAAA,CAAC;IACV,CAAC;IAED,SAAS,CAAC,EAAkB;QAC1B,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,EAAE,EAAC,EAAE;YACvC,MAAM,CAAC,GAAO,EAAE,CAAC,IAAI,CAAC;YACtB,IAAG,CAAC,IAAI,CAAC,CAAC,IAAI;gBAAE,EAAE,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC;IACL,CAAC;CACF;ACfD,qCAAqC;AACrC,+CAA+C;AAC/C,2CAA2C;AAC3C,gEAAgE;AAEhE;;;;;;;GAOG;AACH,MAAM,UAAU;IACd,YACmB,OAAe,EACf,QAAgB,EAChB,mBAAmB,UAAU,CAAC,IAAI,CAAC,gBAAgB;QAFnD,YAAO,GAAP,OAAO,CAAQ;QACf,aAAQ,GAAR,QAAQ,CAAQ;QAChB,qBAAgB,GAAhB,gBAAgB,CAAmC;IACnE,CAAC;IAEJ,KAAK,CAAC,OAAO,CAAI,GAAgD;QAC/D,MAAM,SAAS,GAAG,WAAW,CAAC,KAAK,EAAE,CAAC;QACtC,MAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;QAE7D,MAAM,UAAU,GAAG,IAAI,eAAe,EAAE,CAAC;QACzC,MAAM,SAAS,GAAG,GAAG,CAAC,SAAS,IAAI,IAAI,CAAC,gBAAgB,CAAC;QACzD,MAAM,EAAE,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;QAC7B,MAAM,aAAa,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,UAAU,CAAC,KAAK,EAAE,EAAE,SAAS,CAAC,CAAC;QAE7E,MAAM,IAAI,GACR,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC;YACxB,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC;YACxB,EAAE,CAAC;QAEL,MAAM,OAAO,GAA2B;YACtC,QAAQ,EAAE,kBAAkB;YAC5B,GAAG,CAAC,GAAG,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,EAAE,cAAc,EAAE,iCAAiC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YACxF,WAAW,EAAE,IAAI,CAAC,QAAQ;YAC1B,cAAc,EAAE,SAAS;YACzB,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,cAAc,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YACzC,GAAG,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC;SACvB,CAAC;QAEF,IAAI,CAAC;YACH,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,GAAG,EAAE;gBAC3B,MAAM,EAAE,GAAG,CAAC,MAAM;gBAClB,OAAO;gBACP,IAAI,EAAE,GAAG,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS;gBACnE,WAAW,EAAE,GAAG,CAAC,WAAW,IAAI,SAAS;gBACzC,MAAM,EAAE,UAAU,CAAC,MAAM;aAC1B,CAAC,CAAC;YAEH,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;YAE9C,MAAM,IAAI,GAAG,MAAM,GAAG,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;YAC9C,MAAM,IAAI,GAAQ,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAEpD,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC;gBACZ,MAAM,IAAI,SAAS,CACjB,QAAQ,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,IAAI,EAAE,EAC9C,GAAG,CAAC,MAAM,EACV,SAAS,EACT,GAAG,EACH,IAAI,CACL,CAAC;YACJ,CAAC;YAED,OAAO,EAAE,MAAM,EAAE,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,IAAS,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,EAAE,SAAS,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC;QAC3F,CAAC;QAAC,OAAO,CAAM,EAAE,CAAC;YAChB,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;YAE9C,IAAI,CAAC,EAAE,IAAI,KAAK,YAAY,EAAE,CAAC;gBAC7B,MAAM,IAAI,SAAS,CACjB,YAAY,SAAS,OAAO,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,IAAI,EAAE,EACpD,GAAG,EACH,SAAS,EACT,GAAG,EACH,EAAE,SAAS,EAAE,EAAE,EAAE,CAClB,CAAC;YACJ,CAAC;YACD,IAAI,CAAC,YAAY,SAAS;gBAAE,MAAM,CAAC,CAAC;YACpC,MAAM,IAAI,SAAS,CACjB,iBAAiB,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,IAAI,EAAE,EACzC,SAAS,EACT,SAAS,EACT,GAAG,EACH,CAAC,CACF,CAAC;QACJ,CAAC;gBAAS,CAAC;YACT,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;QACrC,CAAC;IACH,CAAC;IAED,KAAK,CAAC,OAAO,CAAI,IAAY,EAAE,KAA4B,EAAE,OAAgC;QAC3F,OAAO,IAAI,CAAC,OAAO,CAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;IAClE,CAAC;IAEO,QAAQ,CAAC,OAAe,EAAE,IAAY,EAAE,KAA4B;QAC1E,MAAM,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;QACjC,IAAI,KAAK,EAAE,CAAC;YACV,KAAK,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC;gBAC3C,IAAI,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,IAAI;oBAAE,SAAS;gBAC5C,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YACnC,CAAC;QACH,CAAC;QACD,OAAO,CAAC,CAAC,QAAQ,EAAE,CAAC;IACtB,CAAC;IAEO,QAAQ,CAAC,IAAY;QAC3B,IAAI,CAAC;YAAC,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAAC,CAAC;QAAC,MAAM,CAAC;YAAC,OAAO,IAAI,CAAC;QAAC,CAAC;IACzD,CAAC;CACF;AC/GD,sDAAsD;AACtD,6EAA6E;AAE7E,MAAM,SAAS;IACb,YAA6B,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;IAAG,CAAC;IAEjD;;;OAGG;IACH,KAAK,CAAC,mBAAmB;QACvB,IAAI,UAAU,CAAC,GAAG,CAAC,uBAAuB,EAAE,CAAC;YAC3C,MAAM,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC,4BAA4B,CAAC;YACxD,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAC/B,CAAC;QAED,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAgB,UAAU,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;QACxF,MAAM,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC;QAErB,mCAAmC;QACnC,MAAM,OAAO,GAA4B,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAC/D,OAAO,OAAO,CAAC;IACjB,CAAC;CACF;ACJD;;;GAGG;AACH,SAAS,oBAAoB,CAAC,OAAgC,EAAE,QAAiB;IAC/E,MAAM,EAAE,GAAG,OAAO,CAAC,iBAAiB,IAAI,EAAE,CAAC;IAC3C,IAAI,QAAQ,EAAE,CAAC;QACb,MAAM,IAAI,GAAG,EAAE,CAAC,wBAAwB,IAAI,EAAE,CAAC;QAC/C,OAAQ,IAAI,CAAC,CAAC,CAA4B,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;IAC7E,CAAC;IACD,MAAM,IAAI,GAAG,EAAE,CAAC,qBAAqB,IAAI,EAAE,CAAC;IAC5C,OAAQ,IAAI,CAAC,CAAC,CAA4B,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;AAC7E,CAAC;AC/BD,MAAM,MAAM;IACV,mEAAmE;IACnE,MAAM,CAAC,GAAG,CAAC,IAAY;QACrB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,0BAA0B,EAAE,MAAM,CAAC,CAAC;QAC9D,MAAM,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,WAAW,IAAI,UAAU,CAAC,CAAC,CAAC;QAC3E,OAAO,KAAK,CAAC,CAAC,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IACrD,CAAC;CACF;ACPD,MAAM,WAAW;IACf,8BAA8B;IAC9B,MAAM,CAAC,KAAK;QACV,MAAM,CAAC,GAAQ,MAAa,CAAC;QAC7B,IAAI,CAAC,IAAI,OAAO,CAAC,CAAC,UAAU,KAAK,UAAU;YAAE,OAAO,CAAC,CAAC,UAAU,EAAE,CAAC;QACnE,OAAO,GAAG,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;IAChE,CAAC;CACF;ACPD,MAAM,SAAU,SAAQ,KAAK;IAC3B,YACE,OAAe,EACC,MAAe,EACf,SAAkB,EAClB,GAAY,EACZ,OAAiB;QAEjC,KAAK,CAAC,OAAO,CAAC,CAAC;QALC,WAAM,GAAN,MAAM,CAAS;QACf,cAAS,GAAT,SAAS,CAAS;QAClB,QAAG,GAAH,GAAG,CAAS;QACZ,YAAO,GAAP,OAAO,CAAU;QAGjC,IAAI,CAAC,IAAI,GAAG,WAAW,CAAC;IAC1B,CAAC;CACF;AEXD,MAAM,iBAAiB;IAAvB;QACU,QAAG,GAAG,IAAI,GAAG,EAAU,CAAC;IASlC,CAAC;IAPC,OAAO,CAAC,EAAS,IAAG,IAAI,CAAC,MAAM,GAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACvD,GAAG,CAAC,EAAS,IAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACnC,MAAM,CAAC,EAAS,IAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACzC,QAAQ,CAAC,MAAa;QACpB,OAAO,EAAE,MAAM,EAAE,cAAc,EAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,MAAM,EAAC,IAAI,CAAC,MAAM,EAAE,CAAC;IACtF,CAAC;IACD,KAAK,KAAI,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAC,SAAS,CAAC,CAAC,CAAC;CACpD;ACVD,MAAM,YAAY;IAAlB;QACU,uBAAkB,GAAuB,IAAI,CAAC;IAoDxD,CAAC;IAlDC,aAAa,CAAC,KAAuB,EAAE,KAAuB;QAC5D,IAAG,CAAC,IAAI,CAAC,kBAAkB;YAAE,IAAI,CAAC,kBAAkB,GAAG,IAAI,WAAW,EAAE,CAAC;QACzE,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,CAAA,EAAE,CAAA,IAAI,CAAC,kBAAmB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;QACxF,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACxC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC;QAC1C,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;QACnB,KAAK,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,GAAE,EAAE,GAAC,CAAC,CAAC,CAAC;IAC7B,CAAC;IAED,cAAc,CAAC,KAAuB,EAAE,KAAuB;QAC7D,MAAM,EAAE,GAAI,KAAK,CAAC,SAAyB,IAAI,IAAI,WAAW,EAAE,CAAC;QACjE,kEAAkE;QAClE,EAAE,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,CAAA,EAAE;YACxB,IAAG,CAAC,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,EAAE,EAAC,CAAC;gBAC7C,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;gBAClB,IAAG,CAAC;oBAAC,CAAC,CAAC,IAAI,EAAE,CAAC;gBAAC,CAAC;gBAAA,MAAK,CAAC,CAAA,CAAC;YACzB,CAAC;QACH,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACnB,KAAK,CAAC,SAAS,GAAG,EAAE,CAAC;QACrB,KAAK,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,GAAE,EAAE,GAAC,CAAC,CAAC,CAAC;IAC7B,CAAC;IAED,iBAAiB,CAAC,KAAuB,EAAE,KAAuB;QAChE,MAAM,EAAE,GAAG,KAAK,CAAC,SAA+B,CAAC;QACjD,IAAG,CAAC,EAAE;YAAE,OAAO;QAEf,EAAE,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,CAAA,EAAE;YACxB,IAAG,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,EAAE,EAAC,CAAC;gBACnC,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YACpB,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAG,EAAE,CAAC,SAAS,EAAE,CAAC,MAAM,KAAK,CAAC,EAAC,CAAC;YAC9B,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC;QACzB,CAAC;IACH,CAAC;IAED,UAAU,CAAC,KAAuB;QAChC,MAAM,EAAE,GAAG,KAAK,CAAC,SAA+B,CAAC;QACjD,IAAG,EAAE;YAAE,EAAE,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,CAAA,EAAE,CAAA,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;QAC3C,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;IACjC,CAAC;IAED,WAAW,CAAC,KAAuB;QACjC,MAAM,EAAE,GAAG,KAAK,CAAC,SAA+B,CAAC;QACjD,IAAG,EAAE;YAAE,EAAE,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,CAAA,EAAE,CAAA,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;QAC3C,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC;IACzB,CAAC;CACF;ACrDD,MAAM,wBAAwB;IAa5B;QAZQ,OAAE,GAAG,IAAI,KAAK,EAAE,CAAC;QACjB,QAAG,GAAQ,IAAI,CAAC;QAIhB,YAAO,GAAG,KAAK,CAAC;QAChB,cAAS,GAAuB,IAAI,CAAC;QACrC,cAAS,GAAuB,IAAI,CAAC;QAE7C,iDAAiD;QACzC,UAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAG9B,sDAAsD;QACtD,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC;QAEzB,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC/C,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACvC,IAAG,CAAC,CAAC;YAAE,MAAM,IAAI,KAAK,CAAC,cAAc,CAAC,CAAC;QACvC,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;QAEb,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;QAC7B,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC;QAChC,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;IAC5B,CAAC;IAEK,QAAQ;QACd,2DAA2D;QAC3D,2EAA2E;QAC3E,IAAI,CAAC;YACH,OAAO,IAAI,GAAG,CAAC,gBAAgB,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;QACpE,CAAC;QAAC,MAAM,CAAC;YACP,OAAO,gBAAgB,CAAC;QAC1B,CAAC;IACH,CAAC;IAEW,KAAK,CAAC,cAAc;QAC5B,MAAM,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC;QACpB,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC;QACvB,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;YAChC,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC;YAC9B,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QAChB,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,0BAA0B,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;QACjD,IAAI,GAAG,CAAC,QAAQ,IAAI,GAAG,CAAC,YAAY,GAAG,CAAC,EAAE,CAAC;YACzC,MAAM,CAAC,IAAI,CAAC,mCAAmC,GAAG,CAAC,YAAY,MAAM,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC;YAC1F,OAAO;QACT,CAAC;QACD,MAAM,IAAI,OAAO,CAAO,CAAC,OAAO,EAAE,EAAE;YAClC,GAAG,CAAC,MAAM,GAAG,GAAG,EAAE;gBAChB,MAAM,CAAC,IAAI,CAAC,8BAA8B,GAAG,CAAC,YAAY,MAAM,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC;gBACrF,OAAO,EAAE,CAAC;YACZ,CAAC,CAAC;YACF,GAAG,CAAC,OAAO,GAAG,GAAG,EAAE;gBACjB,MAAM,CAAC,IAAI,CAAC,iCAAiC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;gBACxD,OAAO,EAAE,CAAC;YACZ,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,MAAmB;QAC9B,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC;QACxB,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,MAAM,CAAC;QAChC,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,GAAE,EAAE,GAAC,CAAC,CAAC,CAAC;QAExC,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;QAE5B,IAAG,CAAC,IAAI,CAAC,GAAG,EAAC,CAAC;YACZ,IAAI,CAAC,GAAG,GAAG,IAAI,kBAAkB,CAAC;gBAChC,UAAU,EAAE,CAAC,IAAY,EAAE,EAAE,CAAC,+DAA+D,IAAI,EAAE;aACpG,CAAC,CAAC;YACH,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,cAAc,EAAE,CAAC,EAAE,CAAC,CAAC;YAC3C,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;QACpD,CAAC;QAED,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,IAAI,EAAE,CAAC;QAEZ,4CAA4C;QAC5C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;QAC/C,MAAM,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;QAC1C,MAAM,CAAC,SAAS,CAAC,4BAA4B,CAAC,CAAC;QAC/C,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IAED,OAAO;QACL,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,MAAM,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC;QAC3C,MAAM,CAAC,SAAS,CAAC,6BAA6B,CAAC,CAAC;IAClD,CAAC;IAED,eAAe,KAAI,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;IAEnC,KAAK,CAAC,IAAI;QAChB,OAAM,IAAI,CAAC,OAAO,EAAC,CAAC;YAClB,IAAG,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,CAAC,EAAC,CAAC;gBAC/B,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;YAC/C,CAAC;YACD,MAAM,IAAI,OAAO,CAAC,CAAC,CAAA,EAAE,CAAA,UAAU,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QAC1C,CAAC;IACH,CAAC;IAEO,SAAS,CAAC,OAAY;QAC5B,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,GAAG,CAAC;QACnF,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,IAAI,GAAG,CAAC;QACrF,IAAG,CAAC,CAAC,IAAI,CAAC,CAAC;YAAE,OAAO;QAEpB,IAAG,IAAI,CAAC,MAAM,CAAC,KAAK,KAAK,CAAC;YAAE,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC;QAClD,IAAG,IAAI,CAAC,MAAM,CAAC,MAAM,KAAK,CAAC;YAAE,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;QAEpD,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;QACrB,GAAG,CAAC,SAAS,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;QAEvB,2BAA2B;QAC3B,GAAG,CAAC,wBAAwB,GAAG,aAAa,CAAC;QAC7C,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEzC,kDAAkD;QAClD,uDAAuD;QACvD,GAAG,CAAC,wBAAwB,GAAG,gBAAgB,CAAC;QAChD,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,gBAAgB,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEpD,uCAAuC;QACvC,GAAG,CAAC,wBAAwB,GAAG,kBAAkB,CAAC;QAClD,IAAG,IAAI,CAAC,EAAE,CAAC,QAAQ,IAAI,IAAI,CAAC,EAAE,CAAC,YAAY,GAAG,CAAC,EAAC,CAAC;YAC/C,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACrC,CAAC;aAAM,CAAC;YACN,0CAA0C;YAC1C,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;YAC1B,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;QACxB,CAAC;QAED,GAAG,CAAC,wBAAwB,GAAG,aAAa,CAAC;IAC/C,CAAC;CACF;ACzID,MAAM,kBAAkB;IAAxB;QACU,WAAM,GAAuB,IAAI,CAAC;IAa5C,CAAC;IAXC,KAAK,CAAC,KAAK;QACT,IAAI,CAAC,MAAM,GAAG,MAAM,SAAS,CAAC,YAAY,CAAC,eAAe,CAAC,EAAE,KAAK,EAAC,IAAI,EAAE,KAAK,EAAC,KAAK,EAAE,CAAC,CAAC;QACxF,OAAO,IAAI,CAAC,MAAM,CAAC;IACrB,CAAC;IAED,IAAI;QACF,IAAG,IAAI,CAAC,MAAM,EAAC,CAAC;YACd,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,CAAA,EAAE,CAAA,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;YAC7C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACrB,CAAC;IACH,CAAC;CACF;ACZD,MAAM,qBAAqB;IAA3B;QACU,UAAK,GAAa,IAAI,CAAC;IAwCjC,CAAC;IAtCC,KAAK,CAAC,EAA8D;QAClE,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC,GAAE,EAAE;YAClC,kDAAkD;YAClD,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CACpB,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,SAAS;gBAC7C,IAAI,CAAC,MAAM,EAAE,GAAG,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,WAAW,CAChE,CAAC;YACF,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CACvB,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,YAAY;gBAChD,IAAI,CAAC,MAAM,EAAE,GAAG,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,cAAc,CACnE,CAAC;YACF,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;YACxF,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CACxB,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,eAAe;gBACnD,IAAI,CAAC,MAAM,EAAE,GAAG,UAAU,CAAC,cAAc,CAAC,SAAS,CAAC,iBAAiB,CACtE,CAAC;YAEF,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,CAAC,CAAC;YAC7C,MAAM,OAAO,GAAG,OAAO,GAAG,aAAa,MAAM,WAAW,IAAI,aAAa,OAAO,MAAM,CAAC;YACvF,EAAE,CAAC,CAAC,EAAC,CAAC,EAAC,OAAO,CAAC,CAAC;QAClB,CAAC,EAAE,UAAU,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;IACjD,CAAC;IAED,IAAI;QACF,IAAG,IAAI,CAAC,KAAK,IAAE,IAAI,EAAC,CAAC;YAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAAC,IAAI,CAAC,KAAK,GAAC,IAAI,CAAC;QAAC,CAAC;IACrE,CAAC;IAEO,IAAI,CAAC,GAAU,EAAC,MAAa,EAAC,IAAW,EAAC,OAAc;QAC9D,IAAI,KAAK,GAAC,CAAC,CAAC;QACZ,IAAG,GAAG,GAAC,UAAU,CAAC,cAAc,CAAC,UAAU,CAAC,SAAS;YAAE,KAAK,EAAE,CAAC;QAC/D,IAAG,MAAM,GAAC,UAAU,CAAC,cAAc,CAAC,UAAU,CAAC,YAAY;YAAE,KAAK,EAAE,CAAC;QACrE,IAAG,IAAI,GAAC,UAAU,CAAC,cAAc,CAAC,UAAU,CAAC,WAAW;YAAE,KAAK,EAAE,CAAC;QAClE,IAAG,OAAO,GAAC,UAAU,CAAC,cAAc,CAAC,UAAU,CAAC,eAAe;YAAE,KAAK,EAAE,CAAC;QACzE,IAAG,KAAK,IAAE,CAAC;YAAE,OAAO,MAAM,CAAC;QAC3B,IAAG,KAAK,IAAE,CAAC;YAAE,OAAO,QAAQ,CAAC;QAC7B,OAAO,KAAK,CAAC;IACf,CAAC;CACF;AC3CD,MAAM,sBAAsB;IA0C1B,YAAoB,QAAiD;QAAjD,aAAQ,GAAR,QAAQ,CAAyC;QAzC7D,WAAM,GAAyB;YACrC,KAAK,EAAE,QAAQ;YACf,WAAW,EAAE,EAAE;YACf,aAAa,EAAE,EAAE;YACjB,QAAQ,EAAE,MAAM;YAChB,KAAK,EAAE,MAAM;SACd,CAAC;QAEM,aAAQ,GAAkB,IAAI,CAAC;QAC/B,kBAAa,GAAkB,IAAI,CAAC;QACpC,2BAAsB,GAAG,CAAC,CAAC;QAC3B,4BAAuB,GAAkB,IAAI,CAAC;QAC9C,sBAAiB,GAAkB,IAAI,CAAC;QACxC,sBAAiB,GAAkB,IAAI,CAAC;QACxC,kBAAa,GAAkB,IAAI,CAAC;QACpC,mBAAc,GAAkB,IAAI,CAAC;QACrC,oBAAe,GAAkB,IAAI,CAAC;QACtC,sBAAiB,GAAkB,IAAI,CAAC;QACxC,sBAAiB,GAAkB,IAAI,CAAC;QACxC,2BAAsB,GAAG,KAAK,CAAC;QAC/B,mBAAc,GAAkB,IAAI,CAAC;QACrC,4BAAuB,GAAG,IAAI,GAAG,EAAuB,CAAC;QAEzD,gBAAW,GAA6B,IAAI,CAAC;QAC7C,kBAAa,GAAG,IAAI,GAAG,EAA6B,CAAC;QACrD,oBAAe,GAAG,IAAI,GAAG,EAAsD,CAAC;QAChF,wBAAmB,GAAG,IAAI,GAAG,EAAiC,CAAC;QAC/D,yBAAoB,GAAG,IAAI,GAAG,EAAkC,CAAC;QAEjE,kBAAa,GAA0B,KAAK,CAAC;QAC7C,mBAAc,GAA2B,KAAK,CAAC;QAC/C,wBAAmB,GAAsB,QAAQ,CAAC;QAElD,mBAAc,GAAG,CAAC,CAAC;QACnB,mBAAc,GAAG,CAAC,CAAC;QACnB,cAAS,GAAkB,IAAI,CAAC;QAChC,cAAS,GAAG,KAAK,CAAC;QAClB,sBAAiB,GAAG,CAAC,CAAC;QACtB,qBAAgB,GAAG,EAAE,CAAC;QACtB,aAAQ,GAAG,IAAI,OAAO,EAAqB,CAAC;QAGlD,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAC9B,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,UAAU,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC;IACrG,CAAC;IAED,SAAS;QACP,OAAO,IAAI,CAAC,MAAM,CAAC;IACrB,CAAC;IAED,OAAO;QACL,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE,CAAC;YAC5B,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACrC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACxB,CAAC;IACH,CAAC;IAED,aAAa;QACX,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QAChC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,sBAAsB,GAAG,CAAC,CAAC;QAChC,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;QACpC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACpC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;QAC3B,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;QAC7B,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,CAAC;QACjC,IAAI,CAAC,oBAAoB,CAAC,KAAK,EAAE,CAAC;QAClC,IAAI,CAAC,uBAAuB,CAAC,KAAK,EAAE,CAAC;QACrC,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;IACtC,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC;IAED,mBAAmB;QACjB,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC;IAED,YAAY;QACV,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QAC3B,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC;IAED,WAAW;QACT,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IACpC,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;IAClC,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;IAChC,CAAC;IAED,yBAAyB,CAAC,KAAa;QACrC,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;QACjD,IAAI,IAAI,CAAC,sBAAsB,GAAG,CAAC,IAAI,IAAI,CAAC,uBAAuB,KAAK,IAAI,EAAE,CAAC;YAC7E,IAAI,CAAC,uBAAuB,GAAG,GAAG,CAAC;QACrC,CAAC;QACD,IAAI,IAAI,CAAC,sBAAsB,KAAK,CAAC,EAAE,CAAC;YACtC,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;YACpC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAC9B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAC9B,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;YACpC,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;YAC3B,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;YAC7B,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,CAAC;YACjC,IAAI,CAAC,oBAAoB,CAAC,KAAK,EAAE,CAAC;YAClC,IAAI,CAAC,uBAAuB,CAAC,KAAK,EAAE,CAAC;QACvC,CAAC;QACD,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED,mBAAmB,CAAC,EAAqB;QACvC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE,WAAW,CAAC,CAAC;QACnC,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED,oBAAoB,CAAC,MAAc,EAAE,EAAqB;QACxD,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;QACnC,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACnC,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE,YAAY,EAAE,MAAM,CAAC,CAAC;QAC5C,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED,qBAAqB;QACnB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACnC,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED,oBAAoB,CAAC,MAAc;QACjC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAClC,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACpC,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACxC,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACzC,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC5C,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED,mBAAmB,CAAC,MAAc,EAAE,KAAuB,EAAE,EAAW;QACtE,IAAI,KAAK,CAAC,IAAI,KAAK,OAAO;YAAE,OAAO;QACnC,IAAI,MAAM,GAAG,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACtD,IAAI,CAAC,MAAM,EAAE,CAAC;YACZ,MAAM,GAAG,IAAI,GAAG,EAAU,CAAC;YAC3B,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACnD,CAAC;QAED,IAAI,EAAE,EAAE,CAAC;YACP,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YACvB,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;YAC7B,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;YAC7B,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;YACnC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;YACrB,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;gBACtC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC;YAChE,CAAC;QACH,CAAC;aAAM,CAAC;YACN,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;YACxB,IAAI,MAAM,CAAC,IAAI,KAAK,CAAC,EAAE,CAAC;gBACtB,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAC9C,CAAC;QACH,CAAC;QACD,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAEO,uBAAuB;QAC7B,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,EAAE,CAAC;YAC3D,IAAI,MAAM,CAAC,IAAI,GAAG,CAAC;gBAAE,OAAO,IAAI,CAAC;QACnC,CAAC;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED,kBAAkB;QAChB,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IACpC,CAAC;IAEO,YAAY,CAAC,EAAqB,EAAE,IAAgC,EAAE,MAAe;QAC3F,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;YAAE,OAAO;QAClC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QAEtB,EAAE,CAAC,gBAAgB,CAAC,0BAA0B,EAAE,GAAG,EAAE;YACnD,IAAI,IAAI,KAAK,WAAW,IAAI,IAAI,CAAC,WAAW,KAAK,EAAE,EAAE,CAAC;gBACpD,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,kBAAkB,CAAC;gBAC3C,IAAI,EAAE,CAAC,kBAAkB,KAAK,UAAU,EAAE,CAAC;oBACzC,IAAI,IAAI,CAAC,aAAa,KAAK,IAAI;wBAAE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;gBACnE,CAAC;qBAAM,CAAC;oBACN,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;gBAC5B,CAAC;YACH,CAAC;YACD,IAAI,IAAI,KAAK,YAAY,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE,CAAC;gBACxD,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC,kBAAkB,CAAC,CAAC;YAC9D,CAAC;YACD,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,gBAAgB,CAAC,uBAAuB,EAAE,GAAG,EAAE;YAChD,IAAI,IAAI,KAAK,WAAW,IAAI,IAAI,CAAC,WAAW,KAAK,EAAE,EAAE,CAAC;gBACpD,IAAI,CAAC,cAAc,GAAG,CAAC,EAAE,CAAC,eAAe,IAAI,KAAK,CAA2B,CAAC;YAChF,CAAC;YACD,IAAI,IAAI,KAAK,YAAY,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE,CAAC;gBACxD,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,eAAe,IAAI,KAAK,CAA2B,CAAC,CAAC;gBAC/F,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;YACrC,CAAC;YACD,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,gBAAgB,CAAC,sBAAsB,EAAE,GAAG,EAAE;YAC/C,IAAI,IAAI,KAAK,WAAW,IAAI,IAAI,CAAC,WAAW,KAAK,EAAE,EAAE,CAAC;gBACpD,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC,cAAc,CAAC;YAC/C,CAAC;YACD,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,IAAI;QACV,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAEO,KAAK,CAAC,WAAW;QACvB,IAAI,IAAI,CAAC,SAAS;YAAE,OAAO;QAC3B,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QACvB,MAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,KAAK,WAAW;YAClD,CAAC,CAAC,UAAU,CAAC,gBAAgB,CAAC,wBAAwB;YACtD,CAAC,CAAC,UAAU,CAAC,gBAAgB,CAAC,yBAAyB,CAAC;QAC1D,IAAI,GAAG,GAAG,IAAI,CAAC,iBAAiB,GAAG,UAAU;YAAE,OAAO;QAEtD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;QAC7B,IAAI,CAAC;YACH,MAAM,IAAI,GAAoB,EAAE,CAAC;YACjC,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;gBACrB,IAAI,CAAC,IAAI,CACP,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE;qBACxB,IAAI,CAAC,CAAC,MAAsB,EAAE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;qBACpE,KAAK,CAAC,GAAG,EAAE,GAAE,CAAC,CAAC,CACnB,CAAC;YACJ,CAAC;YACD,KAAK,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,EAAE,CAAC;gBACxD,IAAI,CAAC,IAAI,CACP,EAAE,CAAC,QAAQ,EAAE;qBACV,IAAI,CAAC,CAAC,MAAsB,EAAE,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;qBAC7E,KAAK,CAAC,GAAG,EAAE,GAAE,CAAC,CAAC,CACnB,CAAC;YACJ,CAAC;YACD,MAAM,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC;QAAC,MAAM,CAAC,CAAA,CAAC;QACV,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACzB,CAAC;IAEO,qBAAqB,CAAC,MAAsB;QAClD,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QACvB,MAAM,IAAI,GAAG,IAAI,GAAG,EAAoB,CAAC;QACzC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAW,EAAE,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;QAEnD,IAAI,cAAc,GAAkB,IAAI,CAAC;QACzC,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,QAAQ,GAAG,KAAK,CAAC;QACrB,IAAI,UAAU,GAAG,KAAK,CAAC;QAEvB,MAAM,CAAC,OAAO,CAAC,CAAC,CAAW,EAAE,EAAE;YAC7B,MAAM,IAAI,GAAG,CAAQ,CAAC;YACtB,IAAI,CAAC,CAAC,IAAI,KAAK,WAAW,IAAI,OAAO,IAAI,CAAC,uBAAuB,KAAK,QAAQ,EAAE,CAAC;gBAC/E,cAAc,GAAG,IAAI,CAAC,uBAAuB,CAAC;YAChD,CAAC;YACD,IAAI,CAAC,CAAC,IAAI,KAAK,gBAAgB,EAAE,CAAC;gBAChC,MAAM,UAAU,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC;gBACvD,IAAI,CAAC,cAAc,IAAI,UAAU;oBAAE,cAAc,GAAG,CAAC,CAAC,EAAE,CAAC;gBACzD,IAAI,cAAc,KAAK,CAAC,CAAC,EAAE,IAAI,OAAO,IAAI,CAAC,oBAAoB,KAAK,QAAQ,EAAE,CAAC;oBAC7E,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,CAAC;gBAC5D,CAAC;YACH,CAAC;YACD,IAAI,CAAC,CAAC,IAAI,KAAK,oBAAoB,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,IAAI,IAAI,CAAC,SAAS,KAAK,OAAO,CAAC,EAAE,CAAC;gBAC7F,MAAM,YAAY,GAAG,OAAO,IAAI,CAAC,YAAY,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnF,IAAI,YAAY,IAAI,UAAU,CAAC,gBAAgB,CAAC,uBAAuB;oBAAE,QAAQ,GAAG,IAAI,CAAC;YAC3F,CAAC;YACD,IAAI,CAAC,CAAC,IAAI,KAAK,aAAa,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,IAAI,IAAI,CAAC,SAAS,KAAK,OAAO,CAAC,EAAE,CAAC;gBACtF,MAAM,eAAe,GAAG,OAAO,IAAI,CAAC,eAAe,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC5F,MAAM,WAAW,GAAG,OAAO,IAAI,CAAC,WAAW,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChF,MAAM,KAAK,GAAG,eAAe,GAAG,WAAW,CAAC;gBAC5C,IACE,KAAK,GAAG,UAAU,CAAC,gBAAgB,CAAC,oBAAoB;oBACxD,WAAW,GAAG,KAAK,IAAI,UAAU,CAAC,gBAAgB,CAAC,uBAAuB;oBAC1E,QAAQ,GAAG,IAAI,CAAC;YACpB,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,cAAc,EAAE,CAAC;YACnB,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,KAAK,cAAc,EAAE,CAAC;gBAClE,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;YAC/B,CAAC;YACD,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;YAErC,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,cAAc,CAAQ,CAAC;YAC7C,IAAI,IAAI,EAAE,CAAC;gBACT,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAQ,CAAC;gBACrD,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAQ,CAAC;gBACvD,UAAU,GAAG,KAAK,EAAE,aAAa,KAAK,OAAO,IAAI,MAAM,EAAE,aAAa,KAAK,OAAO,CAAC;YACrF,CAAC;QACH,CAAC;QAED,IAAI,UAAU,EAAE,CAAC;YACf,IAAI,IAAI,CAAC,eAAe,KAAK,IAAI;gBAAE,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;QAChE,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC9B,CAAC;QAED,MAAM,OAAO,GAAG,KAAK,IAAI,UAAU,CAAC,gBAAgB,CAAC,SAAS,CAAC;QAC/D,IAAI,OAAO,IAAI,QAAQ,EAAE,CAAC;YACxB,IAAI,IAAI,CAAC,cAAc,KAAK,IAAI;gBAAE,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAC9D,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC7B,CAAC;IACH,CAAC;IAEO,sBAAsB,CAAC,MAAc,EAAE,MAAsB;QACnE,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QACvB,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,MAAM,CAAC,OAAO,CAAC,CAAC,CAAW,EAAE,EAAE;YAC7B,MAAM,IAAI,GAAG,CAAQ,CAAC;YACtB,IAAI,CAAC,CAAC,IAAI,KAAK,aAAa,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,IAAI,IAAI,CAAC,SAAS,KAAK,OAAO,CAAC,IAAI,OAAO,IAAI,CAAC,aAAa,KAAK,QAAQ,EAAE,CAAC;gBAChI,KAAK,IAAI,IAAI,CAAC,aAAa,CAAC;YAC9B,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,MAAM,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;QAC9E,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,gBAAgB,CAAC,oBAAoB,EAAE,CAAC;YAC1E,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;YACpB,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;QAC/B,CAAC;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;IACzC,CAAC;IAEO,QAAQ;QACd,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QACvB,MAAM,SAAS,GAAG,IAAI,CAAC,sBAAsB,GAAG,CAAC,CAAC;QAClD,MAAM,cAAc,GAAG,IAAI,CAAC,aAAa,KAAK,WAAW,IAAI,IAAI,CAAC,aAAa,KAAK,WAAW,CAAC;QAChG,MAAM,eAAe,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,WAAW,IAAI,CAAC,KAAK,WAAW,CAAC,CAAC;QACxH,MAAM,YAAY,GAAG,cAAc,IAAI,eAAe,CAAC;QACvD,MAAM,YAAY,GAAG,IAAI,CAAC,iBAAiB,KAAK,IAAI,IAAI,GAAG,GAAG,IAAI,CAAC,iBAAiB,IAAI,UAAU,CAAC,gBAAgB,CAAC,iBAAiB,CAAC;QACtI,MAAM,eAAe,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAEvD,MAAM,SAAS,GACb,IAAI,CAAC,aAAa,KAAK,QAAQ;YAC/B,IAAI,CAAC,cAAc,KAAK,QAAQ;YAChC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,QAAQ,CAAC;YACvE,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,MAAM,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,QAAQ,CAAC,CAAC;QAE3E,IAAI,SAAS,EAAE,CAAC;YACd,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;YAC1B,OAAO;QACT,CAAC;QAED,MAAM,eAAe,GACnB,IAAI,CAAC,cAAc,KAAK,cAAc;YACtC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,MAAM,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,cAAc,CAAC,CAAC;QAEjF,IAAI,eAAe,EAAE,CAAC;YACpB,IAAI,IAAI,CAAC,iBAAiB,KAAK,IAAI;gBAAE,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;YAClE,IAAI,GAAG,GAAG,IAAI,CAAC,iBAAiB,GAAG,UAAU,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,CAAC;gBACnF,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC9B,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC9B,CAAC;YACD,OAAO;QACT,CAAC;QACD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAE9B,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,IAAI,eAAe,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,eAAe,CAAC,EAAE,CAAC;YAC1F,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;YAC7B,OAAO;QACT,CAAC;QAED,MAAM,WAAW,GACf,IAAI,CAAC,eAAe,KAAK,IAAI;YAC7B,GAAG,GAAG,IAAI,CAAC,eAAe,IAAI,UAAU,CAAC,gBAAgB,CAAC,aAAa,CAAC;QAC1E,MAAM,qBAAqB,GACzB,IAAI,CAAC,iBAAiB,KAAK,IAAI;YAC/B,GAAG,GAAG,IAAI,CAAC,iBAAiB,IAAI,UAAU,CAAC,gBAAgB,CAAC,uBAAuB,CAAC;QAEtF,uBAAuB;QACvB,2BAA2B;QAC3B,0DAA0D;QAC1D,kDAAkD;QAClD,MAAM,mBAAmB,GACvB,IAAI,CAAC,aAAa,KAAK,IAAI;YAC3B,GAAG,GAAG,IAAI,CAAC,aAAa,GAAG,UAAU,CAAC,gBAAgB,CAAC,mBAAmB,CAAC;QAC7E,MAAM,gBAAgB,GACpB,IAAI,CAAC,cAAc,KAAK,IAAI;YAC5B,GAAG,GAAG,IAAI,CAAC,cAAc,GAAG,UAAU,CAAC,gBAAgB,CAAC,gBAAgB,CAAC;QAC3E,MAAM,qBAAqB,GACzB,IAAI,CAAC,eAAe,KAAK,IAAI;YAC7B,IAAI,CAAC,aAAa,KAAK,IAAI;YAC3B,GAAG,GAAG,IAAI,CAAC,aAAa,IAAI,UAAU,CAAC,gBAAgB,CAAC,sBAAsB;YAC9E,GAAG,GAAG,IAAI,CAAC,eAAe,GAAG,UAAU,CAAC,gBAAgB,CAAC,qBAAqB;YAC9E,CAAC,YAAY,CAAC;QAEhB,IAAI,mBAAmB,IAAI,gBAAgB,IAAI,qBAAqB,EAAE,CAAC;YACrE,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;YAC9B,OAAO;QACT,CAAC;QAED,wBAAwB;QACxB,+EAA+E;QAC/E,6CAA6C;QAC7C,MAAM,gBAAgB,GAAG,IAAI,CAAC,uBAAuB,IAAI,IAAI,CAAC,QAAQ,CAAC;QACvE,MAAM,oBAAoB,GACxB,gBAAgB,KAAK,IAAI;YACzB,GAAG,GAAG,gBAAgB,GAAG,UAAU,CAAC,gBAAgB,CAAC,gBAAgB,CAAC;QACxE,MAAM,iBAAiB,GAAG,SAAS,IAAI,IAAI,CAAC,sBAAsB,IAAI,CAAC,eAAe,IAAI,oBAAoB,CAAC;QAC/G,IAAI,iBAAiB,EAAE,CAAC;YACtB,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;YAC/B,OAAO;QACT,CAAC;QAED,uBAAuB;QACvB,uEAAuE;QACvE,IAAI,WAAW,IAAI,qBAAqB,EAAE,CAAC;YACzC,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;YAC9B,OAAO;QACT,CAAC;QAED,IAAI,CAAC,SAAS,EAAE,CAAC;YACf,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC;YAClE,OAAO;QACT,CAAC;QAED,IAAI,CAAC,YAAY,EAAE,CAAC;YAClB,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;YACjC,OAAO;QACT,CAAC;QAED,IAAI,IAAI,CAAC,mBAAmB,KAAK,QAAQ,EAAE,CAAC;YAC1C,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;YAC/B,OAAO;QACT,CAAC;QAED,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;IACjC,CAAC;IAEO,WAAW;QACjB,MAAM,GAAG,GAAG,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACnD,IAAI,CAAC,GAAG,CAAC,MAAM;YAAE,OAAO;QACxB,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QACvB,IAAI,GAAG,GAAG,IAAI,CAAC,cAAc;YAAE,OAAO;QACtC,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;IAC5B,CAAC;IAEO,UAAU,CAAC,IAA4B,EAAE,eAAwB,KAAK;QAC5E,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,KAAK,IAAI,EAAE,CAAC;YAC/B,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;YACzB,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;YACxB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YAC1B,OAAO;QACT,CAAC;QAED,IAAI,YAAY,EAAE,CAAC;YACjB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC;IACH,CAAC;IAEO,cAAc,CAAC,QAAiB,KAAK;QAC3C,MAAM,GAAG,GAAG,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACnD,MAAM,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC;QACtB,MAAM,CAAC,GAAG,GAAG,CAAC,SAAS,CAAC;QACxB,MAAM,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;QACxD,MAAM,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;QAC1D,MAAM,UAAU,GAAyB;YACvC,KAAK,EAAE,GAAG,CAAC,KAAK;YAChB,QAAQ,EAAE,GAAG,CAAC,QAAQ;YACtB,WAAW,EAAE,OAAO;YACpB,aAAa,EAAE,SAAS;YACxB,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK;SACzB,CAAC;QAEF,IAAI,GAAG,CAAC,MAAM,EAAE,CAAC;YACf,MAAM,IAAI,GAAG,0BAA0B,GAAG,0BAA0B,CAAC;YACrE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,0BAA0B,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC;QACzG,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,gBAAgB,CAAC;QAChD,CAAC;QAED,MAAM,GAAG,GAAG,GAAG,UAAU,CAAC,KAAK,IAAI,UAAU,CAAC,KAAK,IAAI,UAAU,CAAC,WAAW,IAAI,UAAU,CAAC,aAAa,EAAE,CAAC;QAC5G,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,gBAAgB,KAAK,GAAG;YAAE,OAAO;QAEpD,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;QACzB,IAAI,IAAI,CAAC,gBAAgB,KAAK,GAAG,EAAE,CAAC;YAClC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;YAC9B,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;QAC9B,CAAC;QACD,IAAI,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAC,CAAC;IAC9B,CAAC;IAEO,YAAY,CAAC,MAA4B;QAC/C,MAAM,MAAM,GAAG,MAAM,CAAC,KAAK,KAAK,OAAO;YACrC,CAAC,CAAC,MAAM;YACR,CAAC,CAAC,MAAM,CAAC,KAAK,KAAK,QAAQ;gBACzB,CAAC,CAAC,QAAQ;gBACV,CAAC,CAAC,QAAQ,CAAC;QACf,MAAM,GAAG,GAAG,MAAM,CAAC,aAAa;YAC9B,CAAC,CAAC,GAAG,MAAM,CAAC,WAAW,IAAI,MAAM,CAAC,aAAa,EAAE;YACjD,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC;QACvB,OAAO,CAAC,GAAG,CAAC,GAAG,MAAM,KAAK,GAAG,EAAE,CAAC,CAAC;IACnC,CAAC;CACF;ACzgBD,MAAM,YAAY;IAKhB;QAJQ,UAAK,GAAQ,IAAI,CAAC;QAClB,cAAS,GAAQ,IAAI,CAAC;QACtB,aAAQ,GAAG,aAAa,GAAG,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;IAE3C,CAAC;IAEhB,IAAI;QACF,KAAK,CAAC,IAAI,CAAC;YACT,KAAK,EAAE,UAAU,CAAC,KAAK,CAAC,SAAS;YACjC,QAAQ,EAAE,GAAG,EAAE;gBACb,MAAM,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC;gBACtC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;YACjC,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAED;;;OAGG;IACH,aAAa,CACX,MAAc,EACd,UAAsC,EACtC,EAAc,EACd,SAAqB;QAErB,MAAM,CAAC,SAAS,CAAC,2BAA2B,CAAC,CAAC;QAC9C,MAAM,CAAC,IAAI,CAAC,2BAA2B,MAAM,EAAE,CAAC,CAAC;QAEjD,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,CAAC;YACrB,MAAM;YAEN,gCAAgC;YAChC,2EAA2E;YAC3E,UAAU,EAAE,UAAU,IAAI,EAAE;YAE5B,OAAO,EAAE,EAAE;YACX,KAAK,EAAE,CAAC,CAAM,EAAE,EAAE;gBAChB,MAAM,CAAC,SAAS,CAAC,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;gBACtD,MAAM,CAAC,IAAI,CAAC,8BAA8B,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YAClE,CAAC;YACD,SAAS,EAAE,GAAG,EAAE;gBACd,MAAM,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;gBACvC,SAAS,EAAE,CAAC;YACd,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAED,eAAe,CACb,UAA4B,EAC5B,SAAwC,EACxC,YAA4D,EAC5D,SAAqB;QAErB,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;YAChB,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC;YACpC,MAAM,CAAC,IAAI,CAAC,kDAAkD,CAAC,CAAC;YAChE,OAAO;QACT,CAAC;QAED,MAAM,CAAC,IAAI,CAAC,yCAAyC,CAAC,CAAC;QAEvD,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;YAChB,MAAM,EAAE,wBAAwB;YAChC,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,OAAO,EAAE,CAAC,CAAM,EAAE,EAAE;gBAClB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;gBACnB,MAAM,CAAC,IAAI,CAAC,uCAAuC,CAAC,CAAC,KAAK,EAAE,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;gBACzE,UAAU,CAAC,CAAC,CAAC,CAAC;YAChB,CAAC;YACD,KAAK,EAAE,CAAC,CAAM,EAAE,EAAE;gBAChB,MAAM,CAAC,SAAS,CAAC,gBAAgB,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvD,MAAM,CAAC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YACpD,CAAC;YACD,SAAS,EAAE,CAAC,GAAQ,EAAE,IAAS,EAAE,EAAE;gBACjC,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;YACvB,CAAC;YACD,YAAY,EAAE,CAAC,KAAuB,EAAE,EAAW,EAAE,EAAE;gBACrD,YAAY,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;YAC1B,CAAC;YACD,SAAS,EAAE,GAAG,EAAE;gBACd,MAAM,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;gBACxC,SAAS,EAAE,CAAC;YACd,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAED,QAAQ;QACN,OAAO,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;IAED,WAAW;QACT,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED,OAAO;QACL,MAAM,CAAC,IAAI,CAAC,yCAAyC,CAAC,CAAC;QAEvD,IAAI,CAAC;YACH,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,EAAE,CAAC;QAC7B,CAAC;QAAC,MAAM,CAAC,CAAA,CAAC;QAEV,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAEtB,IAAI,CAAC;YACH,IAAI,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE,CAAC;QAC1B,CAAC;QAAC,MAAM,CAAC,CAAA,CAAC;QAEV,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACpB,CAAC;CACF;AC/GD,MAAM,iBAAiB;IAIrB,YACU,KAAS,EACT,MAAa,EACb,SAAgB,EAChB,QAAe,EACf,KAAkB,EAClB,WAA4B,EAC5B,QAA6B;QAN7B,UAAK,GAAL,KAAK,CAAI;QACT,WAAM,GAAN,MAAM,CAAO;QACb,cAAS,GAAT,SAAS,CAAO;QAChB,aAAQ,GAAR,QAAQ,CAAO;QACf,UAAK,GAAL,KAAK,CAAa;QAClB,gBAAW,GAAX,WAAW,CAAiB;QAC5B,aAAQ,GAAR,QAAQ,CAAqB;QAV/B,UAAK,GAAG,IAAI,GAAG,EAAe,CAAC;QAC/B,eAAU,GAAG,IAAI,GAAG,EAAyC,CAAC;IAUpE,CAAC;IAEH,OAAO,CAAC,MAAa;QACnB,IAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC;YAAE,OAAO;QAClC,IAAI,YAAY,GAAO,IAAI,CAAC;QAE5B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;YAChB,MAAM,EAAC,wBAAwB;YAC/B,QAAQ,EAAC,IAAI,CAAC,QAAQ;YACtB,OAAO,EAAC,CAAC,CAAK,EAAC,EAAE;gBACf,YAAY,GAAC,CAAC,CAAC;gBACf,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,EAAC,CAAC,CAAC,CAAC;gBACzB,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAC,EAAE,OAAO,EAAC,MAAM,EAAE,IAAI,EAAC,IAAI,CAAC,MAAM,EAAE,KAAK,EAAC,YAAY,EAAE,IAAI,EAAC,MAAM,EAAE,UAAU,EAAC,IAAI,CAAC,SAAS,EAAE,EAAC,CAAC,CAAC;YACtH,CAAC;YACD,KAAK,EAAC,CAAC,CAAK,EAAC,EAAE,CAAA,MAAM,CAAC,SAAS,CAAC,uBAAuB,GAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAC1E,SAAS,EAAC,CAAC,GAAO,EAAC,IAAQ,EAAC,EAAE;gBAC5B,IAAG,IAAI,EAAC,CAAC;oBACP,+HAA+H;oBAC/H,MAAM,EAAE,GAAG,YAAY,EAAE,WAAW,EAAE,EAAmC,CAAC;oBAC1E,IAAG,EAAE,EAAC,CAAC;wBACL,IAAI,CAAC,QAAQ,EAAE,mBAAmB,EAAE,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;oBACnD,CAAC;oBACD,YAAY,CAAC,YAAY,CAAC;wBACxB,IAAI;wBACJ,MAAM,EAAC,CAAC,EAAC,IAAI,EAAC,OAAO,EAAC,OAAO,EAAC,KAAK,EAAC,IAAI,EAAC,IAAI,EAAC,EAAC,EAAC,IAAI,EAAC,OAAO,EAAC,OAAO,EAAC,KAAK,EAAC,IAAI,EAAC,IAAI,EAAC,CAAC;wBACtF,OAAO,EAAC,CAAC,GAAO,EAAC,EAAE,CAAA,YAAY,CAAC,IAAI,CAAC,EAAE,OAAO,EAAC,EAAE,OAAO,EAAC,OAAO,EAAE,IAAI,EAAC,IAAI,CAAC,MAAM,EAAE,EAAE,IAAI,EAAC,GAAG,EAAE,CAAC;wBACjG,KAAK,EAAC,CAAC,CAAK,EAAC,EAAE,CAAA,MAAM,CAAC,SAAS,CAAC,uBAAuB,GAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;qBAC3E,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;YACD,YAAY,EAAC,GAAE,EAAE,GAAC,CAAC;YACnB,aAAa,EAAC,CAAC,KAAsB,EAAC,IAAW,EAAC,EAAU,EAAC,EAAE;gBAC7D,IAAI,CAAC,QAAQ,EAAE,mBAAmB,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;gBACxD,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;gBACvC,IAAG,CAAC,IAAI,EAAC,CAAC;oBACR,IAAI,GAAG,IAAI,GAAG,EAA4B,CAAC;oBAC3C,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;gBACpC,CAAC;gBAED,IAAG,CAAC,EAAE,EAAC,CAAC;oBACN,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;oBAChC,IAAG,IAAI,EAAC,CAAC;wBACP,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;wBACrD,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;oBACxB,CAAC;yBAAM,CAAC;wBACN,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;oBACxD,CAAC;oBACD,OAAO;gBACT,CAAC;gBAED,MAAM,gBAAgB,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,EAAE,CAAC,CAAC;gBACzG,IAAG,gBAAgB,EAAC,CAAC;oBACnB,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,EAAE,gBAAgB,CAAC,CAAC;oBACjE,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,EAAE,CAAC,CAAC;gBACnC,CAAC;gBAED,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;gBAC1B,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;YACrD,CAAC;YACD,SAAS,EAAC,GAAE,EAAE,CAAA,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC;SACnD,CAAC,CAAC;IACL,CAAC;IAED,UAAU,CAAC,EAAS,EAAE,SAAiB,IAAI,EAAE,SAAiB,IAAI;QAChE,IAAI,OAAO,GAAG,KAAK,CAAC;QACpB,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QAC7B,IAAG,CAAC,EAAC,CAAC;YACJ,IAAG,MAAM,EAAC,CAAC;gBACT,IAAG,CAAC;oBAAA,CAAC,CAAC,MAAM,EAAE,CAAC;gBAAA,CAAC;gBAAA,MAAK,CAAC,CAAA,CAAC;YACzB,CAAC;YACD,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YACtB,OAAO,GAAG,IAAI,CAAC;QACjB,CAAC;QAED,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QACvC,IAAG,MAAM,EAAC,CAAC;YACT,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,CAAC;YACvE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YAC3B,OAAO,GAAG,IAAI,CAAC;QACjB,CAAC;QAED,IAAG,OAAO,IAAI,MAAM,EAAC,CAAC;YACpB,IAAI,CAAC,QAAQ,EAAE,mBAAmB,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3C,CAAC;IACH,CAAC;IAED,UAAU;QACR,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;QAC7E,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC3C,CAAC;CACF;ACtGD,wDAAwD;AACxD,6DAA6D;AAE7D,MAAM,cAAc;IA8BlB,YACU,GAAa,EACb,UAA4B,EAC5B,WAA6B;QAF7B,QAAG,GAAH,GAAG,CAAU;QACb,eAAU,GAAV,UAAU,CAAkB;QAC5B,gBAAW,GAAX,WAAW,CAAkB;QA7B/B,WAAM,GAAG,IAAI,iBAAiB,EAAE,CAAC;QAEjC,WAAM,GAAQ,IAAI,CAAC;QACnB,cAAS,GAAkB,IAAI,CAAC;QAChC,WAAM,GAAkB,IAAI,CAAC;QAC7B,gBAAW,GAA6B,IAAI,CAAC;QAE7C,eAAU,GAAG,KAAK,CAAC;QACnB,wBAAmB,GAAG,KAAK,CAAC;QAE5B,iBAAY,GAAuB,IAAI,CAAC;QACxC,kBAAa,GAAG,KAAK,CAAC;QACtB,cAAS,GAAG,KAAK,CAAC;QAElB,kBAAa,GAAG,IAAI,kBAAkB,EAAE,CAAC;QAGjD,0BAA0B;QAClB,cAAS,GAAG,KAAK,CAAC;QAClB,uBAAkB,GAAkB,IAAI,CAAC;QACzC,kBAAa,GAAkB,IAAI,CAAC;QACpC,yBAAoB,GAAkB,IAAI,CAAC;QAC3C,4BAAuB,GAAG,KAAK,CAAC;QAChC,0BAAqB,GAAG,CAAC,CAAC;QAQhC,IAAI,CAAC,OAAO,GAAG,IAAI,YAAY,EAAE,CAAC;QAClC,IAAI,CAAC,KAAK,GAAG,IAAI,YAAY,EAAE,CAAC;QAChC,IAAI,CAAC,SAAS,GAAG,IAAI,wBAAwB,EAAE,CAAC;QAChD,IAAI,CAAC,gBAAgB,GAAG,IAAI,sBAAsB,CAAC,CAAC,MAA4B,EAAE,EAAE;YAClF,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,CAAC;QACtE,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;IAED,KAAK,CAAC,IAAI,CAAC,GAAe;QACxB,IAAI,CAAC,gBAAgB,CAAC,aAAa,EAAE,CAAC;QACtC,IAAI,CAAC;YACH,MAAM,MAAM,GAAG,SAAS,CAAC,YAAY,EAAE,CAAC,MAAM,CAAC;YAC/C,MAAM,QAAQ,GAAG,SAAS,CAAC,YAAY,EAAE,CAAC,SAAS,CAAC;YAEpD,MAAM,IAAI,GAAe,IAAI,UAAU,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;YAC1D,MAAM,GAAG,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;YAChC,MAAM,OAAO,GAAG,MAAM,GAAG,CAAC,mBAAmB,EAAE,CAAC;YAEhD,IAAI,CAAC,OAAO,CAAC,aAAa,CACxB,GAAG,CAAC,MAAM,EACV,OAAO,CAAC,SAAS,EAAE,UAAU,EAC7B,GAAG,EAAE;gBACH,IAAI,CAAC,gBAAgB,CAAC,cAAc,EAAE,CAAC;gBACvC,IAAI,CAAC,2BAA2B,CAAC,GAAG,CAAC,CAAC;YACxC,CAAC,EACD,GAAG,EAAE;gBACH,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,CAAC;gBAC3C,MAAM,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC;YACxC,CAAC,CACF,CAAC;QACJ,CAAC;QAAC,OAAO,CAAM,EAAE,CAAC;YAChB,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;YACjC,MAAM,CAAC,SAAS,CAAC,cAAc,GAAG,CAAC,CAAC,EAAE,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC;QACvD,CAAC;IACH,CAAC;IAEO,2BAA2B,CAAC,GAAe;QAEjD,IAAI,CAAC,OAAO,CAAC,eAAe,CAC1B,CAAC,CAAM,EAAE,EAAE;YAET,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YAChB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;YACjC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;YACpB,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAE3B,kBAAkB;YAClB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;YAC/B,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;YAC1C,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,CAAC;YAE5C,MAAM,CAAC,SAAS,CAAC,mCAAmC,CAAC,CAAC;YACtD,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;QAC/B,CAAC,EACD,CAAC,GAAQ,EAAE,IAAS,EAAE,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,EAChE,CAAC,KAAU,EAAE,EAAO,EAAE,EAAE;YACtB,IAAI,EAAE,IAAI,KAAK,CAAC,IAAI,KAAK,OAAO,EAAE,CAAC;gBACjC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YACnD,CAAC;QACH,CAAC,EACD,GAAG,EAAE;YACH,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC;YACpC,MAAM,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC;QACxC,CAAC,CACF,CAAC;IACJ,CAAC;IAEO,gBAAgB,CAAC,GAAQ;QAC/B,OAAO,GAAG,EAAE,UAAU,EAAE,IAAI,IAAI,GAAG,CAAC;IACtC,CAAC;IAEO,kBAAkB,CAAC,GAAe;QAExC,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;QAEzB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;YACf,OAAO,EAAE,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,CAAC,MAAM,EAAE;YAChD,OAAO,EAAE,CAAC,GAAQ,EAAE,EAAE;gBAEpB,MAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;gBACxC,MAAM,MAAM,GAAG,CAAC,CAAC,IAAI,EAAE,MAAM,CAAC;gBAE9B,IAAI,MAAM,EAAE,CAAC;oBACX,MAAM,CAAC,SAAS,CAAC,yBAAyB,CAAC,CAAC;oBAC5C,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;gBAC9B,CAAC;qBAAM,CAAC;oBACN,MAAM,CAAC,SAAS,CAAC,6BAA6B,CAAC,CAAC;oBAChD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;oBAChC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;gBAC3B,CAAC;YACH,CAAC;YACD,KAAK,EAAE,GAAG,EAAE;gBACV,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;gBACjC,IAAI,CAAC,KAAK,EAAE,CAAC;YACf,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAEO,iBAAiB,CAAC,GAAe;QACvC,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;QACzB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;YACf,OAAO,EAAE;gBACP,OAAO,EAAE,MAAM;gBACf,IAAI,EAAE,GAAG,CAAC,MAAM;gBAChB,KAAK,EAAE,WAAW;gBAClB,OAAO,EAAE,GAAG,CAAC,OAAO;aACrB;SACF,CAAC,CAAC;IACL,CAAC;IAEO,cAAc,CAAC,GAAe;QAEpC,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;QAEzB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;YACf,OAAO,EAAE;gBACP,OAAO,EAAE,QAAQ;gBACjB,IAAI,EAAE,GAAG,CAAC,MAAM;gBAChB,UAAU,EAAE,UAAU,CAAC,SAAS,CAAC,aAAa;gBAC9C,WAAW,EAAE,QAAQ,GAAG,CAAC,MAAM,EAAE;aAClC;YACD,OAAO,EAAE,GAAG,EAAE;gBACZ,MAAM,CAAC,SAAS,CAAC,0BAA0B,CAAC,CAAC;gBAC7C,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;YAC9B,CAAC;YACD,KAAK,EAAE,GAAG,EAAE;gBACV,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;gBACjC,IAAI,CAAC,KAAK,EAAE,CAAC;YACf,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAEO,kBAAkB,CAAC,GAAe,EAAE,GAAQ,EAAE,IAAS;QAE7D,MAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;QACxC,MAAM,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;QAChC,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC;QAErC,IAAI,KAAK,KAAK,OAAO,IAAI,SAAS,KAAK,GAAG,EAAE,CAAC;YAC3C,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE,CAAC;gBAC9B,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;gBAChC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;YAC3B,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;gBACjC,IAAI,CAAC,KAAK,EAAE,CAAC;YACf,CAAC;YACD,OAAO;QACT,CAAC;QAED,IAAI,KAAK,KAAK,QAAQ,EAAE,CAAC;YAEvB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,MAAM,CAAC;YAChC,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC;YAErC,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;YACxB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC;YACpC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAE1B,MAAM,CAAC,SAAS,CAAC,uBAAuB,CAAC,CAAC;YAE1C,IAAI,CAAC,WAAW,GAAG,IAAI,iBAAiB,CACtC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EACvB,GAAG,CAAC,MAAM,EACV,IAAI,CAAC,SAAU,EACf,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAC1B,IAAI,CAAC,KAAK,EACV,IAAI,CAAC,WAAW,EAChB;gBACE,mBAAmB,EAAE,CAAC,MAAc,EAAE,EAAqB,EAAE,EAAE;oBAC7D,IAAI,CAAC,gBAAgB,CAAC,oBAAoB,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;gBACzD,CAAC;gBACD,mBAAmB,EAAE,CAAC,MAAc,EAAE,KAAuB,EAAE,EAAW,EAAE,EAAE;oBAC5E,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;gBAC/D,CAAC;gBACD,mBAAmB,EAAE,CAAC,MAAc,EAAE,EAAE;oBACtC,IAAI,CAAC,gBAAgB,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;gBACrD,CAAC;aACF,CACF,CAAC;YAEF,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YAC9B,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC;QACjC,CAAC;QAED,IAAI,KAAK,KAAK,OAAO,EAAE,CAAC;YACtB,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YAExC,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;YAChC,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE,CAAC;gBAChC,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;YACvC,CAAC;YAED,MAAM,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC;YACxC,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE,CAAC;gBACpC,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;YAC3C,CAAC;YAED,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,CAAC;QACvC,CAAC;QAED,IAAI,KAAK,KAAK,WAAW,EAAE,CAAC;YAC1B,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;YACjC,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,OAAO;QACT,CAAC;QAED,IAAI,IAAI;YAAE,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;IACnD,CAAC;IAEO,SAAS,CAAC,GAAe,EAAE,UAAe;QAChD,IAAI,CAAC,UAAU;YAAE,OAAO;QACxB,UAAU,CAAC,OAAO,CAAC,CAAC,CAAM,EAAE,EAAE;YAC5B,MAAM,MAAM,GAAG,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YAC7B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;gBAAE,OAAO;YAErC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACxB,IAAI,IAAI,CAAC,WAAW,IAAI,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,CAAC;gBAC/C,IAAI,CAAC,gBAAgB,CAAC,qBAAqB,EAAE,CAAC;gBAC9C,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACnC,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;IAChC,CAAC;IAEO,mBAAmB,CAAC,GAAe;QACzC,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAClD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;QAExC,MAAM,WAAW,GAAG,QAAQ,CAAC,cAAc;aACxC,MAAM,CAAC,CAAC,EAAU,EAAE,EAAE,CAAC,EAAE,KAAK,IAAI,CAAC,MAAM,CAAC;aAC1C,MAAM,CAAC;QACV,IAAI,CAAC,gBAAgB,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC;IAC/D,CAAC;IAEO,oBAAoB,CAAC,GAAe;QAC1C,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,CAAC;QACrC,IAAI,CAAC,oBAAoB,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE;YAClD,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,CAAC;QACvC,CAAC,EAAE,UAAU,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;IAChD,CAAC;IAEO,mBAAmB;QACzB,IAAI,IAAI,CAAC,oBAAoB,KAAK,IAAI,EAAE,CAAC;YACvC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;YAChD,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QACnC,CAAC;QACD,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;QACrC,IAAI,CAAC,qBAAqB,GAAG,CAAC,CAAC;IACjC,CAAC;IAEO,0BAA0B,CAAC,GAAe;QAChD,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,UAAU;YAAE,OAAO;QAC7C,IAAI,IAAI,CAAC,uBAAuB;YAAE,OAAO;QAEzC,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QACvB,IAAI,GAAG,GAAG,IAAI,CAAC,qBAAqB,GAAG,UAAU,CAAC,IAAI,CAAC,yBAAyB;YAAE,OAAO;QACzF,IAAI,CAAC,qBAAqB,GAAG,GAAG,CAAC;QACjC,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;QAEpC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;YACf,OAAO,EAAE,EAAE,OAAO,EAAE,kBAAkB,EAAE,IAAI,EAAE,GAAG,CAAC,MAAM,EAAE;YAC1D,OAAO,EAAE,CAAC,GAAQ,EAAE,EAAE;gBACpB,MAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;gBACxC,MAAM,YAAY,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC;gBAChF,MAAM,SAAS,GAAG,IAAI,GAAG,EAAU,CAAC;gBAEpC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAM,EAAE,EAAE;oBAC9B,MAAM,MAAM,GAAG,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;oBAC7B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;wBAAE,OAAO;oBACrC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;oBACtB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;oBACxB,IAAI,IAAI,CAAC,WAAW,IAAI,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,CAAC;wBAC/C,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;oBACnC,CAAC;gBACH,CAAC,CAAC,CAAC;gBAEH,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,cAAc,CAAC;gBACjE,QAAQ,CAAC,OAAO,CAAC,CAAC,EAAU,EAAE,EAAE;oBAC9B,IAAI,EAAE,KAAK,IAAI,CAAC,MAAM;wBAAE,OAAO;oBAC/B,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC;wBACvB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;wBACvB,IAAI,CAAC,WAAW,EAAE,UAAU,CAAC,EAAE,CAAC,CAAC;oBACnC,CAAC;gBACH,CAAC,CAAC,CAAC;gBAEH,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;gBAC9B,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;YACvC,CAAC;YACD,KAAK,EAAE,GAAG,EAAE;gBACV,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;YACvC,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAEO,iBAAiB,CAAC,GAAe,EAAE,MAAc;QACvD,IAAI,MAAM,KAAK,IAAI,CAAC,MAAM;YAAE,OAAO;QACnC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC3B,IAAI,CAAC,WAAW,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;QACrC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;IAChC,CAAC;IAED,wCAAwC;IACxC,QAAQ;IACR,wCAAwC;IAEhC,cAAc;QACpB,MAAM,GAAG,GAAG,SAAS,CAAC,iBAAiB,EAAE,CAAC;QAC1C,MAAM,UAAU,GAAG,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC;QAChH,MAAM,YAAY,GAAG,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,YAAY,CAAC;QAExH,OAAO;YACL,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC,aAAa,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;YAC3G,WAAW,EAAE,GAAG,CAAC,WAAW,KAAK,KAAK;YACtC,aAAa,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC,eAAe,EAAE,YAAY,CAAC,CAAC;SACjH,CAAC;IACJ,CAAC;IAEO,sBAAsB,CAAC,EAAqB,EAAE,UAAkB,EAAE,YAAoB;QAC5F,IAAI,CAAC;YACH,MAAM,MAAM,GAAG,EAAE,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,KAAK,OAAO,CAAC,CAAC;YACpE,IAAI,CAAC,MAAM,IAAI,OAAO,MAAM,CAAC,aAAa,KAAK,UAAU,IAAI,OAAO,MAAM,CAAC,aAAa,KAAK,UAAU;gBAAE,OAAO;YAEhH,MAAM,CAAC,GAAG,MAAM,CAAC,aAAa,EAAE,CAAC;YACjC,MAAM,SAAS,GAAG,CAAC,CAAC,CAAC,SAAS,IAAI,CAAC,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAA8B,CAAC,CAAC;YAC3G,SAAS,CAAC,CAAC,CAAC,CAAC,UAAU,GAAG,UAAU,CAAC;YACrC,SAAS,CAAC,CAAC,CAAC,CAAC,YAAY,GAAG,YAAY,CAAC;YACzC,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC;YAExB,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAM,EAAE,EAAE;gBACvC,OAAO,CAAC,GAAG,CAAC,2BAA2B,EAAE,CAAC,EAAE,OAAO,IAAI,CAAC,CAAC,CAAC;YAC5D,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,OAAO,CAAM,EAAE,CAAC;YAChB,OAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE,CAAC,EAAE,OAAO,IAAI,CAAC,CAAC,CAAC;QACjE,CAAC;IACH,CAAC;IAED,qBAAqB;IACrB,8BAA8B;IAC9B,gBAAgB;IAChB,uDAAuD;IACvD,sDAAsD;IACtD,SAAS;IACT,gCAAgC;IAChC,2BAA2B;IAC3B,uEAAuE;IACvE,eAAe;IACf,YAAY;IACZ,QAAQ;IACR,QAAQ;IACR,IAAI;IAEG,OAAO;QACZ,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YACjB,MAAM,CAAC,SAAS,CAAC,mCAAmC,CAAC,CAAC;YACtD,OAAO;QACT,CAAC;QACD,MAAM,QAAQ,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QAEvC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC;YACtB,MAAM,EAAE;gBACN,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE;gBAC7C,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE;aAC9C;YAED,OAAO,EAAE,CAAC,IAAS,EAAE,EAAE;gBACrB,wEAAwE;gBACxE,IAAI,CAAC;oBACH,wHAAwH;oBACxH,MAAM,EAAE,GAAkC,IAAI,CAAC,MAAM,EAAE,WAAW,EAAE,EAAE,CAAC;oBAEvE,IAAI,EAAE,EAAE,CAAC;wBACP,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,EAAE,CAAC,CAAC;wBAC9C,IAAI,CAAC,sBAAsB,CAAC,EAAE,EAAE,QAAQ,CAAC,WAAW,EAAE,QAAQ,CAAC,aAAa,CAAC,CAAC;wBAC9E,MAAM,IAAI,GAAG,GAAG,EAAE;4BAChB,MAAM,OAAO,GAAG;gCACd,GAAG,EAAE,EAAE,CAAC,kBAAkB;gCAC1B,SAAS,EAAE,EAAE,CAAC,cAAc;gCAC5B,UAAU,EAAG,EAAU,CAAC,eAAe,IAAI,KAAK;gCAChD,SAAS,EAAE,EAAE,CAAC,iBAAiB;gCAC/B,EAAE,EAAE,IAAI,CAAC,GAAG,EAAE;6BACf,CAAC;4BAEF,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC;4BAC1C,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;wBACzC,CAAC,CAAC;wBAEF,wBAAwB;wBACxB,IAAI,EAAE,CAAC;wBAEP,EAAE,CAAC,0BAA0B,GAAG,GAAG,EAAE;4BACnC,OAAO,CAAC,GAAG,CAAC,UAAU,GAAG,EAAE,CAAC,kBAAkB,CAAC,CAAC;4BAChD,IAAI,EAAE,CAAC;wBACT,CAAC,CAAC;wBAEF,EAAE,CAAC,sBAAsB,GAAG,GAAG,EAAE;4BAC/B,OAAO,CAAC,GAAG,CAAC,gBAAgB,GAAG,EAAE,CAAC,cAAc,CAAC,CAAC;4BAClD,IAAI,EAAE,CAAC;wBACT,CAAC,CAAC;wBAEF,2EAA2E;wBAC1E,EAAU,CAAC,uBAAuB,GAAG,GAAG,EAAE;4BACzC,OAAO,CAAC,GAAG,CAAC,iBAAiB,GAAG,CAAE,EAAU,CAAC,eAAe,IAAI,KAAK,CAAC,CAAC,CAAC;4BACxE,IAAI,EAAE,CAAC;wBACT,CAAC,CAAC;wBAEF,EAAE,CAAC,yBAAyB,GAAG,GAAG,EAAE;4BAClC,OAAO,CAAC,GAAG,CAAC,gBAAgB,GAAG,EAAE,CAAC,iBAAiB,CAAC,CAAC;4BACrD,IAAI,EAAE,CAAC;wBACT,CAAC,CAAC;oBACJ,CAAC;yBAAM,CAAC;wBACN,OAAO,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC;wBACjD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,EAAE;4BAC5B,GAAG,EAAE,KAAK;4BACV,SAAS,EAAE,KAAK;4BAChB,UAAU,EAAE,KAAK;4BACjB,SAAS,EAAE,KAAK;4BAChB,EAAE,EAAE,IAAI,CAAC,GAAG,EAAE;yBACf,CAAC,CAAC;oBACL,CAAC;gBACH,CAAC;gBAAC,OAAO,CAAM,EAAE,CAAC;oBAChB,OAAO,CAAC,GAAG,CAAC,6BAA6B,EAAE,CAAC,EAAE,OAAO,IAAI,CAAC,CAAC,CAAC;gBAC9D,CAAC;gBAED,mCAAmC;gBACnC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;oBACf,OAAO,EAAE;wBACP,OAAO,EAAE,WAAW;wBACpB,KAAK,EAAE,IAAI;wBACX,KAAK,EAAE,IAAI;wBACX,OAAO,EAAE,QAAQ,CAAC,WAAW;wBAC7B,WAAW,EAAE,QAAQ,CAAC,WAAW;qBAClC;oBACD,IAAI;iBACL,CAAC,CAAC;YACL,CAAC;YAED,KAAK,EAAE,CAAC,CAAM,EAAE,EAAE;gBAChB,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC;gBACpC,MAAM,CAAC,SAAS,CAAC,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;gBACtD,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;YACrC,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAED,UAAU;QACR,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;QACzB,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;QACrC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;QACxD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;IACpC,CAAC;IAED,YAAY;QACV,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC;IACtC,CAAC;IAED,SAAS;QACP,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE,OAAO,EAAE,WAAW,EAAE,EAAE,CAAC,CAAC;IAC3D,CAAC;IAED,wCAAwC;IACxC,YAAY;IACZ,wCAAwC;IAEjC,cAAc,CAAC,WAAmB;QAEvC,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,UAAU;YAAE,OAAO;QAC7C,IAAI,IAAI,CAAC,SAAS;YAAE,OAAO;QAE3B,IAAI,CAAC,kBAAkB,GAAG,WAAW,CAAC;QAEtC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;YACf,OAAO,EAAE;gBACP,OAAO,EAAE,WAAW;gBACpB,MAAM,EAAE,IAAI;gBACZ,IAAI,EAAC,IAAI,CAAC,aAAa;gBACvB,QAAQ,EAAE,WAAW;aACtB;YACD,OAAO,EAAE,GAAG,EAAE;gBACZ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACtB,MAAM,CAAC,SAAS,CAAC,sBAAsB,WAAW,EAAE,CAAC,CAAC;gBACtD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;YAC3C,CAAC;YACD,KAAK,EAAE,GAAG,EAAE;gBACV,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBACvB,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;YAC5C,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAEM,aAAa;QAElB,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,SAAS;YAAE,OAAO;QAE5C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;YACf,OAAO,EAAE,EAAE,OAAO,EAAE,WAAW,EAAE,MAAM,EAAE,KAAK,EAAE;YAChD,OAAO,EAAE,GAAG,EAAE;gBACZ,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBACvB,MAAM,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC;gBACtC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;YAC5C,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAED,wCAAwC;IACxC,QAAQ;IACR,wCAAwC;IAExC,KAAK;QAEH,IAAI,CAAC;YAEH,IAAI,IAAI,CAAC,SAAS;gBAAE,IAAI,CAAC,aAAa,EAAE,CAAC;YAEzC,IAAI,CAAC;gBACH,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;oBACpB,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC;gBACvD,CAAC;YACH,CAAC;YAAC,MAAM,CAAC,CAAA,CAAC;YAEV,IAAI,CAAC,WAAW,EAAE,UAAU,EAAE,CAAC;YAC/B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YAExB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACvB,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAE3B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;YAC/B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;YAEpB,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;YAC1C,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;YAC/B,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC;YAE/B,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACvC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAEzC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QAE3B,CAAC;QAAC,OAAO,CAAM,EAAE,CAAC;YAChB,MAAM,CAAC,SAAS,CAAC,eAAe,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC;QAChD,CAAC;IACH,CAAC;IAEC,KAAK,CAAC,iBAAiB;QACvB,IAAG,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;QAExB,IAAG,CAAC,IAAI,CAAC,aAAa,EAAC,CAAC;YACtB,MAAM,EAAE,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;YAC5C,MAAM,KAAK,GAAG,EAAE,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;YACrC,IAAG,CAAC,KAAK;gBAAE,OAAO;YAClB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC1B,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;YAC9B,MAAM,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC;YACzC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;YACtC,KAAK,CAAC,OAAO,GAAG,GAAE,EAAE,GAAE,IAAG,IAAI,CAAC,aAAa;gBAAE,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC,CAAC;QAC3E,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;YAC1B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5C,MAAM,KAAK,GAAG,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;YACtC,IAAG,KAAK;gBAAE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;YACxC,MAAM,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC;YACzC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;QACzC,CAAC;IACH,CAAC;IAED,KAAK,CAAC,uBAAuB;QAC3B,IAAG,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;QACxB,IAAG,IAAI,CAAC,aAAa,EAAC,CAAC;YACrB,MAAM,CAAC,SAAS,CAAC,gDAAgD,CAAC,CAAC;YACnE,OAAO;QACT,CAAC;QAED,IAAG,CAAC,IAAI,CAAC,SAAS,EAAC,CAAC;YAClB,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5C,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YACnD,MAAM,KAAK,GAAG,SAAS,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;YAC5C,IAAG,CAAC,KAAK;gBAAE,OAAO;YAClB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;YAC9B,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QACpC,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;YACzB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5C,MAAM,KAAK,GAAG,GAAG,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;YACtC,IAAG,KAAK;gBAAE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;YACxC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;QACrC,CAAC;IACH,CAAC;IACO,KAAK,CAAC,kBAAkB;QAC9B,IAAG,CAAC,IAAI,CAAC,YAAY,EAAC,CAAC;YACrB,IAAI,CAAC,YAAY,GAAG,MAAM,SAAS,CAAC,YAAY,CAAC,YAAY,CAAC,EAAE,KAAK,EAAC,IAAI,EAAE,KAAK,EAAC,IAAI,EAAE,CAAC,CAAC;QAC5F,CAAC;QACD,OAAO,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;IACQ,iBAAiB,CAAC,KAAuB;QAChD,IAAG,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;QACxB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC;YACxB,MAAM,EAAC,CAAC,EAAE,IAAI,EAAC,OAAO,EAAE,OAAO,EAAC,KAAK,EAAE,IAAI,EAAC,KAAK,EAAE,CAAC;SACrD,CAAC,CAAC;QACH,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;IACnD,CAAC;CACF;AChpBD,6BAA6B;AAC7B,6DAA6D;AAE7D,MAAM,YAAY;IAER,aAAa,CAAC,GAAW;QAC/B,IAAI,CAAC;YACH,OAAO,IAAI,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC9D,CAAC;QAAC,MAAM,CAAC;YACP,OAAO,IAAI,CAAC;QACd,CAAC;IACH,CAAC;IA2CD;QAxCQ,QAAG,GAAG,IAAI,QAAQ,EAAE,CAAC;QAGrB,YAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAsB,CAAC;QAClE,iBAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAsB,CAAC;QAC5E,aAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAsB,CAAC;QACpE,iBAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAsB,CAAC;QAC5E,cAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAsB,CAAC;QACtE,UAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAsB,CAAC;QAEtE,QAAQ;QACA,cAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAsB,CAAC;QAEtE,YAAO,GAAsB,IAAI,CAAC;QAElC,WAAM,GAAG,IAAI,YAAY,EAAE,CAAC;QAC5B,QAAG,GAAG,IAAI,qBAAqB,EAAE,CAAC;QAClC,kBAAa,GAAG,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAqB,CAAC;QAC3E,mBAAc,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAmB,CAAC;QAE7E,iBAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAmB,CAAC;QACzE,kBAAa,GAAG,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAmB,CAAC;QAC3E,iBAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAmB,CAAC;QAEzE,WAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAmB,CAAC;QACnE,YAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAmB,CAAC;QACrE,YAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,qBAAqB,CAAmB,CAAC;QAC3E,aAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,sBAAsB,CAAmB,CAAC;QAE7E,eAAU,GAAG,KAAK,CAAC;QACnB,eAAU,GAAG,KAAK,CAAC;QACnB,UAAK,GAAG,KAAK,CAAC;QACd,eAAU,GAAU,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC;QACpD,mCAA8B,GAAG,UAAU,CAAC,SAAS,CAAC,6BAA6B,CAAC;QAE5F,oBAAoB;QACZ,cAAS,GAAG,KAAK,CAAC;QAClB,qBAAgB,GAAgC,IAAI,CAAC;QACrD,4BAAuB,GAAkB,IAAI,CAAC;QAGpD,MAAM,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QACtC,IAAI,EAAE;YAAE,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QAE/B,MAAM,CAAC,IAAI,CAAC,wCAAwC,CAAC,CAAC;QACtD,MAAM,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC;QAEjD,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CACtB,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAgB,EACpD,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAgB,CACtD,CAAC;QAEF,MAAM,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAqB,CAAC;QAC7E,MAAM,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC;QAEvC,IAAI,CAAC,UAAU,GAAG,IAAI,cAAc,CAAC,IAAI,CAAC,GAAG,EAAE,UAAU,EAAE,WAAW,CAAC,CAAC;QAExE,IAAI,CAAC,GAAG,CAAC,EAAE,CAAU,QAAQ,EAAE,CAAC,CAAA,EAAE;YAC9B,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;YACvB,OAAO,CAAC,GAAG,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,gBAAgB,CAAC;gBACpB,MAAM,EAAE,CAAC;aACV,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,GAAG,CAAC,EAAE,CAAU,cAAc,EAAE,KAAK,CAAC,EAAE;YAC3C,IAAI,CAAC,OAAO,CAAC,SAAS;gBACpB,KAAK;oBACH,CAAC,CAAC,8CAA8C;oBAChD,CAAC,CAAC,wCAAwC,CAAC;QACjD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,GAAG,CAAC,EAAE,CAAU,gBAAgB,EAAE,EAAE,CAAC,EAAE;YAC1C,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,oBAAoB,CAAC;QACzE,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,GAAG,CAAC,EAAE,CAAU,YAAY,EAAE,EAAE,CAAC,EAAE;YACtC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC,2BAA2B,CAAC;QACrF,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,EAAE,CAAU,mBAAmB,EAAE,WAAW,CAAC,EAAE;YACpD,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC;YAC7B,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,IAAI,CAAC,gBAAgB,CAAC;gBACpB,SAAS,EAAE,WAAW;aACvB,CAAC,CAAC;YACH,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;gBACf,IAAI,EAAE,mBAAmB;gBACzB,SAAS,EAAE,WAAW;aACvB,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,GAAG,CAAC,EAAE,CAAM,cAAc,EAAE,CAAC,QAAQ,EAAE,EAAE;YAC1C,MAAM,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC;YAC7C,MAAM,CAAC,IAAI,CAAC,uBAAuB,KAAK,EAAE,CAAC,CAAC;YAC5C,mCAAmC;YACnC,OAAO,CAAC,GAAG,CAAC,mBAAmB,GAAG,KAAK,CAAC,CAAC;YACzC,IAAI,CAAC,gBAAgB,CAAC;gBACpB,YAAY,EAAE,KAAK;aACpB,CAAC,CAAC;YACH,IAAI,CAAC,+BAA+B,CAAC,KAAK,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,EAAE,CAAM,cAAc,EAAE,CAAC,CAAC,EAAE,EAAE;YACnC,IAAI,CAAC,gBAAgB,CAAC;gBACpB,QAAQ,EAAE,CAAC,CAAC,GAAG;gBACf,cAAc,EAAE,CAAC,CAAC,SAAS;gBAC3B,eAAe,EAAE,CAAC,CAAC,UAAU;aAC9B,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,EAAE,CAAuB,mBAAmB,EAAE,CAAC,MAAM,EAAE,EAAE;YAChE,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,0BAA0B,EAAE,CAAC;QAClC,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAEO,IAAI;QAEV,QAAQ;QACR,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,GAAG,EAAE;YAC1B,MAAM,CAAC,IAAI,CAAC,oCAAoC,CAAC,CAAC;YAClD,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC;YAE7B,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC;YACnC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;YACzD,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAE/B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,aAAa,EAAE,KAAK,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;QACpE,CAAC,CAAC;QAEF,QAAQ;QACR,IAAI,CAAC,YAAY,CAAC,OAAO,GAAG,GAAG,EAAE;YAC/B,MAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;YAEpC,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC;YACnC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;YAE9D,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;gBACpB,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;YAC9B,CAAC;iBAAM,CAAC;gBACN,YAAY;gBACZ,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;YAC5B,CAAC;YACD,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAE/B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,aAAa,EAAE,KAAK,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;QACpE,CAAC,CAAC;QAEF,gBAAgB;QAChB,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,GAAG,EAAE;YAE3B,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;gBAChB,MAAM,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;gBAClC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;gBAExB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBAClB,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;gBACzC,IAAI,CAAC,oBAAoB,EAAE,CAAC;gBAE5B,IAAI,CAAC,QAAQ,CAAC,SAAS;oBACrB,kCAAkC,CAAC;gBACrC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,OAAO,CAAC;gBAE9B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC,CAAC;YAC3C,CAAC;iBAAM,CAAC;gBACN,MAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;gBACpC,IAAI,CAAC,QAAQ,EAAE,CAAC;YAClB,CAAC;QACH,CAAC,CAAC;QAEF,IAAI,CAAC,YAAY,CAAC,OAAO,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;QAEnD,IAAI,CAAC,SAAS,CAAC,OAAO;YACpB,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE,CAAC;QAE5C,IAAI,CAAC,KAAK,CAAC,OAAO;YAChB,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,uBAAuB,EAAE,CAAC;QAElD,kBAAkB;QAClB,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACnB,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,GAAG,EAAE;gBAC5B,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;oBACnB,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;gBAC/B,CAAC;qBAAM,CAAC;oBACN,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;gBAChC,CAAC;YACH,CAAC,CAAC;QACJ,CAAC;IACH,CAAC;IAEO,+BAA+B,CAAC,gBAAwB;QAC9D,MAAM,YAAY,GAAG,gBAAgB,IAAI,IAAI,CAAC,8BAA8B,CAAC;QAE7E,IAAI,YAAY,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;YACpC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;YAC5B,OAAO;QACT,CAAC;QAED,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACpC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAC7B,CAAC;IACH,CAAC;IAEO,cAAc,CAAC,MAAyB;QAC9C,IAAI,IAAI,CAAC,SAAS;YAAE,OAAO;QAE3B,MAAM,GAAG,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACrC,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,kBAAkB,CAAC,CAAC;QACzC,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;IACtC,CAAC;IAEO,aAAa,CAAC,MAAyB;QAC7C,IAAI,CAAC,IAAI,CAAC,SAAS;YAAE,OAAO;QAE5B,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,iBAAiB,CAAC,CAAC;QACxC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,CAAC;IAClC,CAAC;IAEO,iBAAiB;QACvB,6CAA6C;QAC7C,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC;QAChE,iCAAiC;QACjC,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,IAAI,WAAW,QAAQ,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC;QAClE,MAAM,CAAC,IAAI,CAAC,4BAA4B,WAAW,SAAS,GAAG,EAAE,CAAC,CAAC;QACnE,OAAO,GAAG,CAAC;IACb,CAAC;IAEO,cAAc;QACpB,IAAI,CAAC,IAAI,CAAC,SAAS;YAAE,OAAO;QAE5B,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACnB,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACvC,IAAI,CAAC,SAAS,CAAC,SAAS;gBACtB,kCAAkC,CAAC;YACrC,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,gBAAgB,CAAC;QAC1C,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YAC1C,IAAI,CAAC,SAAS,CAAC,SAAS;gBACtB,oCAAoC,CAAC;YACvC,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,iBAAiB,CAAC;QAC3C,CAAC;IACH,CAAC;IAEO,QAAQ;QACd,MAAM,GAAG,GAAG,SAAS,CAAC,eAAe,EAAE,CAAC;QACxC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC;QACnB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,cAAc,EAAE,CAAC;QAEtB,MAAM,CAAC,SAAS,CACd,qBAAqB,GAAG,CAAC,MAAM,UAAU,GAAG,CAAC,OAAO,EAAE,CACvD,CAAC;QAEF,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QACzC,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAE5B,IAAI,CAAC,QAAQ,CAAC,SAAS;YACrB,yCAAyC,CAAC;QAC5C,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;QAE5B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC1B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,cAAc,EAAE,CAAC,CAAC;IAC7C,CAAC;IAEO,SAAS;QACf,IAAI,CAAC,IAAI,CAAC,OAAO;YAAE,OAAO;QAE1B,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;QACxB,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC;QAC/B,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAE5B,wBAAwB;QACxB,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,OAAQ,CAAC,CAAC;QACtC,CAAC,EAAE,UAAU,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;IACvC,CAAC;IAEO,cAAc,CAAC,MAAe;QACpC;YACE,IAAI,CAAC,OAAO;YACZ,IAAI,CAAC,YAAY;YACjB,IAAI,CAAC,QAAQ;YACb,IAAI,CAAC,YAAY;YACjB,IAAI,CAAC,SAAS;YACd,IAAI,CAAC,KAAK;YACV,IAAI,CAAC,SAAS;SACf,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;IAC9C,CAAC;IAEO,uBAAuB;QAC7B,IAAI,IAAI,CAAC,UAAU;YAAE,OAAO,aAAa,CAAC;QAC1C,IAAI,IAAI,CAAC,UAAU;YAAE,OAAO,aAAa,CAAC;QAC1C,OAAO,OAAO,CAAC;IACjB,CAAC;IAEO,wBAAwB;QAC9B,IAAI,IAAI,CAAC,UAAU;YAAE,OAAO,kCAAkC,CAAC;QAC/D,IAAI,IAAI,CAAC,UAAU;YAAE,OAAO,kCAAkC,CAAC;QAC/D,OAAO,QAAQ,CAAC;IAClB,CAAC;IAEO,uBAAuB;QAC7B,MAAM,SAAS,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC;QACjD,MAAM,UAAU,GAAG,IAAI,CAAC,wBAAwB,EAAE,CAAC;QACnD,MAAM,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAErC,IAAI,CAAC,MAAM,EAAE,CAAC;YACZ,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,SAAS,CAAC;YACxC,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,UAAU,CAAC;YAC1C,OAAO;QACT,CAAC;QAED,IAAI,MAAM,CAAC,KAAK,KAAK,OAAO,EAAE,CAAC;YAC7B,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC;YACjD,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,UAAU,CAAC;YAC1C,OAAO;QACT,CAAC;QAED,IAAI,MAAM,CAAC,KAAK,KAAK,QAAQ,EAAE,CAAC;YAC9B,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC;YAClD,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,SAAS,CAAC;YACxC,OAAO;QACT,CAAC;QAED,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,SAAS,CAAC;QACxC,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,UAAU,CAAC;IAC5C,CAAC;IAEO,sBAAsB,CAAC,MAA4B;QACzD,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC;QAC/B,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;QAC1C,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QAC1C,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAC/B,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAE5B,IAAI,CAAC,gBAAgB,CAAC;YACpB,eAAe,EAAE,MAAM,CAAC,KAAK;YAC7B,kBAAkB,EAAE,MAAM,CAAC,QAAQ;YACnC,eAAe,EAAE,MAAM,CAAC,KAAK;SAC9B,CAAC,CAAC;IACL,CAAC;IAEO,0BAA0B;QAChC,MAAM,OAAO,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAElD,IAAI,CAAC,aAAa,CAAC,YAAY,GAAG,OAAO,CAAC;QAC1C,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,OAAO,CAAC;QACvC,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,OAAO,CAAC;QACvC,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,OAAO,CAAC;QAErC,IAAI,IAAI,CAAC,uBAAuB,KAAK,IAAI,EAAE,CAAC;YAC1C,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QACrD,CAAC;QACD,IAAI,CAAC,uBAAuB,GAAG,MAAM,CAAC,WAAW,CAAC,OAAO,EAAE,UAAU,CAAC,EAAE,CAAC,uBAAuB,CAAC,CAAC;QAClG,OAAO,EAAE,CAAC;IACZ,CAAC;IAEO,mBAAmB;QACzB,MAAM,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC,SAA+B,CAAC;QAC9D,IAAI,CAAC,EAAE;YAAE,OAAO,KAAK,CAAC;QACtB,MAAM,MAAM,GAAG,EAAE,CAAC,cAAc,EAAE,CAAC;QACnC,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC;YAAE,OAAO,KAAK,CAAC;QACjD,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,KAAK,MAAM,IAAI,CAAC,CAAC,OAAO,KAAK,KAAK,CAAC,CAAC;IAC1E,CAAC;IAEO,oBAAoB;QAC1B,IAAI,CAAC,IAAI,CAAC,cAAc;YAAE,OAAO;QAEjC,MAAM,YAAY,GAAG,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAChE,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,OAAO,GAAG,YAAY,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC;IACrE,CAAC;IAEO,cAAc;QACpB,MAAM,MAAM,GAAG,CAAC,EAAe,EAAE,EAAE,CACjC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAE9B,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACjD,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAEnD,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;YACzB,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,UAAU,CAAC,EAAE,CAAC;YACxC,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,WAAW,CAAC,EAAE,CAAC;YAC1C,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,CAAC,CAAC;YAC7B,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,CAAC,CAAC;YAE9B,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YAE9C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;gBACf,IAAI,EAAE,iBAAiB;gBACvB,KAAK,EAAE,CAAC;gBACR,MAAM,EAAE,CAAC;aACV,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,iBAAiB;QACvB,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,GAAQ,EAAE,EAAE;YACjC,QAAQ,GAAG,CAAC,IAAI,EAAE,CAAC;gBACjB,KAAK,YAAY;oBACf,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,OAAQ,CAAC,CAAC;oBACpC,MAAM;gBAER,KAAK,WAAW;oBACd,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;oBACxB,MAAM;gBAER,KAAK,cAAc;oBACjB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;oBACrB,MAAM;gBAER,KAAK,cAAc;oBACjB,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;oBAC1B,MAAM;gBAER,KAAK,WAAW;oBACd,IAAI,CAAC,SAAS,EAAE,CAAC;oBACjB,MAAM;gBAER,qBAAqB;gBACrB,KAAK,iBAAiB;oBACpB,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;oBAC9B,MAAM;gBAER,KAAK,gBAAgB;oBACnB,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;oBAC7B,MAAM;gBAER,KAAK,kBAAkB;oBACrB,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;oBACvB,MAAM;YACV,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IACO,gBAAgB,CAAC,QAAY,EAAE;QACrC,MAAM,GAAG,GAAI,MAAc,CAAC,UAAU,IAAI,EAAE,CAAC;QAC5C,MAAc,CAAC,UAAU,GAAG;YAC3B,GAAG,GAAG;YACN,GAAG,KAAK;YACR,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE;SACtB,CAAC;QAEF,OAAO,CAAC,GAAG,CAAC,WAAW,EAAG,MAAc,CAAC,UAAU,CAAC,CAAC;IACvD,CAAC;CACF;AC7cD,aAAa;AACb,kDAAkD;AAClD,MAAM,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,GAAG,EAAE;IAC7C,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAA;IACzB,IAAI,YAAY,EAAE,CAAC;AACxB,CAAC,CAAC,CAAC","sourcesContent":["type LogLevel = \"debug\" | \"info\" | \"warn\" | \"error\" | \"silent\";\n\nconst IMS_MEDIA_CONSTRAINTS_MOCK_PAYLOAD = {\n  MEDIA_CONSTRAINTS: {\n    WEB_MEDIA_CONSTRAINTS: [\n      {\n        audio: true,\n        video: {\n          width: { min: 310, ideal: 320, max: 320 },\n          frameRate: { max: 20 },\n          aspectRatio: 1.777777778\n        }\n      },\n      {\n        audio: true,\n        video: {\n          width: { min: 310, ideal: 320 },\n          frameRate: { max: 20 },\n          aspectRatio: 1.777777778\n        }\n      },\n      { audio: true, video: true }\n    ],\n    WEB_MEDIA_CONSTRAINTS_GU: [\n      {\n        audio: true,\n        video: {\n          width: { min: 620, ideal: 640, max: 640 },\n          frameRate: { max: 20 },\n          aspectRatio: 1.777777778\n        }\n      },\n      {\n        audio: true,\n        video: {\n          width: { min: 620, ideal: 640 },\n          frameRate: { max: 20 },\n          aspectRatio: 1.777777778\n        }\n      },\n      { audio: true, video: true }\n    ],\n    MOBILE_MEDIA_CONSTRAINTS: [\n      {\n        audio: true,\n        video: {\n          width: { max: 640 },\n          frameRate: { max: 30 },\n          facingMode: { exact: \"user\" }\n        }\n      }\n    ]\n  },\n  PC_CONFIG: {\n    iceServers: [\n      {\n        urls: [\n          \"turn:coturn.videocx.io:443?transport=udp\",\n          \"turns:coturn.videocx.io:443?transport=tcp\"\n        ],\n        username: \"1772097225:ecd359ac-2237-42ff-8ddc-764d79d4ea0b_!\",\n        credential: \"odIkTMlYtpKWHHVZtAxw3a+VxJE=\"\n      },\n      {\n        urls: [\"stun:coturn.videocx.io:443\"]\n      }\n    ]\n  },\n  PC_CONFIG_FF: {\n    iceServers: [\n      {\n        url: \"turn:coturn.videocx.io:443?transport=udp\",\n        username: \"1772097225:ecd359ac-2237-42ff-8ddc-764d79d4ea0b\",\n        credential: \"odIkTMlYtpKWHHVZtAxw3a+VxJE=\"\n      },\n      {\n        url: \"stun:coturn.videocx.io:443\"\n      }\n    ]\n  },\n  videochat: {\n    videoBandwidth: 128000\n  },\n  chimeMediaConstraints: {\n    maxBandwidthKbps: 256,\n    employee: {\n      desktop: { width: 640, height: 480, frameRate: 20 },\n      mobile: { width: 640, height: 480, frameRate: 20 }\n    },\n    customer: {\n      desktop: { width: 640, height: 480, frameRate: 20 },\n      mobile: { width: 640, height: 480, frameRate: 20 }\n    }\n  }\n};\n\nconst APP_CONFIG = {\n  logging: {\n    level: \"warn\" as LogLevel\n  },\n  janus: {\n    initDebug: \"warn\" as \"all\" | \"warn\" | \"error\" | \"none\"\n  },\n  http: {\n    defaultTimeoutMs: 15000\n  },\n  ims: {\n    mediaConstraintsPath: \"/ims/users/media-constraints\",\n    useMockMediaConstraints: true,\n    mockMediaConstraintsResponse: {\n      name: \"VideoConstraint\",\n      value: JSON.stringify(IMS_MEDIA_CONSTRAINTS_MOCK_PAYLOAD)\n    }\n  },\n  vcx: {\n    imsBaseUrl: \"https://localhost.beta.videocx.io\",\n    clientId: \"101\",\n    defaultJanusServer: \"wss://localhost.beta.videocx.io/mstream_janus\",\n    defaultDisplayName: \"Guest\"\n  },\n  videoroom: {\n    maxPublishers: 10\n  },\n  media: {\n    bitrateBps: 250000,\n    bitrateCap: true,\n    maxFramerate: 15,\n    minBitrateBps: 32000,\n    maxBitrateBps: 1500000,\n    minFramerate: 5,\n    maxFramerateCap: 30\n  },\n  call: {\n    reconnectDelayMs: 800,\n    participantSyncIntervalMs: 8000,\n    participantSyncCooldownMs: 2500\n  },\n  ui: {\n    remoteFallbackRefreshMs: 2500\n  },\n  recording: {\n    folderPath: \"/opt/efs-janus-app/dev/VideoRecDownloads\",\n    autoStartParticipantThreshold: 2\n  },\n  networkQuality: {\n    sampleIntervalMs: 3000,\n    simulated: {\n      rttBaseMs: 30,\n      rttSpreadMs: 200,\n      jitterBaseMs: 3,\n      jitterSpreadMs: 60,\n      lossMaxPct: 8,\n      bitrateBaseKbps: 150,\n      bitrateSpreadKbps: 1000\n    },\n    thresholds: {\n      rttGoodMs: 120,\n      jitterGoodMs: 30,\n      lossGoodPct: 2,\n      bitrateGoodKbps: 400\n    }\n  },\n  connectionStatus: {\n    tickIntervalMs: 1000,\n    rotationMinMs: 6000,\n    rotationMaxMs: 8000,\n    statsIntervalConnectingMs: 3000,\n    statsIntervalConnectedMs: 7000,\n    highRttMs: 1200,\n    highPacketLossThreshold: 0.08,\n    packetLossMinPackets: 100,\n    bytesGrowthThreshold: 1024,\n    mediaFlowRecentMs: 9000,\n    relayRecentMs: 12000,\n    candidateSwitchRecentMs: 12000,\n    localSlowCheckingMs: 12000,\n    localSlowStatsMs: 6000,\n    relayEarlyJoinWindowMs: 25000,\n    relayEarlyThresholdMs: 8000,\n    remoteSlowWaitMs: 10000,\n    disconnectedRetryMs: 4000\n  }\n} as const;\n","class Logger {\n  static instance: Logger | null = null;\n\n  private static userName = \"User\";\n  private static remoteName = \"Remote\";\n  private static level: LogLevel = APP_CONFIG.logging.level;\n  private static readonly LEVEL_PRIORITY: Record<LogLevel, number> = {\n    debug: 10,\n    info: 20,\n    warn: 30,\n    error: 40,\n    silent: 50\n  };\n\n  constructor(\n    private statusEl?: HTMLElement,\n    private infoEl?: HTMLElement\n  ){\n    Logger.instance = this;\n  }\n\n  static setUserName(name: string): void {\n    Logger.userName = (name && name.trim()) ? name.trim() : \"User\";\n    Logger.user(`Display name set to ${Logger.userName}`);\n  }\n\n  static setRemoteName(name: string): void {\n    Logger.remoteName = (name && name.trim()) ? name.trim() : \"Remote\";\n    Logger.remote(`Remote name set`);\n  }\n\n  static setLevel(level: LogLevel): void {\n    Logger.level = level;\n  }\n\n  private static canLog(level: LogLevel): boolean {\n    return Logger.LEVEL_PRIORITY[level] >= Logger.LEVEL_PRIORITY[Logger.level];\n  }\n\n  // Instance UI updates\n  setStatus(msg: string): void {\n    if (this.statusEl) this.statusEl.textContent = msg;\n    Logger.user(msg);\n  }\n\n  setInfo(msg: string): void {\n    if (this.infoEl) this.infoEl.textContent = msg;\n    if (msg) Logger.flow(msg);\n  }\n\n  // Static UI updates (backward compatible)\n  static setStatus(msg: string): void {\n    if (Logger.instance) {\n      Logger.instance.setStatus(msg);\n      return;\n    }\n    Logger.user(msg);\n  }\n  static setInfo(msg: string): void {\n    if (Logger.instance) {\n      Logger.instance.setInfo(msg);\n      return;\n    }\n    Logger.flow(msg);\n  }\n  static info(msg: string): void { Logger.setInfo(msg); }\n  static warn(msg: string): void {\n    if (!Logger.canLog(\"warn\")) return;\n    console.log(`%cUser(${Logger.userName}): ${msg}`, \"color:#f59e0b;font-weight:bold\");\n  }\n  static error(msg: string, err?: unknown): void {\n    if (!Logger.canLog(\"error\")) return;\n    console.log(`%cUser(${Logger.userName}): ${msg}`, \"color:#fb7185;font-weight:bold\");\n    if (err) console.error(err);\n  }\n\n  // Friendly narration logs\n  static user(msg: string, data?: any): void {\n    if (!Logger.canLog(\"info\")) return;\n    console.log(`%cUser(${Logger.userName}): ${msg}`, \"color:#22c55e;font-weight:bold\", data ?? \"\");\n  }\n  static remote(msg: string, data?: any): void {\n    if (!Logger.canLog(\"info\")) return;\n    console.log(`%cRemote(${Logger.remoteName}): ${msg}`, \"color:#60a5fa;font-weight:bold\", data ?? \"\");\n  }\n  static net(msg: string, data?: any): void {\n    if (!Logger.canLog(\"debug\")) return;\n    console.log(`%cNet: ${msg}`, \"color:#f59e0b;font-weight:bold\", data ?? \"\");\n  }\n  static flow(msg: string, data?: any): void {\n    if (!Logger.canLog(\"debug\")) return;\n    console.log(`%cFlow: ${msg}`, \"color:#a78bfa;font-weight:bold\", data ?? \"\");\n  }\n}\n","type EventHandler<T=any> = (payload:T)=>void;\nclass EventBus {\n  private handlers = new Map<string, Set<EventHandler>>();\n  on<T=any>(event:string, h:EventHandler<T>){\n    if(!this.handlers.has(event)) this.handlers.set(event, new Set());\n    this.handlers.get(event)!.add(h as EventHandler);\n  }\n  emit<T=any>(event:string, payload:T){\n    const hs = this.handlers.get(event);\n    if(!hs) return;\n    hs.forEach(h=>{ try{ (h as EventHandler<T>)(payload);} catch(e){ console.error(e);} });\n  }\n}\n","type JoinConfig = { server:string; roomId:number; display:string; };\ntype ParticipantSnapshot = { roomId:number; participantIds:number[]; selfId?:number; };\ntype VcxServer = {server:string, client_id:string};\ntype VcxVideoConfig = { bitrate_bps:number; bitrate_cap:boolean; max_framerate:number; };\ntype ConnectionOwner = \"LOCAL\" | \"REMOTE\" | \"SYSTEM\" | \"NEUTRAL\";\ntype ConnectionSeverity = \"info\" | \"warn\" | \"error\";\ntype ConnectionProductState =\n  | \"INIT\"\n  | \"MEDIA_PREP\"\n  | \"NEGOTIATING\"\n  | \"WAITING_REMOTE\"\n  | \"NETWORK_CHECK\"\n  | \"LOCAL_SLOW\"\n  | \"REMOTE_SLOW\"\n  | \"OPTIMIZING\"\n  | \"CONNECTED\"\n  | \"DEGRADED\"\n  | \"RETRYING\"\n  | \"FAILED\";\ntype ConnectionStatusView = {\n  owner: ConnectionOwner;\n  primaryText: string;\n  secondaryText: string;\n  severity: ConnectionSeverity;\n  state: ConnectionProductState;\n};\ntype RemoteFeedObserver = {\n  onSubscriberPcReady?: (feedId: number, pc: RTCPeerConnection) => void;\n  onRemoteTrackSignal?: (feedId: number, track: MediaStreamTrack, on: boolean) => void;\n  onRemoteFeedCleanup?: (feedId: number) => void;\n};\n","class UrlConfig {\n  static getString(k:string, fb:string=\"\"):string{\n    const v = new URLSearchParams(window.location.search).get(k);\n    return v && v.trim() ? v.trim() : fb;\n  }\n  static getNumber(k:string, fb:number):number{\n    const s = this.getString(k,\"\");\n    const n = parseInt(s,10);\n    return Number.isFinite(n) ? n : fb;\n  }\n  static getVcxServer():VcxServer {\n    return {\n      server: APP_CONFIG.vcx.imsBaseUrl,\n      client_id: APP_CONFIG.vcx.clientId\n    };\n  }\n  static getVcxVideoConfig():VcxVideoConfig {\n    return {\n      bitrate_bps: APP_CONFIG.media.bitrateBps,\n      bitrate_cap: APP_CONFIG.media.bitrateCap,\n      max_framerate: APP_CONFIG.media.maxFramerate\n    };\n  }\n  static buildJoinConfig():JoinConfig{\n    const roomIdRaw = this.getString(\"roomId\", \"\");\n    if(!roomIdRaw){\n      alert (\"This call link is missing a room ID, so we cant join yet.Please open the full link again or add ?roomId=1234 to the URL.\")\n      throw new Error(\"Missing required query param: roomId\");\n    }\n    const roomId = parseInt(roomIdRaw, 10);\n    if(!Number.isFinite(roomId)){\n          alert (\"This call link is missing a room ID, so we cant join yet.Please open the full link again or add ?roomId=1234 to the URL.\")\n      throw new Error(\"Invalid query param: roomId must be a number\");\n    }\n    return {\n      server: this.getString(\"server\", APP_CONFIG.vcx.defaultJanusServer),\n      roomId,\n      display: this.getString(\"name\", APP_CONFIG.vcx.defaultDisplayName)\n    };\n  }\n}\n","type ConnectionMessageGroup = {\n  owner: ConnectionOwner;\n  severity: ConnectionSeverity;\n  rotate: boolean;\n  primary: string[];\n  secondary: string[];\n};\n\nconst CONNECTION_ROTATION_MIN_MS = APP_CONFIG.connectionStatus.rotationMinMs;\nconst CONNECTION_ROTATION_MAX_MS = APP_CONFIG.connectionStatus.rotationMaxMs;\n\nconst CONNECTION_MESSAGES: Record<ConnectionProductState, ConnectionMessageGroup> = {\n  INIT: {\n    owner: \"SYSTEM\",\n    severity: \"info\",\n    rotate: false,\n    primary: [\"Getting ready...\"],\n    secondary: [\"Preparing secure call setup.\"]\n  },\n  MEDIA_PREP: {\n    owner: \"SYSTEM\",\n    severity: \"info\",\n    rotate: true,\n    primary: [\n      \"Preparing camera and microphone...\",\n      \"Setting up your media devices...\",\n      \"Finalizing media permissions...\"\n    ],\n    secondary: [\n      \"This usually takes a few seconds.\",\n      \"Checking browser access to media devices.\",\n      \"Almost done.\"\n    ]\n  },\n  NEGOTIATING: {\n    owner: \"SYSTEM\",\n    severity: \"info\",\n    rotate: true,\n    primary: [\n      \"Connecting your call...\",\n      \"Negotiating secure media channels...\",\n      \"Establishing video path...\"\n    ],\n    secondary: [\n      \"Please stay on this screen.\",\n      \"Optimizing signaling and media routing.\",\n      \"Finalizing connection details.\"\n    ]\n  },\n  WAITING_REMOTE: {\n    owner: \"SYSTEM\",\n    severity: \"info\",\n    rotate: true,\n    primary: [\n      \"Waiting for the other participant...\",\n      \"Call is ready. Waiting for participant...\",\n      \"Standing by for remote join...\"\n    ],\n    secondary: [\n      \"You are connected and ready.\",\n      \"Share the link if they have not joined yet.\",\n      \"This screen will update automatically.\"\n    ]\n  },\n  NETWORK_CHECK: {\n    owner: \"SYSTEM\",\n    severity: \"info\",\n    rotate: true,\n    primary: [\n      \"Checking network quality...\",\n      \"Validating connection stability...\",\n      \"Testing the best connection route...\"\n    ],\n    secondary: [\n      \"This helps us keep video stable.\",\n      \"Trying to improve call reliability.\",\n      \"Connection is still being tuned.\"\n    ]\n  },\n  LOCAL_SLOW: {\n    owner: \"LOCAL\",\n    severity: \"warn\",\n    rotate: true,\n    primary: [\n      \"Your network seems slow...\",\n      \"Your connection is unstable right now...\",\n      \"Your upload speed is lower than required...\"\n    ],\n    secondary: [\n      \"Try a stronger network or pause heavy downloads.\",\n      \"The other participant may see delayed video.\",\n      \"We are still trying to stabilize your connection.\"\n    ]\n  },\n  REMOTE_SLOW: {\n    owner: \"REMOTE\",\n    severity: \"warn\",\n    rotate: true,\n    primary: [\n      \"Other participant's network is slow...\",\n      \"Waiting for the other participant's browser to send video...\",\n      \"Still waiting for the participant's network...\"\n    ],\n    secondary: [\n      \"Your connection looks active. Waiting on remote media.\",\n      \"The other side may need a few more seconds.\",\n      \"Their video should appear once their network stabilizes.\"\n    ]\n  },\n  OPTIMIZING: {\n    owner: \"SYSTEM\",\n    severity: \"info\",\n    rotate: true,\n    primary: [\n      \"Switching to a more stable connection...\",\n      \"Optimizing route for better call quality...\",\n      \"Adjusting network path for stability...\"\n    ],\n    secondary: [\n      \"You may notice a brief quality change.\",\n      \"Using fallback routing to keep call alive.\",\n      \"Stability should improve shortly.\"\n    ]\n  },\n  CONNECTED: {\n    owner: \"NEUTRAL\",\n    severity: \"info\",\n    rotate: false,\n    primary: [\"Connected\"],\n    secondary: [\"Video and audio are live.\"]\n  },\n  DEGRADED: {\n    owner: \"SYSTEM\",\n    severity: \"warn\",\n    rotate: true,\n    primary: [\n      \"Connection is unstable...\",\n      \"Call quality is temporarily degraded...\",\n      \"Recovering from network instability...\"\n    ],\n    secondary: [\n      \"Trying to restore stable media.\",\n      \"You may see temporary freezes.\",\n      \"Automatic recovery is in progress.\"\n    ]\n  },\n  RETRYING: {\n    owner: \"SYSTEM\",\n    severity: \"warn\",\n    rotate: true,\n    primary: [\n      \"Reconnecting call...\",\n      \"Trying to recover connection...\",\n      \"Attempting a new network route...\"\n    ],\n    secondary: [\n      \"Please stay on this screen.\",\n      \"This usually resolves in a few seconds.\",\n      \"Session recovery is in progress.\"\n    ]\n  },\n  FAILED: {\n    owner: \"SYSTEM\",\n    severity: \"error\",\n    rotate: false,\n    primary: [\"Connection failed\"],\n    secondary: [\"Please reconnect to continue the call.\"]\n  }\n};\n","class ParentBridge {\n  emit(evt:any){\n    try{\n      if(window.parent && window.parent !== window){\n        window.parent.postMessage(evt, \"*\");\n      }\n    }catch{}\n  }\n\n  onCommand(cb:(cmd:any)=>void){\n    window.addEventListener(\"message\", (ev)=>{\n      const d:any = ev.data;\n      if(d && d.type) cb(d);\n    });\n  }\n}\n","// import { Cookie } from \"./Cookie\";\n// import { Correlation } from \"./Correlation\";\n// import { HttpError } from \"./HttpError\";\n// import type { HttpRequest, HttpResponse } from \"./HttpTypes\";\n\n/**\n * VCX browser HTTP client:\n * - Sends cookies (credentials: include) by default (needed for IMS/OWB token cookies)\n * - Adds X-Request-Id and X-XSRF-Token (from cookies) automatically when available\n * - Adds client-id header\n * - Provides timeout via AbortController\n * - Normalizes errors to HttpError\n */\nclass HttpClient {\n  constructor(\n    private readonly baseUrl: string,\n    private readonly clientId: string,\n    private readonly defaultTimeoutMs = APP_CONFIG.http.defaultTimeoutMs\n  ) {}\n\n  async request<T>(req: Omit<HttpRequest, \"url\"> & { path: string }): Promise<HttpResponse<T>> {\n    const requestId = Correlation.newId();\n    const url = this.buildUrl(this.baseUrl, req.path, req.query);\n\n    const controller = new AbortController();\n    const timeoutMs = req.timeoutMs ?? this.defaultTimeoutMs;\n    const t0 = performance.now();\n    const timeoutHandle = window.setTimeout(() => controller.abort(), timeoutMs);\n\n    const xsrf =\n      Cookie.get(\"xsrf-token\") ||\n      Cookie.get(\"XSRF-TOKEN\") ||\n      \"\";\n\n    const headers: Record<string, string> = {\n      \"accept\": \"application/json\",\n      ...(req.body !== undefined ? { \"content-type\": \"application/json; charset=utf-8\" } : {}),\n      \"client-id\": this.clientId,\n      \"x-request-id\": requestId,\n      ...(xsrf ? { \"x-xsrf-token\": xsrf } : {}),\n      ...(req.headers ?? {}),\n    };\n\n    try {\n      const res = await fetch(url, {\n        method: req.method,\n        headers,\n        body: req.body !== undefined ? JSON.stringify(req.body) : undefined,\n        credentials: req.credentials ?? \"include\",\n        signal: controller.signal,\n      });\n\n      const ms = Math.round(performance.now() - t0);\n\n      const text = await res.text().catch(() => \"\");\n      const data: any = text ? this.safeJson(text) : null;\n\n      if (!res.ok) {\n        throw new HttpError(\n          `HTTP ${res.status} ${req.method} ${req.path}`,\n          res.status,\n          requestId,\n          url,\n          data\n        );\n      }\n\n      return { status: res.status, data: data as T, headers: res.headers, requestId, url, ms };\n    } catch (e: any) {\n      const ms = Math.round(performance.now() - t0);\n\n      if (e?.name === \"AbortError\") {\n        throw new HttpError(\n          `Timeout (${timeoutMs}ms) ${req.method} ${req.path}`,\n          408,\n          requestId,\n          url,\n          { timeoutMs, ms }\n        );\n      }\n      if (e instanceof HttpError) throw e;\n      throw new HttpError(\n        `Network error ${req.method} ${req.path}`,\n        undefined,\n        requestId,\n        url,\n        e\n      );\n    } finally {\n      window.clearTimeout(timeoutHandle);\n    }\n  }\n\n  async getJson<T>(path: string, query?: HttpRequest[\"query\"], headers?: Record<string, string>): Promise<HttpResponse<T>> {\n    return this.request<T>({ method: \"GET\", path, query, headers });\n  }\n\n  private buildUrl(baseUrl: string, path: string, query?: HttpRequest[\"query\"]): string {\n    const u = new URL(path, baseUrl);\n    if (query) {\n      for (const [k, v] of Object.entries(query)) {\n        if (v === undefined || v === null) continue;\n        u.searchParams.set(k, String(v));\n      }\n    }\n    return u.toString();\n  }\n\n  private safeJson(text: string): any {\n    try { return JSON.parse(text); } catch { return text; }\n  }\n}\n","// import { HttpClient } from \"../../http/HttpClient\";\n// import type { ImsSettingRow, MediaConstraintsPayload } from \"./ims.types\";\n\nclass ImsClient {\n  constructor(private readonly http: HttpClient) {}\n\n  /**\n   * GET /ims/users/media-constraints\n   * Returns row with a JSON string in `value`. We parse it and return the payload.\n   */\n  async getMediaConstraints(): Promise<MediaConstraintsPayload> {\n    if (APP_CONFIG.ims.useMockMediaConstraints) {\n      const row = APP_CONFIG.ims.mockMediaConstraintsResponse;\n      return JSON.parse(row.value);\n    }\n\n    const res = await this.http.getJson<ImsSettingRow>(APP_CONFIG.ims.mediaConstraintsPath);\n    const row = res.data;\n\n    // value is a JSON string (escaped)\n    const payload: MediaConstraintsPayload = JSON.parse(row.value);\n    return payload;\n  }\n}\n","interface ImsSettingRow {\n  name: string;\n  /** JSON string */\n  value: string;\n}\n\n/** Parsed payload inside `value` */\ninterface MediaConstraintsPayload {\n  MEDIA_CONSTRAINTS?: {\n    WEB_MEDIA_CONSTRAINTS?: any[];\n    WEB_MEDIA_CONSTRAINTS_GU?: any[];\n    MOBILE_MEDIA_CONSTRAINTS?: any[];\n  };\n  PC_CONFIG?: RTCConfiguration;\n  PC_CONFIG_FF?: any;\n  videochat?: any;\n  chimeMediaConstraints?: any;\n}\n\n/**\n * Pick best constraint object for browser/device.\n * You can tweak strategy later (e.g., based on isMobile, isSafari, bandwidth, etc.)\n */\nfunction pickMediaConstraints(payload: MediaConstraintsPayload, isMobile: boolean): MediaStreamConstraints {\n  const mc = payload.MEDIA_CONSTRAINTS ?? {};\n  if (isMobile) {\n    const list = mc.MOBILE_MEDIA_CONSTRAINTS ?? [];\n    return (list[0] as MediaStreamConstraints) ?? { audio: true, video: true };\n  }\n  const list = mc.WEB_MEDIA_CONSTRAINTS ?? [];\n  return (list[0] as MediaStreamConstraints) ?? { audio: true, video: true };\n}\n","class Cookie {\n  /** Get cookie value by name (decoded). Returns null if missing. */\n  static get(name: string): string | null {\n    const safe = name.replace(/[-.$?*|{}()\\[\\]\\\\\\/\\+^]/g, \"\\\\$&\");\n    const match = document.cookie.match(new RegExp(`(?:^|; )${safe}=([^;]*)`));\n    return match ? decodeURIComponent(match[1]) : null;\n  }\n}\n","class Correlation {\n  /** Browser-safe request id */\n  static newId(): string {\n    const c: any = crypto as any;\n    if (c && typeof c.randomUUID === \"function\") return c.randomUUID();\n    return `${Date.now()}-${Math.random().toString(16).slice(2)}`;\n  }\n}\n","class HttpError extends Error {\n  constructor(\n    message: string,\n    public readonly status?: number,\n    public readonly requestId?: string,\n    public readonly url?: string,\n    public readonly details?: unknown\n  ) {\n    super(message);\n    this.name = \"HttpError\";\n  }\n}\n","type HttpMethod = \"GET\" | \"POST\" | \"PUT\" | \"PATCH\" | \"DELETE\";\n\ninterface HttpRequest {\n  method: HttpMethod;\n  /** Absolute URL */\n  url: string;\n  headers?: Record<string, string>;\n  query?: Record<string, string | number | boolean | null | undefined>;\n  body?: unknown;\n  timeoutMs?: number;\n  /** default: include (send cookies) */\n  credentials?: RequestCredentials;\n}\n\ninterface HttpResponse<T> {\n  status: number;\n  data: T;\n  headers: Headers;\n  requestId: string;\n  url: string;\n  ms: number;\n}\n","class ParticipantRoster {\n  private ids = new Set<number>();\n  private selfId?: number;\n  setSelf(id:number){ this.selfId=id; this.ids.add(id); }\n  add(id:number){ this.ids.add(id); }\n  remove(id:number){ this.ids.delete(id); }\n  snapshot(roomId:number):ParticipantSnapshot{\n    return { roomId, participantIds:Array.from(this.ids.values()), selfId:this.selfId };\n  }\n  reset(){ this.ids.clear(); this.selfId=undefined; }\n}\n","class MediaManager {\n  private localPreviewStream: MediaStream | null = null;\n\n  setLocalTrack(video: HTMLVideoElement, track: MediaStreamTrack){\n    if(!this.localPreviewStream) this.localPreviewStream = new MediaStream();\n    this.localPreviewStream.getTracks().forEach(t=>this.localPreviewStream!.removeTrack(t));\n    this.localPreviewStream.addTrack(track);\n    video.srcObject = this.localPreviewStream;\n    video.muted = true;\n    video.play().catch(()=>{});\n  }\n\n  setRemoteTrack(video: HTMLVideoElement, track: MediaStreamTrack){\n    const ms = (video.srcObject as MediaStream) || new MediaStream();\n    // Keep one active track per kind for this single remote renderer.\n    ms.getTracks().forEach(t=>{\n      if(t.kind === track.kind && t.id !== track.id){\n        ms.removeTrack(t);\n        try{ t.stop(); }catch{}\n      }\n    });\n    ms.addTrack(track);\n    video.srcObject = ms;\n    video.play().catch(()=>{});\n  }\n\n  removeRemoteTrack(video: HTMLVideoElement, track: MediaStreamTrack){\n    const ms = video.srcObject as MediaStream | null;\n    if(!ms) return;\n\n    ms.getTracks().forEach(t=>{\n      if(t === track || t.id === track.id){\n        ms.removeTrack(t);\n      }\n    });\n\n    if(ms.getTracks().length === 0){\n      video.srcObject = null;\n    }\n  }\n\n  clearLocal(video: HTMLVideoElement){\n    const ms = video.srcObject as MediaStream | null;\n    if(ms) ms.getTracks().forEach(t=>t.stop());\n    video.srcObject = null;\n    this.localPreviewStream = null;\n  }\n\n  clearRemote(video: HTMLVideoElement){\n    const ms = video.srcObject as MediaStream | null;\n    if(ms) ms.getTracks().forEach(t=>t.stop());\n    video.srcObject = null;\n  }\n}\n","class VirtualBackgroundManager {\n  private bg = new Image();\n  private seg: any = null;\n  private canvas: HTMLCanvasElement;\n  private ctx: CanvasRenderingContext2D;\n  private inVideo: HTMLVideoElement;\n  private running = false;\n  private srcStream: MediaStream | null = null;\n  private outStream: MediaStream | null = null;\n\n  // IMPORTANT: put virtual.jpeg next to index.html\n  private bgUrl = this.getBgUrl();\n\n  constructor(){\n    // For local file (same origin), no crossOrigin needed\n    this.bg.src = this.bgUrl;\n\n    this.canvas = document.createElement(\"canvas\");\n    const c = this.canvas.getContext(\"2d\");\n    if(!c) throw new Error(\"No canvas 2d\");\n    this.ctx = c;\n\n    this.inVideo = document.createElement(\"video\");\n    this.inVideo.autoplay = true;\n    this.inVideo.playsInline = true;\n    this.inVideo.muted = true;\n  }\n\nprivate getBgUrl(): string {\n  // Same folder as index.html (works even with query params)\n  // http://localhost/app/index.html?x=1 -> http://localhost/app/virtual.jpeg\n  try {\n    return new URL(\"./virtual.jpeg\", window.location.href).toString();\n  } catch {\n    return \"./virtual.jpeg\";\n  }\n}\n\n    private async ensureBgLoaded(): Promise<void> {\n    const img = this.bg;\n    const url = this.bgUrl;\n    if (!img.src || img.src !== url) {\n      img.crossOrigin = \"anonymous\";\n      img.src = url;\n    }\n    Logger.user(`VB background loading: ${img.src}`);\n    if (img.complete && img.naturalWidth > 0) {\n      Logger.user(`VB background already loaded: w=${img.naturalWidth} h=${img.naturalHeight}`);\n      return;\n    }\n    await new Promise<void>((resolve) => {\n      img.onload = () => {\n        Logger.user(`VB background loaded OK: w=${img.naturalWidth} h=${img.naturalHeight}`);\n        resolve();\n      };\n      img.onerror = () => {\n        Logger.user(`VB background FAILED to load: ${img.src}`);\n        resolve();\n      };\n    });\n  }\n\n  async enable(stream: MediaStream): Promise<MediaStream>{\n    this.srcStream = stream;\n    this.inVideo.srcObject = stream;\n    await this.inVideo.play().catch(()=>{});\n\n    await this.ensureBgLoaded();\n\n    if(!this.seg){\n      this.seg = new SelfieSegmentation({\n        locateFile: (file: string) => `https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/${file}`\n      });\n      this.seg.setOptions({ modelSelection: 1 });\n      this.seg.onResults((r: any) => this.onResults(r));\n    }\n\n    this.running = true;\n    this.loop();\n\n    // 24 fps is OK for mobile; adjust if needed\n    this.outStream = this.canvas.captureStream(24);\n    Logger.user(\"Virtual background enabled\");\n    Logger.setStatus(\"Virtual background enabled\");\n    return this.outStream;\n  }\n\n  disable(){\n    this.running = false;\n    this.outStream = null;\n    Logger.user(\"Virtual background disabled\");\n    Logger.setStatus(\"Virtual background disabled\");\n  }\n\n  getSourceStream(){ return this.srcStream; }\n\n  private async loop(){\n    while(this.running){\n      if(this.inVideo.readyState >= 2){\n        await this.seg.send({ image: this.inVideo });\n      }\n      await new Promise(r=>setTimeout(r, 33));\n    }\n  }\n\n  private onResults(results: any){\n    const w = (results.image && results.image.width) || this.inVideo.videoWidth || 640;\n    const h = (results.image && results.image.height) || this.inVideo.videoHeight || 480;\n    if(!w || !h) return;\n\n    if(this.canvas.width !== w) this.canvas.width = w;\n    if(this.canvas.height !== h) this.canvas.height = h;\n\n    const ctx = this.ctx;\n    ctx.clearRect(0,0,w,h);\n\n    // 1) Draw the camera frame\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.drawImage(results.image, 0, 0, w, h);\n\n    // 2) Keep ONLY the person using segmentation mask\n    // segmentationMask: white = person, black = background\n    ctx.globalCompositeOperation = \"destination-in\";\n    ctx.drawImage(results.segmentationMask, 0, 0, w, h);\n\n    // 3) Draw background BEHIND the person\n    ctx.globalCompositeOperation = \"destination-over\";\n    if(this.bg.complete && this.bg.naturalWidth > 0){\n      ctx.drawImage(this.bg, 0, 0, w, h);\n    } else {\n      // fallback: dark fill if image not loaded\n      ctx.fillStyle = \"#0b1020\";\n      ctx.fillRect(0,0,w,h);\n    }\n\n    ctx.globalCompositeOperation = \"source-over\";\n  }\n}\n","class ScreenShareManager {\n  private stream: MediaStream | null = null;\n\n  async start(): Promise<MediaStream>{\n    this.stream = await navigator.mediaDevices.getDisplayMedia({ video:true, audio:false });\n    return this.stream;\n  }\n\n  stop(){\n    if(this.stream){\n      this.stream.getTracks().forEach(t=>t.stop());\n      this.stream = null;\n    }\n  }\n}\n","type NetQuality = \"High\"|\"Medium\"|\"Low\";\n\nclass NetworkQualityManager {\n  private timer:number|null=null;\n\n  start(cb:(local:NetQuality, remote:NetQuality, details:string)=>void){\n    this.stop();\n    this.timer = window.setInterval(()=>{\n      // synthetic values (replace with getStats wiring)\n      const rtt = Math.round(\n        APP_CONFIG.networkQuality.simulated.rttBaseMs +\n        Math.random() * APP_CONFIG.networkQuality.simulated.rttSpreadMs\n      );\n      const jitter = Math.round(\n        APP_CONFIG.networkQuality.simulated.jitterBaseMs +\n        Math.random() * APP_CONFIG.networkQuality.simulated.jitterSpreadMs\n      );\n      const loss = Math.round(Math.random() * APP_CONFIG.networkQuality.simulated.lossMaxPct);\n      const bitrate = Math.round(\n        APP_CONFIG.networkQuality.simulated.bitrateBaseKbps +\n        Math.random() * APP_CONFIG.networkQuality.simulated.bitrateSpreadKbps\n      );\n\n      const q = this.calc(rtt,jitter,loss,bitrate);\n      const details = `rtt=${rtt}ms jitter=${jitter}ms loss=${loss}% bitrate=${bitrate}kbps`;\n      cb(q,q,details);\n    }, APP_CONFIG.networkQuality.sampleIntervalMs);\n  }\n\n  stop(){\n    if(this.timer!=null){ clearInterval(this.timer); this.timer=null; }\n  }\n\n  private calc(rtt:number,jitter:number,loss:number,bitrate:number):NetQuality{\n    let score=0;\n    if(rtt<APP_CONFIG.networkQuality.thresholds.rttGoodMs) score++;\n    if(jitter<APP_CONFIG.networkQuality.thresholds.jitterGoodMs) score++;\n    if(loss<APP_CONFIG.networkQuality.thresholds.lossGoodPct) score++;\n    if(bitrate>APP_CONFIG.networkQuality.thresholds.bitrateGoodKbps) score++;\n    if(score>=4) return \"High\";\n    if(score>=2) return \"Medium\";\n    return \"Low\";\n  }\n}\n","class ConnectionStatusEngine {\n  private status: ConnectionStatusView = {\n    owner: \"SYSTEM\",\n    primaryText: \"\",\n    secondaryText: \"\",\n    severity: \"info\",\n    state: \"INIT\"\n  };\n\n  private joinedAt: number | null = null;\n  private joinStartedAt: number | null = null;\n  private remoteParticipantCount = 0;\n  private remoteParticipantSeenAt: number | null = null;\n  private remoteTrackSeenAt: number | null = null;\n  private remoteMediaFlowAt: number | null = null;\n  private checkingSince: number | null = null;\n  private localPoorSince: number | null = null;\n  private relayDetectedAt: number | null = null;\n  private candidateSwitchAt: number | null = null;\n  private disconnectedSince: number | null = null;\n  private remoteNegotiationReady = false;\n  private selectedPairId: string | null = null;\n  private remoteVideoTracksByFeed = new Map<number, Set<string>>();\n\n  private publisherPc: RTCPeerConnection | null = null;\n  private subscriberPcs = new Map<number, RTCPeerConnection>();\n  private subscriberBytes = new Map<number, { bytes: number; growthAt: number | null }>();\n  private subscriberIceStates = new Map<number, RTCIceConnectionState>();\n  private subscriberConnStates = new Map<number, RTCPeerConnectionState>();\n\n  private localIceState: RTCIceConnectionState = \"new\";\n  private localConnState: RTCPeerConnectionState = \"new\";\n  private localSignalingState: RTCSignalingState = \"stable\";\n\n  private rotationCursor = 0;\n  private nextRotationAt = 0;\n  private tickTimer: number | null = null;\n  private statsBusy = false;\n  private lastStatsSampleAt = 0;\n  private lastPublishedKey = \"\";\n  private boundPcs = new WeakSet<RTCPeerConnection>();\n\n  constructor(private onUpdate?: (status: ConnectionStatusView) => void) {\n    this.transition(\"INIT\", true);\n    this.tickTimer = window.setInterval(() => this.tick(), APP_CONFIG.connectionStatus.tickIntervalMs);\n  }\n\n  getStatus(): ConnectionStatusView {\n    return this.status;\n  }\n\n  destroy() {\n    if (this.tickTimer !== null) {\n      window.clearInterval(this.tickTimer);\n      this.tickTimer = null;\n    }\n  }\n\n  onJoinStarted() {\n    this.joinStartedAt = Date.now();\n    this.joinedAt = null;\n    this.remoteParticipantCount = 0;\n    this.remoteParticipantSeenAt = null;\n    this.remoteTrackSeenAt = null;\n    this.remoteMediaFlowAt = null;\n    this.checkingSince = null;\n    this.localPoorSince = null;\n    this.relayDetectedAt = null;\n    this.candidateSwitchAt = null;\n    this.disconnectedSince = null;\n    this.remoteNegotiationReady = false;\n    this.selectedPairId = null;\n    this.subscriberPcs.clear();\n    this.subscriberBytes.clear();\n    this.subscriberIceStates.clear();\n    this.subscriberConnStates.clear();\n    this.remoteVideoTracksByFeed.clear();\n    this.transition(\"MEDIA_PREP\", true);\n  }\n\n  onSessionReady() {\n    this.transition(\"NEGOTIATING\", true);\n  }\n\n  onPublisherAttached() {\n    this.transition(\"NEGOTIATING\", true);\n  }\n\n  onJoinedRoom() {\n    this.joinedAt = Date.now();\n    this.transition(\"NEGOTIATING\", true);\n  }\n\n  onReconnect() {\n    this.transition(\"RETRYING\", true);\n  }\n\n  onFailed() {\n    this.transition(\"FAILED\", true);\n  }\n\n  onLeft() {\n    this.transition(\"INIT\", true);\n  }\n\n  setRemoteParticipantCount(count: number) {\n    const now = Date.now();\n    this.remoteParticipantCount = Math.max(0, count);\n    if (this.remoteParticipantCount > 0 && this.remoteParticipantSeenAt === null) {\n      this.remoteParticipantSeenAt = now;\n    }\n    if (this.remoteParticipantCount === 0) {\n      this.remoteParticipantSeenAt = null;\n      this.remoteTrackSeenAt = null;\n      this.remoteMediaFlowAt = null;\n      this.remoteNegotiationReady = false;\n      this.subscriberPcs.clear();\n      this.subscriberBytes.clear();\n      this.subscriberIceStates.clear();\n      this.subscriberConnStates.clear();\n      this.remoteVideoTracksByFeed.clear();\n    }\n    this.evaluate();\n  }\n\n  registerPublisherPc(pc: RTCPeerConnection) {\n    this.publisherPc = pc;\n    this.bindPcEvents(pc, \"publisher\");\n    this.evaluate();\n  }\n\n  registerSubscriberPc(feedId: number, pc: RTCPeerConnection) {\n    this.subscriberPcs.set(feedId, pc);\n    this.remoteNegotiationReady = true;\n    this.bindPcEvents(pc, \"subscriber\", feedId);\n    this.evaluate();\n  }\n\n  onSubscriberRequested() {\n    this.remoteNegotiationReady = true;\n    this.evaluate();\n  }\n\n  unregisterSubscriber(feedId: number) {\n    this.subscriberPcs.delete(feedId);\n    this.subscriberBytes.delete(feedId);\n    this.subscriberIceStates.delete(feedId);\n    this.subscriberConnStates.delete(feedId);\n    this.remoteVideoTracksByFeed.delete(feedId);\n    this.evaluate();\n  }\n\n  onRemoteTrackSignal(feedId: number, track: MediaStreamTrack, on: boolean) {\n    if (track.kind !== \"video\") return;\n    let tracks = this.remoteVideoTracksByFeed.get(feedId);\n    if (!tracks) {\n      tracks = new Set<string>();\n      this.remoteVideoTracksByFeed.set(feedId, tracks);\n    }\n\n    if (on) {\n      const now = Date.now();\n      this.remoteTrackSeenAt = now;\n      this.remoteMediaFlowAt = now;\n      this.remoteNegotiationReady = true;\n      tracks.add(track.id);\n      if (!this.subscriberBytes.has(feedId)) {\n        this.subscriberBytes.set(feedId, { bytes: 0, growthAt: now });\n      }\n    } else {\n      tracks.delete(track.id);\n      if (tracks.size === 0) {\n        this.remoteVideoTracksByFeed.delete(feedId);\n      }\n    }\n    this.evaluate();\n  }\n\n  private hasLiveRemoteVideoTrack(): boolean {\n    for (const tracks of this.remoteVideoTracksByFeed.values()) {\n      if (tracks.size > 0) return true;\n    }\n    return false;\n  }\n\n  onSessionDestroyed() {\n    this.transition(\"RETRYING\", true);\n  }\n\n  private bindPcEvents(pc: RTCPeerConnection, role: \"publisher\" | \"subscriber\", feedId?: number) {\n    if (this.boundPcs.has(pc)) return;\n    this.boundPcs.add(pc);\n\n    pc.addEventListener(\"iceconnectionstatechange\", () => {\n      if (role === \"publisher\" && this.publisherPc === pc) {\n        this.localIceState = pc.iceConnectionState;\n        if (pc.iceConnectionState === \"checking\") {\n          if (this.checkingSince === null) this.checkingSince = Date.now();\n        } else {\n          this.checkingSince = null;\n        }\n      }\n      if (role === \"subscriber\" && typeof feedId === \"number\") {\n        this.subscriberIceStates.set(feedId, pc.iceConnectionState);\n      }\n      this.evaluate();\n    });\n\n    pc.addEventListener(\"connectionstatechange\", () => {\n      if (role === \"publisher\" && this.publisherPc === pc) {\n        this.localConnState = (pc.connectionState || \"new\") as RTCPeerConnectionState;\n      }\n      if (role === \"subscriber\" && typeof feedId === \"number\") {\n        this.subscriberConnStates.set(feedId, (pc.connectionState || \"new\") as RTCPeerConnectionState);\n        this.remoteNegotiationReady = true;\n      }\n      this.evaluate();\n    });\n\n    pc.addEventListener(\"signalingstatechange\", () => {\n      if (role === \"publisher\" && this.publisherPc === pc) {\n        this.localSignalingState = pc.signalingState;\n      }\n      this.evaluate();\n    });\n  }\n\n  private tick() {\n    this.sampleStats();\n    this.evaluate();\n    this.maybeRotate();\n  }\n\n  private async sampleStats() {\n    if (this.statsBusy) return;\n    const now = Date.now();\n    const intervalMs = this.status.state === \"CONNECTED\"\n      ? APP_CONFIG.connectionStatus.statsIntervalConnectedMs\n      : APP_CONFIG.connectionStatus.statsIntervalConnectingMs;\n    if (now - this.lastStatsSampleAt < intervalMs) return;\n\n    this.statsBusy = true;\n    this.lastStatsSampleAt = now;\n    try {\n      const jobs: Promise<void>[] = [];\n      if (this.publisherPc) {\n        jobs.push(\n          this.publisherPc.getStats()\n            .then((report: RTCStatsReport) => this.consumePublisherStats(report))\n            .catch(() => {})\n        );\n      }\n      for (const [feedId, pc] of this.subscriberPcs.entries()) {\n        jobs.push(\n          pc.getStats()\n            .then((report: RTCStatsReport) => this.consumeSubscriberStats(feedId, report))\n            .catch(() => {})\n        );\n      }\n      await Promise.all(jobs);\n    } catch {}\n    this.statsBusy = false;\n  }\n\n  private consumePublisherStats(report: RTCStatsReport) {\n    const now = Date.now();\n    const byId = new Map<string, RTCStats>();\n    report.forEach((s: RTCStats) => byId.set(s.id, s));\n\n    let selectedPairId: string | null = null;\n    let rttMs = 0;\n    let highLoss = false;\n    let relayInUse = false;\n\n    report.forEach((s: RTCStats) => {\n      const anyS = s as any;\n      if (s.type === \"transport\" && typeof anyS.selectedCandidatePairId === \"string\") {\n        selectedPairId = anyS.selectedCandidatePairId;\n      }\n      if (s.type === \"candidate-pair\") {\n        const isSelected = !!anyS.selected || !!anyS.nominated;\n        if (!selectedPairId && isSelected) selectedPairId = s.id;\n        if (selectedPairId === s.id && typeof anyS.currentRoundTripTime === \"number\") {\n          rttMs = Math.max(rttMs, anyS.currentRoundTripTime * 1000);\n        }\n      }\n      if (s.type === \"remote-inbound-rtp\" && (anyS.kind === \"video\" || anyS.mediaType === \"video\")) {\n        const fractionLost = typeof anyS.fractionLost === \"number\" ? anyS.fractionLost : 0;\n        if (fractionLost >= APP_CONFIG.connectionStatus.highPacketLossThreshold) highLoss = true;\n      }\n      if (s.type === \"inbound-rtp\" && (anyS.kind === \"video\" || anyS.mediaType === \"video\")) {\n        const packetsReceived = typeof anyS.packetsReceived === \"number\" ? anyS.packetsReceived : 0;\n        const packetsLost = typeof anyS.packetsLost === \"number\" ? anyS.packetsLost : 0;\n        const total = packetsReceived + packetsLost;\n        if (\n          total > APP_CONFIG.connectionStatus.packetLossMinPackets &&\n          packetsLost / total >= APP_CONFIG.connectionStatus.highPacketLossThreshold\n        ) highLoss = true;\n      }\n    });\n\n    if (selectedPairId) {\n      if (this.selectedPairId && this.selectedPairId !== selectedPairId) {\n        this.candidateSwitchAt = now;\n      }\n      this.selectedPairId = selectedPairId;\n\n      const pair = byId.get(selectedPairId) as any;\n      if (pair) {\n        const local = byId.get(pair.localCandidateId) as any;\n        const remote = byId.get(pair.remoteCandidateId) as any;\n        relayInUse = local?.candidateType === \"relay\" || remote?.candidateType === \"relay\";\n      }\n    }\n\n    if (relayInUse) {\n      if (this.relayDetectedAt === null) this.relayDetectedAt = now;\n    } else {\n      this.relayDetectedAt = null;\n    }\n\n    const highRtt = rttMs >= APP_CONFIG.connectionStatus.highRttMs;\n    if (highRtt || highLoss) {\n      if (this.localPoorSince === null) this.localPoorSince = now;\n    } else {\n      this.localPoorSince = null;\n    }\n  }\n\n  private consumeSubscriberStats(feedId: number, report: RTCStatsReport) {\n    const now = Date.now();\n    let bytes = 0;\n\n    report.forEach((s: RTCStats) => {\n      const anyS = s as any;\n      if (s.type === \"inbound-rtp\" && (anyS.kind === \"video\" || anyS.mediaType === \"video\") && typeof anyS.bytesReceived === \"number\") {\n        bytes += anyS.bytesReceived;\n      }\n    });\n\n    const prev = this.subscriberBytes.get(feedId) || { bytes: 0, growthAt: null };\n    if (bytes > prev.bytes + APP_CONFIG.connectionStatus.bytesGrowthThreshold) {\n      prev.growthAt = now;\n      this.remoteMediaFlowAt = now;\n    }\n    prev.bytes = bytes;\n    this.subscriberBytes.set(feedId, prev);\n  }\n\n  private evaluate() {\n    const now = Date.now();\n    const hasRemote = this.remoteParticipantCount > 0;\n    const localConnected = this.localIceState === \"connected\" || this.localIceState === \"completed\";\n    const remoteConnected = Array.from(this.subscriberIceStates.values()).some(s => s === \"connected\" || s === \"completed\");\n    const connectedIce = localConnected || remoteConnected;\n    const mediaFlowing = this.remoteMediaFlowAt !== null && now - this.remoteMediaFlowAt <= APP_CONFIG.connectionStatus.mediaFlowRecentMs;\n    const liveRemoteVideo = this.hasLiveRemoteVideoTrack();\n\n    const anyFailed =\n      this.localIceState === \"failed\" ||\n      this.localConnState === \"failed\" ||\n      Array.from(this.subscriberIceStates.values()).some(s => s === \"failed\") ||\n      Array.from(this.subscriberConnStates.values()).some(s => s === \"failed\");\n\n    if (anyFailed) {\n      this.transition(\"FAILED\");\n      return;\n    }\n\n    const anyDisconnected =\n      this.localConnState === \"disconnected\" ||\n      Array.from(this.subscriberConnStates.values()).some(s => s === \"disconnected\");\n\n    if (anyDisconnected) {\n      if (this.disconnectedSince === null) this.disconnectedSince = now;\n      if (now - this.disconnectedSince > APP_CONFIG.connectionStatus.disconnectedRetryMs) {\n        this.transition(\"RETRYING\");\n      } else {\n        this.transition(\"DEGRADED\");\n      }\n      return;\n    }\n    this.disconnectedSince = null;\n\n    if ((connectedIce && (mediaFlowing || liveRemoteVideo)) || (hasRemote && liveRemoteVideo)) {\n      this.transition(\"CONNECTED\");\n      return;\n    }\n\n    const relayRecent =\n      this.relayDetectedAt !== null &&\n      now - this.relayDetectedAt <= APP_CONFIG.connectionStatus.relayRecentMs;\n    const candidateSwitchRecent =\n      this.candidateSwitchAt !== null &&\n      now - this.candidateSwitchAt <= APP_CONFIG.connectionStatus.candidateSwitchRecentMs;\n\n    // LOCAL_SLOW rule set:\n    // 1) ICE checking for >12s\n    // 2) high RTT or packet loss from RTCPeerConnection stats\n    // 3) relay-only path detected early in call setup\n    const localSlowByChecking =\n      this.checkingSince !== null &&\n      now - this.checkingSince > APP_CONFIG.connectionStatus.localSlowCheckingMs;\n    const localSlowByStats =\n      this.localPoorSince !== null &&\n      now - this.localPoorSince > APP_CONFIG.connectionStatus.localSlowStatsMs;\n    const localSlowByRelayEarly =\n      this.relayDetectedAt !== null &&\n      this.joinStartedAt !== null &&\n      now - this.joinStartedAt <= APP_CONFIG.connectionStatus.relayEarlyJoinWindowMs &&\n      now - this.relayDetectedAt > APP_CONFIG.connectionStatus.relayEarlyThresholdMs &&\n      !connectedIce;\n\n    if (localSlowByChecking || localSlowByStats || localSlowByRelayEarly) {\n      this.transition(\"LOCAL_SLOW\");\n      return;\n    }\n\n    // REMOTE_SLOW rule set:\n    // remote participant exists and negotiation started, but no remote video track\n    // or bytesReceived stays near zero for >10s.\n    const remoteWaitAnchor = this.remoteParticipantSeenAt ?? this.joinedAt;\n    const remoteWaitingTooLong =\n      remoteWaitAnchor !== null &&\n      now - remoteWaitAnchor > APP_CONFIG.connectionStatus.remoteSlowWaitMs;\n    const remoteFlowStalled = hasRemote && this.remoteNegotiationReady && !liveRemoteVideo && remoteWaitingTooLong;\n    if (remoteFlowStalled) {\n      this.transition(\"REMOTE_SLOW\");\n      return;\n    }\n\n    // OPTIMIZING rule set:\n    // relay usage or candidate switches indicate active path optimization.\n    if (relayRecent || candidateSwitchRecent) {\n      this.transition(\"OPTIMIZING\");\n      return;\n    }\n\n    if (!hasRemote) {\n      this.transition(this.joinedAt ? \"WAITING_REMOTE\" : \"NEGOTIATING\");\n      return;\n    }\n\n    if (!connectedIce) {\n      this.transition(\"NETWORK_CHECK\");\n      return;\n    }\n\n    if (this.localSignalingState !== \"stable\") {\n      this.transition(\"NEGOTIATING\");\n      return;\n    }\n\n    this.transition(\"NEGOTIATING\");\n  }\n\n  private maybeRotate() {\n    const cfg = CONNECTION_MESSAGES[this.status.state];\n    if (!cfg.rotate) return;\n    const now = Date.now();\n    if (now < this.nextRotationAt) return;\n    this.rotationCursor++;\n    this.publishCurrent(true);\n  }\n\n  private transition(next: ConnectionProductState, forcePublish: boolean = false) {\n    if (this.status.state !== next) {\n      this.status.state = next;\n      this.rotationCursor = 0;\n      this.publishCurrent(true);\n      return;\n    }\n\n    if (forcePublish) {\n      this.publishCurrent(true);\n    }\n  }\n\n  private publishCurrent(force: boolean = false) {\n    const cfg = CONNECTION_MESSAGES[this.status.state];\n    const p = cfg.primary;\n    const s = cfg.secondary;\n    const primary = p[this.rotationCursor % p.length] || \"\";\n    const secondary = s[this.rotationCursor % s.length] || \"\";\n    const nextStatus: ConnectionStatusView = {\n      owner: cfg.owner,\n      severity: cfg.severity,\n      primaryText: primary,\n      secondaryText: secondary,\n      state: this.status.state\n    };\n\n    if (cfg.rotate) {\n      const span = CONNECTION_ROTATION_MAX_MS - CONNECTION_ROTATION_MIN_MS;\n      this.nextRotationAt = Date.now() + CONNECTION_ROTATION_MIN_MS + Math.floor(Math.random() * (span + 1));\n    } else {\n      this.nextRotationAt = Number.MAX_SAFE_INTEGER;\n    }\n\n    const key = `${nextStatus.state}|${nextStatus.owner}|${nextStatus.primaryText}|${nextStatus.secondaryText}`;\n    if (!force && this.lastPublishedKey === key) return;\n\n    this.status = nextStatus;\n    if (this.lastPublishedKey !== key) {\n      this.logOwnership(nextStatus);\n      this.lastPublishedKey = key;\n    }\n    this.onUpdate?.(nextStatus);\n  }\n\n  private logOwnership(status: ConnectionStatusView) {\n    const prefix = status.owner === \"LOCAL\"\n      ? \"User\"\n      : status.owner === \"REMOTE\"\n        ? \"Remote\"\n        : \"System\";\n    const msg = status.secondaryText\n      ? `${status.primaryText} ${status.secondaryText}`\n      : status.primaryText;\n    console.log(`${prefix}: ${msg}`);\n  }\n}\n","class JanusGateway {\n  private janus: any = null;\n  private publisher: any = null;\n  private opaqueId = \"videocx-ui-\" + Janus.randomString(12);\n\n  constructor() {}\n\n  init() {\n    Janus.init({\n      debug: APP_CONFIG.janus.initDebug,\n      callback: () => {\n        Logger.setStatus(\"Janus initialized\");\n        Logger.user(\"Janus.init done\");\n      }\n    });\n  }\n\n  /**\n   * Creates Janus session.\n   * IMPORTANT: pass iceServers from IMS payload.PC_CONFIG.iceServers\n   */\n  createSession(\n    server: string,\n    iceServers: RTCIceServer[] | undefined,\n    ok: () => void,\n    destroyed: () => void\n  ) {\n    Logger.setStatus(\"Creating Janus session...\");\n    Logger.user(`Creating Janus session: ${server}`);\n\n    this.janus = new Janus({\n      server,\n\n      //  TURN/STUN config (from IMS)\n      // Janus will use these ICE servers for the underlying RTCPeerConnection(s)\n      iceServers: iceServers ?? [],\n\n      success: ok,\n      error: (e: any) => {\n        Logger.setStatus(\"Janus error: \" + JSON.stringify(e));\n        Logger.user(\"Janus session create error: \" + JSON.stringify(e));\n      },\n      destroyed: () => {\n        Logger.user(\"Janus session destroyed\");\n        destroyed();\n      }\n    });\n  }\n\n  attachPublisher(\n    onAttached: (h: any) => void,\n    onMessage: (msg: any, jsep: any) => void,\n    onLocalTrack: (track: MediaStreamTrack, on: boolean) => void,\n    onCleanup: () => void\n  ) {\n    if (!this.janus) {\n      Logger.setStatus(\"Janus not ready\");\n      Logger.user(\"attachPublisher called but Janus session is null\");\n      return;\n    }\n\n    Logger.user(\"Attaching videoroom publisher plugin...\");\n\n    this.janus.attach({\n      plugin: \"janus.plugin.videoroom\",\n      opaqueId: this.opaqueId,\n      success: (h: any) => {\n        this.publisher = h;\n        Logger.user(`Publisher plugin attached. handleId=${h.getId?.() ?? \"?\"}`);\n        onAttached(h);\n      },\n      error: (e: any) => {\n        Logger.setStatus(\"Attach error: \" + JSON.stringify(e));\n        Logger.user(\"Attach error: \" + JSON.stringify(e));\n      },\n      onmessage: (msg: any, jsep: any) => {\n        onMessage(msg, jsep);\n      },\n      onlocaltrack: (track: MediaStreamTrack, on: boolean) => {\n        onLocalTrack(track, on);\n      },\n      oncleanup: () => {\n        Logger.user(\"Publisher plugin cleanup\");\n        onCleanup();\n      }\n    });\n  }\n\n  getJanus() {\n    return this.janus;\n  }\n\n  getOpaqueId() {\n    return this.opaqueId;\n  }\n\n  destroy() {\n    Logger.user(\"Destroying Janus session + publisher...\");\n\n    try {\n      this.publisher?.detach?.();\n    } catch {}\n\n    this.publisher = null;\n\n    try {\n      this.janus?.destroy?.();\n    } catch {}\n\n    this.janus = null;\n  }\n}\n","class RemoteFeedManager {\n  private feeds = new Map<number, any>();\n  private feedTracks = new Map<number, Map<string, MediaStreamTrack>>();\n\n  constructor(\n    private janus:any,\n    private roomId:number,\n    private privateId:number,\n    private opaqueId:string,\n    private media:MediaManager,\n    private remoteVideo:HTMLVideoElement,\n    private observer?: RemoteFeedObserver\n  ){}\n\n  addFeed(feedId:number){\n    if(this.feeds.has(feedId)) return;\n    let remoteHandle:any = null;\n\n    this.janus.attach({\n      plugin:\"janus.plugin.videoroom\",\n      opaqueId:this.opaqueId,\n      success:(h:any)=>{\n        remoteHandle=h;\n        this.feeds.set(feedId,h);\n        h.send({ message:{ request:\"join\", room:this.roomId, ptype:\"subscriber\", feed:feedId, private_id:this.privateId }});\n      },\n      error:(e:any)=>Logger.setStatus(\"Remote attach error: \"+JSON.stringify(e)),\n      onmessage:(msg:any,jsep:any)=>{\n        if(jsep){\n          // TODO: If Janus internals change and webrtcStuff.pc is unavailable, pass the subscriber PC from a Janus plugin callback here.\n          const pc = remoteHandle?.webrtcStuff?.pc as RTCPeerConnection | undefined;\n          if(pc){\n            this.observer?.onSubscriberPcReady?.(feedId, pc);\n          }\n          remoteHandle.createAnswer({\n            jsep,\n            tracks:[{type:\"audio\",capture:false,recv:true},{type:\"video\",capture:false,recv:true}],\n            success:(ans:any)=>remoteHandle.send({ message:{ request:\"start\", room:this.roomId }, jsep:ans }),\n            error:(e:any)=>Logger.setStatus(\"Remote answer error: \"+JSON.stringify(e))\n          });\n        }\n      },\n      onlocaltrack:()=>{},\n      onremotetrack:(track:MediaStreamTrack,_mid:string,on:boolean)=>{\n        this.observer?.onRemoteTrackSignal?.(feedId, track, on);\n        let byId = this.feedTracks.get(feedId);\n        if(!byId){\n          byId = new Map<string, MediaStreamTrack>();\n          this.feedTracks.set(feedId, byId);\n        }\n\n        if(!on){\n          const prev = byId.get(track.id);\n          if(prev){\n            this.media.removeRemoteTrack(this.remoteVideo, prev);\n            byId.delete(track.id);\n          } else {\n            this.media.removeRemoteTrack(this.remoteVideo, track);\n          }\n          return;\n        }\n\n        const existingSameKind = Array.from(byId.values()).find(t => t.kind === track.kind && t.id !== track.id);\n        if(existingSameKind){\n          this.media.removeRemoteTrack(this.remoteVideo, existingSameKind);\n          byId.delete(existingSameKind.id);\n        }\n\n        byId.set(track.id, track);\n        this.media.setRemoteTrack(this.remoteVideo, track);\n      },\n      oncleanup:()=>this.removeFeed(feedId, false, true)\n    });\n  }\n\n  removeFeed(id:number, detach:boolean = true, notify:boolean = true){\n    let removed = false;\n    const h = this.feeds.get(id);\n    if(h){\n      if(detach){\n        try{h.detach();}catch{}\n      }\n      this.feeds.delete(id);\n      removed = true;\n    }\n\n    const tracks = this.feedTracks.get(id);\n    if(tracks){\n      tracks.forEach(t => this.media.removeRemoteTrack(this.remoteVideo, t));\n      this.feedTracks.delete(id);\n      removed = true;\n    }\n\n    if(removed && notify){\n      this.observer?.onRemoteFeedCleanup?.(id);\n    }\n  }\n\n  cleanupAll(){\n    Array.from(this.feeds.keys()).forEach(id => this.removeFeed(id, true, true));\n    this.media.clearRemote(this.remoteVideo);\n  }\n}\n","// import { HttpClient } from \"../core/http/HttpClient\";\n// import { ImsClient } from \"../core/clients/ims/ImsClient\";\n\nclass CallController {\n\n  private gateway: JanusGateway;\n  private media: MediaManager;\n  private roster = new ParticipantRoster();\n\n  private plugin: any = null;\n  private privateId: number | null = null;\n  private selfId: number | null = null;\n  private remoteFeeds: RemoteFeedManager | null = null;\n\n  private joinedRoom = false;\n  private roomCreateAttempted = false;\n\n  private cameraStream: MediaStream | null = null;\n  private screenEnabled = false;\n  private vbEnabled = false;\n\n  private screenManager = new ScreenShareManager();\n  private vbManager: VirtualBackgroundManager;\n\n  //  CLEAN recording state\n  private recording = false;\n  private currentRecordingId: string | null = null;\n  private currentRoomId: number | null = null;\n  private participantSyncTimer: number | null = null;\n  private participantSyncInFlight = false;\n  private lastParticipantSyncAt = 0;\n  private connectionEngine: ConnectionStatusEngine;\n\n  constructor(\n    private bus: EventBus,\n    private localVideo: HTMLVideoElement,\n    private remoteVideo: HTMLVideoElement\n  ) {\n    this.gateway = new JanusGateway();\n    this.media = new MediaManager();\n    this.vbManager = new VirtualBackgroundManager();\n    this.connectionEngine = new ConnectionStatusEngine((status: ConnectionStatusView) => {\n      this.bus.emit(\"connection-status\", status);\n    });\n    this.bus.emit(\"connection-status\", this.connectionEngine.getStatus());\n    this.gateway.init();\n  }\n\n  async join(cfg: JoinConfig) {\n    this.connectionEngine.onJoinStarted();\n    try {\n      const server = UrlConfig.getVcxServer().server;\n      const clientId = UrlConfig.getVcxServer().client_id;\n\n      const http: HttpClient = new HttpClient(server, clientId);\n      const ims = new ImsClient(http);\n      const payload = await ims.getMediaConstraints();\n\n      this.gateway.createSession(\n        cfg.server,\n        payload.PC_CONFIG?.iceServers,\n        () => {\n          this.connectionEngine.onSessionReady();\n          this.attachAndEnsureRoomThenJoin(cfg);\n        },\n        () => {\n          this.connectionEngine.onSessionDestroyed();\n          Logger.setStatus(\"Session destroyed\");\n        }\n      );\n    } catch (e: any) {\n      this.connectionEngine.onFailed();\n      Logger.setStatus(\"Join error: \" + (e?.message || e));\n    }\n  }\n\n  private attachAndEnsureRoomThenJoin(cfg: JoinConfig) {\n\n    this.gateway.attachPublisher(\n      (h: any) => {\n\n        this.plugin = h;\n        this.joinedRoom = false;\n        this.roomCreateAttempted = false;\n        this.selfId = null;\n        this.roster.reset();\n        this.stopParticipantSync();\n\n        // reset recording\n        this.recording = false;\n        this.currentRecordingId = null;\n        this.bus.emit(\"recording-changed\", false);\n        this.connectionEngine.onPublisherAttached();\n\n        Logger.setStatus(\"Plugin attached. Checking room...\");\n        this.ensureRoomThenJoin(cfg);\n      },\n      (msg: any, jsep: any) => this.onPublisherMessage(cfg, msg, jsep),\n      (track: any, on: any) => {\n        if (on && track.kind === \"video\") {\n          this.media.setLocalTrack(this.localVideo, track);\n        }\n      },\n      () => {\n        this.connectionEngine.onReconnect();\n        Logger.setStatus(\"Publisher cleanup\");\n      }\n    );\n  }\n\n  private getVideoRoomData(msg: any) {\n    return msg?.plugindata?.data ?? msg;\n  }\n\n  private ensureRoomThenJoin(cfg: JoinConfig) {\n\n    if (!this.plugin) return;\n\n    this.plugin.send({\n      message: { request: \"exists\", room: cfg.roomId },\n      success: (res: any) => {\n\n        const data = this.getVideoRoomData(res);\n        const exists = !!data?.exists;\n\n        if (exists) {\n          Logger.setStatus(`Room exists. Joining...`);\n          this.sendPublisherJoin(cfg);\n        } else {\n          Logger.setStatus(`Room not found. Creating...`);\n          this.roomCreateAttempted = true;\n          this.sendCreateRoom(cfg);\n        }\n      },\n      error: () => {\n        this.connectionEngine.onFailed();\n        this.leave();\n      }\n    });\n  }\n\n  private sendPublisherJoin(cfg: JoinConfig) {\n    if (!this.plugin) return;\n    this.plugin.send({\n      message: {\n        request: \"join\",\n        room: cfg.roomId,\n        ptype: \"publisher\",\n        display: cfg.display\n      }\n    });\n  }\n\n  private sendCreateRoom(cfg: JoinConfig) {\n\n    if (!this.plugin) return;\n\n    this.plugin.send({\n      message: {\n        request: \"create\",\n        room: cfg.roomId,\n        publishers: APP_CONFIG.videoroom.maxPublishers,\n        description: `Room ${cfg.roomId}`\n      },\n      success: () => {\n        Logger.setStatus(\"Room created. Joining...\");\n        this.sendPublisherJoin(cfg);\n      },\n      error: () => {\n        this.connectionEngine.onFailed();\n        this.leave();\n      }\n    });\n  }\n\n  private onPublisherMessage(cfg: JoinConfig, msg: any, jsep: any) {\n\n    const data = this.getVideoRoomData(msg);\n    const event = data[\"videoroom\"];\n    const errorCode = data[\"error_code\"];\n\n    if (event === \"event\" && errorCode === 426) {\n      if (!this.roomCreateAttempted) {\n        this.roomCreateAttempted = true;\n        this.sendCreateRoom(cfg);\n      } else {\n        this.connectionEngine.onFailed();\n        this.leave();\n      }\n      return;\n    }\n\n    if (event === \"joined\") {\n\n      this.joinedRoom = true;\n      this.currentRoomId = cfg.roomId;\n      this.connectionEngine.onJoinedRoom();\n\n      const myId = data[\"id\"];\n      this.privateId = data[\"private_id\"];\n      this.selfId = myId;\n      this.roster.setSelf(myId);\n\n      Logger.setStatus(\"Joined. Publishing...\");\n\n      this.remoteFeeds = new RemoteFeedManager(\n        this.gateway.getJanus(),\n        cfg.roomId,\n        this.privateId!,\n        this.gateway.getOpaqueId(),\n        this.media,\n        this.remoteVideo,\n        {\n          onSubscriberPcReady: (feedId: number, pc: RTCPeerConnection) => {\n            this.connectionEngine.registerSubscriberPc(feedId, pc);\n          },\n          onRemoteTrackSignal: (feedId: number, track: MediaStreamTrack, on: boolean) => {\n            this.connectionEngine.onRemoteTrackSignal(feedId, track, on);\n          },\n          onRemoteFeedCleanup: (feedId: number) => {\n            this.connectionEngine.unregisterSubscriber(feedId);\n          }\n        }\n      );\n\n      this.publish();\n      this.reconcile(cfg, data[\"publishers\"]);\n      this.bus.emit(\"joined\", true);\n      this.startParticipantSync(cfg);\n    }\n\n    if (event === \"event\") {\n      this.reconcile(cfg, data[\"publishers\"]);\n\n      const leaving = data[\"leaving\"];\n      if (typeof leaving === \"number\") {\n        this.removeParticipant(cfg, leaving);\n      }\n\n      const unpublished = data[\"unpublished\"];\n      if (typeof unpublished === \"number\") {\n        this.removeParticipant(cfg, unpublished);\n      }\n\n      this.syncParticipantsFromServer(cfg);\n    }\n\n    if (event === \"destroyed\") {\n      this.connectionEngine.onFailed();\n      this.leave();\n      return;\n    }\n\n    if (jsep) this.plugin.handleRemoteJsep({ jsep });\n  }\n\n  private reconcile(cfg: JoinConfig, publishers: any) {\n    if (!publishers) return;\n    publishers.forEach((p: any) => {\n      const feedId = Number(p?.id);\n      if (!Number.isFinite(feedId)) return;\n\n      this.roster.add(feedId);\n      if (this.remoteFeeds && feedId !== this.selfId) {\n        this.connectionEngine.onSubscriberRequested();\n        this.remoteFeeds.addFeed(feedId);\n      }\n    });\n\n    this.publishParticipants(cfg);\n  }\n\n  private publishParticipants(cfg: JoinConfig) {\n    const snapshot = this.roster.snapshot(cfg.roomId);\n    this.bus.emit(\"participants\", snapshot);\n\n    const remoteCount = snapshot.participantIds\n      .filter((id: number) => id !== this.selfId)\n      .length;\n    this.connectionEngine.setRemoteParticipantCount(remoteCount);\n  }\n\n  private startParticipantSync(cfg: JoinConfig) {\n    this.stopParticipantSync();\n    this.syncParticipantsFromServer(cfg);\n    this.participantSyncTimer = window.setInterval(() => {\n      this.syncParticipantsFromServer(cfg);\n    }, APP_CONFIG.call.participantSyncIntervalMs);\n  }\n\n  private stopParticipantSync() {\n    if (this.participantSyncTimer !== null) {\n      window.clearInterval(this.participantSyncTimer);\n      this.participantSyncTimer = null;\n    }\n    this.participantSyncInFlight = false;\n    this.lastParticipantSyncAt = 0;\n  }\n\n  private syncParticipantsFromServer(cfg: JoinConfig) {\n    if (!this.plugin || !this.joinedRoom) return;\n    if (this.participantSyncInFlight) return;\n\n    const now = Date.now();\n    if (now - this.lastParticipantSyncAt < APP_CONFIG.call.participantSyncCooldownMs) return;\n    this.lastParticipantSyncAt = now;\n    this.participantSyncInFlight = true;\n\n    this.plugin.send({\n      message: { request: \"listparticipants\", room: cfg.roomId },\n      success: (res: any) => {\n        const data = this.getVideoRoomData(res);\n        const participants = Array.isArray(data?.participants) ? data.participants : [];\n        const serverIds = new Set<number>();\n\n        participants.forEach((p: any) => {\n          const feedId = Number(p?.id);\n          if (!Number.isFinite(feedId)) return;\n          serverIds.add(feedId);\n          this.roster.add(feedId);\n          if (this.remoteFeeds && feedId !== this.selfId) {\n            this.remoteFeeds.addFeed(feedId);\n          }\n        });\n\n        const localIds = this.roster.snapshot(cfg.roomId).participantIds;\n        localIds.forEach((id: number) => {\n          if (id === this.selfId) return;\n          if (!serverIds.has(id)) {\n            this.roster.remove(id);\n            this.remoteFeeds?.removeFeed(id);\n          }\n        });\n\n        this.publishParticipants(cfg);\n        this.participantSyncInFlight = false;\n      },\n      error: () => {\n        this.participantSyncInFlight = false;\n      }\n    });\n  }\n\n  private removeParticipant(cfg: JoinConfig, feedId: number) {\n    if (feedId === this.selfId) return;\n    this.roster.remove(feedId);\n    this.remoteFeeds?.removeFeed(feedId);\n    this.publishParticipants(cfg);\n  }\n\n  // =====================================\n  // MEDIA\n  // =====================================\n\n  private getVideoConfig(): VcxVideoConfig {\n    const cfg = UrlConfig.getVcxVideoConfig();\n    const bitrateBps = Number.isFinite(cfg.bitrate_bps) ? Math.floor(cfg.bitrate_bps) : APP_CONFIG.media.bitrateBps;\n    const maxFramerate = Number.isFinite(cfg.max_framerate) ? Math.floor(cfg.max_framerate) : APP_CONFIG.media.maxFramerate;\n\n    return {\n      bitrate_bps: Math.max(APP_CONFIG.media.minBitrateBps, Math.min(APP_CONFIG.media.maxBitrateBps, bitrateBps)),\n      bitrate_cap: cfg.bitrate_cap !== false,\n      max_framerate: Math.max(APP_CONFIG.media.minFramerate, Math.min(APP_CONFIG.media.maxFramerateCap, maxFramerate))\n    };\n  }\n\n  private tuneVideoSenderBitrate(pc: RTCPeerConnection, bitrateBps: number, maxFramerate: number) {\n    try {\n      const sender = pc.getSenders().find(s => s.track?.kind === \"video\");\n      if (!sender || typeof sender.getParameters !== \"function\" || typeof sender.setParameters !== \"function\") return;\n\n      const p = sender.getParameters();\n      const encodings = (p.encodings && p.encodings.length > 0) ? p.encodings : [{} as RTCRtpEncodingParameters];\n      encodings[0].maxBitrate = bitrateBps;\n      encodings[0].maxFramerate = maxFramerate;\n      p.encodings = encodings;\n\n      sender.setParameters(p).catch((e: any) => {\n        console.log(\"VCX_SET_PARAMETERS_ERROR=\", e?.message || e);\n      });\n    } catch (e: any) {\n      console.log(\"VCX_SET_PARAMETERS_HOOK_ERROR=\", e?.message || e);\n    }\n  }\n\n  // public publish() {\n  //   this.plugin.createOffer({\n  //     tracks: [\n  //       { type: \"audio\", capture: true, recv: false },\n  //       { type: \"video\", capture: true, recv: false }\n  //     ],\n  //     success: (jsep: any) => {\n  //       this.plugin.send({\n  //         message: { request: \"configure\", audio: true, video: true },\n  //         jsep\n  //       });\n  //     }\n  //   });\n  // }\n\n  public publish() {\n    if (!this.plugin) {\n      Logger.setStatus(\"Publish ignored: plugin not ready\");\n      return;\n    }\n    const videoCfg = this.getVideoConfig();\n\n    this.plugin.createOffer({\n      tracks: [\n        { type: \"audio\", capture: true, recv: false },\n        { type: \"video\", capture: true, recv: false },\n      ],\n\n      success: (jsep: any) => {\n        //  Point #4: capture and emit connectivity info from RTCPeerConnection\n        try {\n          // TODO: If Janus internals change and webrtcStuff.pc is unavailable, bind the publisher PC from Janus plugin callbacks.\n          const pc: RTCPeerConnection | undefined = this.plugin?.webrtcStuff?.pc;\n\n          if (pc) {\n            this.connectionEngine.registerPublisherPc(pc);\n            this.tuneVideoSenderBitrate(pc, videoCfg.bitrate_bps, videoCfg.max_framerate);\n            const emit = () => {\n              const payload = {\n                ice: pc.iceConnectionState,\n                signaling: pc.signalingState,\n                connection: (pc as any).connectionState ?? \"n/a\",\n                gathering: pc.iceGatheringState,\n                ts: Date.now(),\n              };\n\n              console.log(\"VCX_CONNECTIVITY=\", payload);\n              this.bus.emit(\"connectivity\", payload);\n            };\n\n            // emit once immediately\n            emit();\n\n            pc.oniceconnectionstatechange = () => {\n              console.log(\"VCX_ICE=\" + pc.iceConnectionState);\n              emit();\n            };\n\n            pc.onsignalingstatechange = () => {\n              console.log(\"VCX_SIGNALING=\" + pc.signalingState);\n              emit();\n            };\n\n            // connectionState exists on modern browsers; not always present everywhere\n            (pc as any).onconnectionstatechange = () => {\n              console.log(\"VCX_CONNECTION=\" + ((pc as any).connectionState ?? \"n/a\"));\n              emit();\n            };\n\n            pc.onicegatheringstatechange = () => {\n              console.log(\"VCX_GATHERING=\" + pc.iceGatheringState);\n              emit();\n            };\n          } else {\n            console.log(\"VCX_CONNECTIVITY=pc_not_available\");\n            this.bus.emit(\"connectivity\", {\n              ice: \"n/a\",\n              signaling: \"n/a\",\n              connection: \"n/a\",\n              gathering: \"n/a\",\n              ts: Date.now(),\n            });\n          }\n        } catch (e: any) {\n          console.log(\"VCX_CONNECTIVITY=hook_error\", e?.message || e);\n        }\n\n        //  normal Janus publish configure\n        this.plugin.send({\n          message: {\n            request: \"configure\",\n            audio: true,\n            video: true,\n            bitrate: videoCfg.bitrate_bps,\n            bitrate_cap: videoCfg.bitrate_cap\n          },\n          jsep,\n        });\n      },\n\n      error: (e: any) => {\n        this.connectionEngine.onReconnect();\n        Logger.setStatus(\"Offer error: \" + JSON.stringify(e));\n        console.log(\"VCX_OFFER_ERROR=\", e);\n      },\n    });\n  }\n\n  toggleMute() {\n    if (!this.plugin) return;\n    const m = this.plugin.isAudioMuted();\n    m ? this.plugin.unmuteAudio() : this.plugin.muteAudio();\n    this.bus.emit(\"mute-changed\", !m);\n  }\n\n  markRetrying() {\n    this.connectionEngine.onReconnect();\n  }\n\n  stopVideo() {\n    this.plugin?.send({ message: { request: \"unpublish\" } });\n  }\n\n  // =====================================\n  // RECORDING\n  // =====================================\n\n  public startRecording(recordingId: string) {\n\n    if (!this.plugin || !this.joinedRoom) return;\n    if (this.recording) return;\n\n    this.currentRecordingId = recordingId;\n\n    this.plugin.send({\n      message: {\n        request: \"configure\",\n        record: true,\n        room:this.currentRoomId,\n        filename: recordingId\n      },\n      success: () => {\n        this.recording = true;\n        Logger.setStatus(`Recording started: ${recordingId}`);\n        this.bus.emit(\"recording-changed\", true);\n      },\n      error: () => {\n        this.recording = false;\n        this.bus.emit(\"recording-changed\", false);\n      }\n    });\n  }\n\n  public stopRecording() {\n\n    if (!this.plugin || !this.recording) return;\n\n    this.plugin.send({\n      message: { request: \"configure\", record: false },\n      success: () => {\n        this.recording = false;\n        Logger.setStatus(\"Recording stopped\");\n        this.bus.emit(\"recording-changed\", false);\n      }\n    });\n  }\n\n  // =====================================\n  // LEAVE\n  // =====================================\n\n  leave() {\n\n    try {\n\n      if (this.recording) this.stopRecording();\n\n      try {\n        if (this.joinedRoom) {\n          this.plugin?.send({ message: { request: \"leave\" } });\n        }\n      } catch {}\n\n      this.remoteFeeds?.cleanupAll();\n      this.remoteFeeds = null;\n\n      this.plugin = null;\n      this.gateway.destroy();\n      this.stopParticipantSync();\n\n      this.joinedRoom = false;\n      this.recording = false;\n      this.currentRecordingId = null;\n      this.currentRoomId = null;\n      this.selfId = null;\n      this.roster.reset();\n\n      this.bus.emit(\"recording-changed\", false);\n      this.bus.emit(\"joined\", false);\n      this.connectionEngine.onLeft();\n\n      this.media.clearLocal(this.localVideo);\n      this.media.clearRemote(this.remoteVideo);\n\n      Logger.setStatus(\"Left\");\n\n    } catch (e: any) {\n      Logger.setStatus(\"Leave error: \" + e.message);\n    }\n  }\n\n    async toggleScreenShare(){\n    if(!this.plugin) return;\n\n    if(!this.screenEnabled){\n      const ss = await this.screenManager.start();\n      const track = ss.getVideoTracks()[0];\n      if(!track) return;\n      this.screenEnabled = true;\n      this.replaceVideoTrack(track);\n      Logger.setStatus(\"Screen share started\");\n      this.bus.emit(\"screen-changed\", true);\n      track.onended = ()=>{ if(this.screenEnabled) this.toggleScreenShare(); };\n    } else {\n      this.screenManager.stop();\n      this.screenEnabled = false;\n      const cam = await this.ensureCameraStream();\n      const track = cam.getVideoTracks()[0];\n      if(track) this.replaceVideoTrack(track);\n      Logger.setStatus(\"Screen share stopped\");\n      this.bus.emit(\"screen-changed\", false);\n    }\n  }\n\n  async toggleVirtualBackground(){\n    if(!this.plugin) return;\n    if(this.screenEnabled){\n      Logger.setStatus(\"Disable screen share before virtual background\");\n      return;\n    }\n\n    if(!this.vbEnabled){\n      const cam = await this.ensureCameraStream();\n      const processed = await this.vbManager.enable(cam);\n      const track = processed.getVideoTracks()[0];\n      if(!track) return;\n      this.vbEnabled = true;\n      this.replaceVideoTrack(track);\n      this.bus.emit(\"vb-changed\", true);\n    } else {\n      this.vbManager.disable();\n      this.vbEnabled = false;\n      const cam = await this.ensureCameraStream();\n      const track = cam.getVideoTracks()[0];\n      if(track) this.replaceVideoTrack(track);\n      this.bus.emit(\"vb-changed\", false);\n    }\n  }\n  private async ensureCameraStream(){\n    if(!this.cameraStream){\n      this.cameraStream = await navigator.mediaDevices.getUserMedia({ video:true, audio:true });\n    }\n    return this.cameraStream;\n  }\n   private replaceVideoTrack(track: MediaStreamTrack){\n    if(!this.plugin) return;\n    this.plugin.replaceTracks({\n      tracks:[{ type:\"video\", capture:track, recv:false }]\n    });\n    this.media.setLocalTrack(this.localVideo, track);\n  }\n}\n","// import {Dom} from \"./Dom\";\n// import {CallController} from \"../managers/CallController\";\n\nclass UIController {\n\n  private getQueryParam(key: string): string | null {\n    try {\n      return new URLSearchParams(window.location.search).get(key);\n    } catch {\n      return null;\n    }\n  }\n\n  private logger: Logger;\n  private bus = new EventBus();\n  private controller: CallController;\n\n  private btnMute = document.getElementById(\"btnMute\") as HTMLButtonElement;\n  private btnUnpublish = document.getElementById(\"btnUnpublish\") as HTMLButtonElement;\n  private btnLeave = document.getElementById(\"btnLeave\") as HTMLButtonElement;\n  private btnReconnect = document.getElementById(\"btnReconnect\") as HTMLButtonElement;\n  private btnScreen = document.getElementById(\"btnScreen\") as HTMLButtonElement;\n  private btnVB = document.getElementById(\"btnVB\") as HTMLButtonElement;\n\n  //  NEW\n  private btnRecord = document.getElementById(\"btnRecord\") as HTMLButtonElement;\n\n  private lastCfg: JoinConfig | null = null;\n\n  private bridge = new ParentBridge();\n  private net = new NetworkQualityManager();\n  private remoteVideoEl = document.getElementById(\"remoteVideo\") as HTMLVideoElement;\n  private remoteFallback = document.getElementById(\"remoteFallback\") as HTMLDivElement;\n\n  private localOverlay = document.getElementById(\"localOverlay\") as HTMLDivElement;\n  private remoteOverlay = document.getElementById(\"remoteOverlay\") as HTMLDivElement;\n  private endedOverlay = document.getElementById(\"endedOverlay\") as HTMLDivElement;\n\n  private localQ = document.getElementById(\"localQuality\") as HTMLDivElement;\n  private remoteQ = document.getElementById(\"remoteQuality\") as HTMLDivElement;\n  private localQD = document.getElementById(\"localQualityDetails\") as HTMLDivElement;\n  private remoteQD = document.getElementById(\"remoteQualityDetails\") as HTMLDivElement;\n\n  private audioMuted = false;\n  private videoMuted = false;\n  private ended = false;\n  private folderPath:string = APP_CONFIG.recording.folderPath;\n  private autoRecordParticipantThreshold = APP_CONFIG.recording.autoStartParticipantThreshold;\n\n  //  recording state\n  private recording = false;\n  private connectionStatus: ConnectionStatusView | null = null;\n  private remoteVideoMonitorTimer: number | null = null;\n\n  constructor() {\n    const qn = this.getQueryParam(\"name\");\n    if (qn) Logger.setUserName(qn);\n\n    Logger.user(\"UI loaded. Initializing controllers...\");\n    Logger.flow(\"DOMContentLoaded  UIController()\");\n\n    this.logger = new Logger(\n      document.getElementById(\"statusLine\") as HTMLElement,\n      document.getElementById(\"sessionInfo\") as HTMLElement\n    );\n\n    const localVideo = document.getElementById(\"localVideo\") as HTMLVideoElement;\n    const remoteVideo = this.remoteVideoEl;\n\n    this.controller = new CallController(this.bus, localVideo, remoteVideo);\n\n    this.bus.on<boolean>(\"joined\", j=>{\n        this.setJoinedState(j);\n        console.log(\"VCX_JOINED=\" + j);\n        this.updateDebugState({\n          joined: j\n        });\n    });\n\n    this.bus.on<boolean>(\"mute-changed\", muted => {\n      this.btnMute.innerHTML =\n        muted\n          ? '<i class=\"fa-solid fa-microphone-slash\"></i>'\n          : '<i class=\"fa-solid fa-microphone\"></i>';\n    });\n\n    this.bus.on<boolean>(\"screen-changed\", on => {\n      this.btnScreen.title = on ? \"Stop Screen Share\" : \"Start Screen Share\";\n    });\n\n    this.bus.on<boolean>(\"vb-changed\", on => {\n      this.btnVB.title = on ? \"Disable Virtual Background\" : \"Enable Virtual Background\";\n    });\n    this.bus.on<boolean>(\"recording-changed\", isRecording => {\n        this.recording = isRecording;\n        this.updateRecordUI();\n        this.updateDebugState({\n          recording: isRecording\n        });\n        this.bridge.emit({\n          type: \"RECORDING_CHANGED\",\n          recording: isRecording\n        });\n    });\n\n    this.bus.on<any>(\"participants\", (snapshot) => {\n        const count = snapshot.participantIds.length;\n        Logger.user(`Participants count: ${count}`);\n        // SIMPLE LOG (automation-friendly)\n        console.log(\"VCX_PARTICIPANTS=\" + count);\n        this.updateDebugState({\n          participants: count\n        });\n        this.syncAutoRecordingByParticipants(count);\n    });\n    this.bus.on<any>(\"connectivity\", (s) => {\n        this.updateDebugState({\n          iceState: s.ice,\n          signalingState: s.signaling,\n          connectionState: s.connection\n        });\n    });\n    this.bus.on<ConnectionStatusView>(\"connection-status\", (status) => {\n      this.renderConnectionStatus(status);\n    });\n\n    this.wire();\n    this.setupNetworkUI();\n    this.setupParentBridge();\n    this.setupRemoteFallbackMonitor();\n    this.autoJoin();\n  }\n\n  private wire() {\n\n    // AUDIO\n    this.btnMute.onclick = () => {\n      Logger.user(\"Audio button clicked  toggle mute\");\n      this.controller.toggleMute();\n\n      this.audioMuted = !this.audioMuted;\n      this.btnMute.classList.toggle(\"danger\", this.audioMuted);\n      this.applyConnectionOverlays();\n\n      this.bridge.emit({ type: \"AUDIO_MUTED\", muted: this.audioMuted });\n    };\n\n    // VIDEO\n    this.btnUnpublish.onclick = () => {\n      Logger.user(\"Video button clicked\");\n\n      this.videoMuted = !this.videoMuted;\n      this.btnUnpublish.classList.toggle(\"danger\", this.videoMuted);\n\n      if (this.videoMuted) {\n        this.controller.stopVideo();\n      } else {\n        // republish\n        this.controller.publish();\n      }\n      this.applyConnectionOverlays();\n\n      this.bridge.emit({ type: \"VIDEO_MUTED\", muted: this.videoMuted });\n    };\n\n    // LEAVE / START\n    this.btnLeave.onclick = () => {\n\n      if (!this.ended) {\n        Logger.user(\"End button clicked\");\n        this.controller.leave();\n\n        this.ended = true;\n        this.endedOverlay.style.display = \"flex\";\n        this.renderRemoteFallback();\n\n        this.btnLeave.innerHTML =\n          '<i class=\"fa-solid fa-play\"></i>';\n        this.btnLeave.title = \"Start\";\n\n        this.bridge.emit({ type: \"CALL_ENDED\" });\n      } else {\n        Logger.user(\"Start button clicked\");\n        this.autoJoin();\n      }\n    };\n\n    this.btnReconnect.onclick = () => this.reconnect();\n\n    this.btnScreen.onclick =\n      () => this.controller.toggleScreenShare();\n\n    this.btnVB.onclick =\n      () => this.controller.toggleVirtualBackground();\n\n    //  RECORD BUTTON\n    if (this.btnRecord) {\n      this.btnRecord.onclick = () => {\n        if (this.recording) {\n          this.stopRecording(\"manual\");\n        } else {\n          this.startRecording(\"manual\");\n        }\n      };\n    }\n  }\n\n  private syncAutoRecordingByParticipants(participantCount: number) {\n    const shouldRecord = participantCount >= this.autoRecordParticipantThreshold;\n\n    if (shouldRecord && !this.recording) {\n      this.startRecording(\"auto\");\n      return;\n    }\n\n    if (!shouldRecord && this.recording) {\n      this.stopRecording(\"auto\");\n    }\n  }\n\n  private startRecording(source: \"manual\" | \"auto\") {\n    if (this.recording) return;\n\n    const rid = this.createRecordingId();\n    Logger.user(`${source} start recording`);\n    this.controller.startRecording(rid);\n  }\n\n  private stopRecording(source: \"manual\" | \"auto\") {\n    if (!this.recording) return;\n\n    Logger.user(`${source} stop recording`);\n    this.controller.stopRecording();\n  }\n\n  private createRecordingId(): string{\n    // Generate 6 digit integer (100000  999999)\n    const recordingId = Math.floor(100000 + Math.random() * 900000);\n    // Build Janus recording basename\n    const rid = `${this.folderPath}/${recordingId}/rec_${Date.now()}`;\n    Logger.user(`Recording generated  id=${recordingId}, rid=${rid}`);\n    return rid;\n  }\n\n  private updateRecordUI() {\n    if (!this.btnRecord) return;\n\n    if (this.recording) {\n      this.btnRecord.classList.add(\"danger\");\n      this.btnRecord.innerHTML =\n        '<i class=\"fa-solid fa-stop\"></i>';\n      this.btnRecord.title = \"Stop Recording\";\n    } else {\n      this.btnRecord.classList.remove(\"danger\");\n      this.btnRecord.innerHTML =\n        '<i class=\"fa-solid fa-circle\"></i>';\n      this.btnRecord.title = \"Start Recording\";\n    }\n  }\n\n  private autoJoin() {\n    const cfg = UrlConfig.buildJoinConfig();\n    this.lastCfg = cfg;\n    this.recording = false;\n    this.updateRecordUI();\n\n    Logger.setStatus(\n      `Joining... roomId=${cfg.roomId}, name=${cfg.display}`\n    );\n\n    this.ended = false;\n    this.endedOverlay.style.display = \"none\";\n    this.renderRemoteFallback();\n\n    this.btnLeave.innerHTML =\n      '<i class=\"fa-solid fa-phone-slash\"></i>';\n    this.btnLeave.title = \"End\";\n\n    this.controller.join(cfg);\n    this.bridge.emit({ type: \"CALL_STARTED\" });\n  }\n\n  private reconnect() {\n    if (!this.lastCfg) return;\n\n    this.controller.leave();\n    this.controller.markRetrying();\n    this.renderRemoteFallback();\n\n    // safer Janus reconnect\n    setTimeout(() => {\n      this.controller.join(this.lastCfg!);\n    }, APP_CONFIG.call.reconnectDelayMs);\n  }\n\n  private setJoinedState(joined: boolean) {\n    [\n      this.btnMute,\n      this.btnUnpublish,\n      this.btnLeave,\n      this.btnReconnect,\n      this.btnScreen,\n      this.btnVB,\n      this.btnRecord\n    ].forEach(b => b && (b.disabled = !joined));\n  }\n\n  private getLocalBaseOverlayText(): string {\n    if (this.videoMuted) return \"video muted\";\n    if (this.audioMuted) return \"audio muted\";\n    return \"Local\";\n  }\n\n  private getRemoteBaseOverlayText(): string {\n    if (this.videoMuted) return \"video muted on other participant\";\n    if (this.audioMuted) return \"audio muted on other participant\";\n    return \"Remote\";\n  }\n\n  private applyConnectionOverlays() {\n    const localBase = this.getLocalBaseOverlayText();\n    const remoteBase = this.getRemoteBaseOverlayText();\n    const status = this.connectionStatus;\n\n    if (!status) {\n      this.localOverlay.innerText = localBase;\n      this.remoteOverlay.innerText = remoteBase;\n      return;\n    }\n\n    if (status.owner === \"LOCAL\") {\n      this.localOverlay.innerText = status.primaryText;\n      this.remoteOverlay.innerText = remoteBase;\n      return;\n    }\n\n    if (status.owner === \"REMOTE\") {\n      this.remoteOverlay.innerText = status.primaryText;\n      this.localOverlay.innerText = localBase;\n      return;\n    }\n\n    this.localOverlay.innerText = localBase;\n    this.remoteOverlay.innerText = remoteBase;\n  }\n\n  private renderConnectionStatus(status: ConnectionStatusView) {\n    this.connectionStatus = status;\n    this.logger.setStatus(status.primaryText);\n    this.logger.setInfo(status.secondaryText);\n    this.applyConnectionOverlays();\n    this.renderRemoteFallback();\n\n    this.updateDebugState({\n      connectionOwner: status.owner,\n      connectionSeverity: status.severity,\n      connectionState: status.state\n    });\n  }\n\n  private setupRemoteFallbackMonitor() {\n    const refresh = () => this.renderRemoteFallback();\n\n    this.remoteVideoEl.onloadeddata = refresh;\n    this.remoteVideoEl.onplaying = refresh;\n    this.remoteVideoEl.onemptied = refresh;\n    this.remoteVideoEl.onpause = refresh;\n\n    if (this.remoteVideoMonitorTimer !== null) {\n      window.clearInterval(this.remoteVideoMonitorTimer);\n    }\n    this.remoteVideoMonitorTimer = window.setInterval(refresh, APP_CONFIG.ui.remoteFallbackRefreshMs);\n    refresh();\n  }\n\n  private hasRemoteVideoTrack(): boolean {\n    const ms = this.remoteVideoEl.srcObject as MediaStream | null;\n    if (!ms) return false;\n    const tracks = ms.getVideoTracks();\n    if (!tracks || tracks.length === 0) return false;\n    return tracks.some(t => t.readyState === \"live\" && t.enabled !== false);\n  }\n\n  private renderRemoteFallback() {\n    if (!this.remoteFallback) return;\n\n    const showFallback = !this.ended && !this.hasRemoteVideoTrack();\n    this.remoteFallback.style.display = showFallback ? \"flex\" : \"none\";\n  }\n\n  private setupNetworkUI() {\n    const toggle = (el: HTMLElement) =>\n      el.classList.toggle(\"show\");\n\n    this.localQ.onclick = () => toggle(this.localQD);\n    this.remoteQ.onclick = () => toggle(this.remoteQD);\n\n    this.net.start((l, r, d) => {\n      this.localQ.textContent = `Local: ${l}`;\n      this.remoteQ.textContent = `Remote: ${r}`;\n      this.localQD.textContent = d;\n      this.remoteQD.textContent = d;\n\n      Logger.net(`Local ${l} | Remote ${r} | ${d}`);\n\n      this.bridge.emit({\n        type: \"NETWORK_CHANGED\",\n        local: l,\n        remote: r\n      });\n    });\n  }\n\n  private setupParentBridge() {\n    this.bridge.onCommand((cmd: any) => {\n      switch (cmd.type) {\n        case \"START_CALL\":\n          this.controller.join(this.lastCfg!);\n          break;\n\n        case \"STOP_CALL\":\n          this.controller.leave();\n          break;\n\n        case \"TOGGLE_AUDIO\":\n          this.btnMute.click();\n          break;\n\n        case \"TOGGLE_VIDEO\":\n          this.btnUnpublish.click();\n          break;\n\n        case \"RECONNECT\":\n          this.reconnect();\n          break;\n\n        //  recording events\n        case \"START_RECORDING\":\n          this.startRecording(\"manual\");\n          break;\n\n        case \"STOP_RECORDING\":\n          this.stopRecording(\"manual\");\n          break;\n\n        case \"TOGGLE_RECORDING\":\n          this.btnRecord.click();\n          break;\n      }\n    });\n  }\n  private updateDebugState(extra:any = {}) {\n    const dbg = (window as any).__vcxDebug || {};\n    (window as any).__vcxDebug = {\n      ...dbg,\n      ...extra,\n      timestamp: Date.now()\n    };\n\n    console.log(\"VCX_DEBUG\", (window as any).__vcxDebug);\n  }\n}\n","// src/app.ts\n// import {UIController} from \"./ui/UIController\";\nwindow.addEventListener(\"DOMContentLoaded\", () => {\n    console.log(\"page loaded\")\n     new UIController(); \n});\n"]}